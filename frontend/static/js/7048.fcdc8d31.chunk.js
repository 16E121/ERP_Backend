"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7048],{7048:(e,s,a)=>{a.r(s),a.d(s,{default:()=>f});var r=a(69060),t=a(42136),n=a(43692),c=a(84436),o=a(5548),l=a(82656),d=a(26773),i=a(4488),m=a(90048),u=a(86e3),h=a(45180),p=a(56480),v=(a(21680),a(32635)),x=a(1908),N=a(39308),j=a(82496);const f=()=>{const e=JSON.parse(localStorage.getItem("user")),s={UserId:"",Name:"",UserName:"",UserTypeId:"",Password:"",BranchId:"",Company_id:null===e||void 0===e?void 0:e.Company_id},[a,f]=(0,r.useState)([]),[g,b]=(0,r.useState)(!1),[C,y]=(0,r.useState)(!1),[w,U]=(0,r.useState)(s),[I,S]=(0,r.useState)(!1),[P,k]=(0,r.useState)(""),[B,T]=(0,r.useState)([]),[M,D]=(0,r.useState)([]),[_,E]=(0,r.useState)([]);(0,r.useEffect)((()=>{(0,x.q)({address:"masters/users?Company_id=".concat(null===e||void 0===e?void 0:e.Company_id)}).then((e=>{var s;e.success&&(null===e||void 0===e||null===(s=e.data)||void 0===s||s.sort(((e,s)=>e.Name.localeCompare(s.Name))),f(e.data))})).catch((e=>console.error(e)))}),[C,null===e||void 0===e?void 0:e.Company_id]),(0,r.useEffect)((()=>{(0,x.q)({address:"masters/userType?Company_id=".concat(null===e||void 0===e?void 0:e.Company_id)}).then((e=>{e.success&&D(e.data)})).catch((e=>console.error(e)))}),[null===e||void 0===e?void 0:e.Company_id]),(0,r.useEffect)((()=>{(0,x.q)({address:"masters/branch/dropDown?Company_id=".concat(null===e||void 0===e?void 0:e.Company_id)}).then((e=>{e.success&&E(e.data)})).catch((e=>console.error(e)))}),[null===e||void 0===e?void 0:e.Company_id]),(0,r.useEffect)((()=>{if(P){const e=a.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(P.toLowerCase())))));T(e)}}),[P,a]);const q=()=>{U(s),b((e=>!e))};return(0,j.jsxs)(r.Fragment,{children:[(0,j.jsxs)(n.c,{children:[(0,j.jsxs)("div",{className:"px-3 py-2 fw-bold d-flex align-items-center justify-content-between border-bottom",children:["USERS",(0,j.jsx)("div",{className:"text-end",children:(0,j.jsx)(t.c,{onClick:q,className:"rounded-5 px-3 py-1 fa-13 shadow",children:g?"Back":"Add User"})})]}),(0,j.jsx)(c.c,{children:g?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,x.q)({address:"masters/users",method:w.UserId?"PUT":"POST",bodyData:{...w,Password:(0,N.ER)(w.Password)}}).then((e=>{e.success?(y(!C),p.m4.success(e.message),q()):p.m4.error(e.message)}))},children:[(0,j.jsxs)("div",{className:"row p-3",children:[(0,j.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,j.jsx)("label",{children:"Name"}),(0,j.jsx)("input",{className:"cus-inpt",value:w.Name,required:!0,minLength:3,onChange:e=>U({...w,Name:e.target.value})})]}),(0,j.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,j.jsx)("label",{children:"Password"}),(0,j.jsx)("input",{className:"cus-inpt",type:"password",required:!0,minLength:6,value:w.Password,onChange:e=>U({...w,Password:e.target.value})})]}),(0,j.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,j.jsx)("label",{children:"Mobile"}),(0,j.jsx)("input",{className:"cus-inpt",type:"number",required:!0,value:w.UserName,maxLength:10,onChange:e=>U({...w,UserName:e.target.value})})]}),(0,j.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,j.jsx)("label",{children:"Branch"}),(0,j.jsxs)("select",{className:"cus-inpt",value:w.BranchId,required:!0,onChange:e=>U({...w,BranchId:e.target.value}),children:[(0,j.jsx)("option",{value:"",children:"select"}),null===_||void 0===_?void 0:_.map(((e,s)=>(0,j.jsx)("option",{value:e.BranchId,children:e.BranchName},s)))]})]}),(0,j.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,j.jsx)("label",{children:"User Type"}),(0,j.jsxs)("select",{className:"cus-inpt",value:w.UserTypeId,required:!0,onChange:e=>U({...w,UserTypeId:e.target.value}),children:[(0,j.jsx)("option",{value:"",children:"Select"}),null===M||void 0===M?void 0:M.map(((e,s)=>(0,j.jsx)("option",{value:e.Id,children:e.UserType},s)))]})]})]}),(0,j.jsxs)("div",{className:"pe-3 d-flex justify-content-end",children:[(0,j.jsx)(t.c,{className:"rounded-5 px-4 mx-1 btn-light bg-white",onClick:q,type:"button",children:"cancel"}),(0,j.jsx)(t.c,{className:"rounded-5 px-4 shadow mx-1",type:"submit",children:w.UserId?"Update":"Create"})]})]})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"d-flex justify-content-end",children:(0,j.jsx)("div",{className:" pb-2",children:(0,j.jsx)("input",{value:P,className:"cus-inpt w-auto",placeholder:"Search",onChange:e=>k(e.target.value)})})}),(0,j.jsx)(v.cp,{data:P?B.length>0?B:[]:a,columns:[{name:"Name",selector:e=>e.Name,sortable:!0},{name:"Type",selector:e=>e.UserType,sortable:!0},{name:"Mobile",selector:e=>e.UserName,sortable:!1},{name:"Company",selector:e=>e.Company_Name,sortable:!0},{name:"Company",selector:e=>e.BranchName,sortable:!0},{name:"Action",cell:e=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(o.c,{onClick:()=>{(e=>{const{UserId:s,Name:a,UserName:r,UserTypeId:t,Password:n,BranchId:c}=e,o=(0,N.YP)(n);U((e=>({...e,UserId:s,Name:a,UserName:r,UserTypeId:t,Password:o,BranchId:c}))),b(!0)})(e)},size:"small",children:(0,j.jsx)(u.c,{className:"fa-in"})}),(0,j.jsx)(o.c,{onClick:()=>{const{UserId:s,Name:a,UserName:r,UserTypeId:t,Password:n,BranchId:c}=e;U((e=>({...e,UserId:s,Name:a,UserName:r,UserTypeId:t,Password:n,BranchId:c}))),S(!0)},size:"small",children:(0,j.jsx)(h.c,{className:"fa-in del-red"})})]})}],direction:"auto",fixedHeader:!0,fixedHeaderScrollHeight:"63dvh",highlightOnHover:!0,pagination:!0,responsive:!0,striped:!0,subHeaderAlign:"right",subHeaderWrap:!0})]})})]}),(0,j.jsxs)(l.c,{open:I,onClose:()=>S(!1),fullWidth:!0,maxWidth:"sm",children:[(0,j.jsx)(d.c,{id:"alert-dialog-title",children:"Confirmation"}),(0,j.jsx)(i.c,{children:(0,j.jsxs)("b",{className:"text-muted",children:["Do you want to Delete the user ",(0,j.jsx)("span",{className:"blue-text",children:w.Name}),"?"]})}),(0,j.jsxs)(m.c,{children:[(0,j.jsx)(t.c,{className:" btn-light",onClick:()=>{S(!1)},children:"Cancel"}),(0,j.jsx)(t.c,{onClick:()=>{(0,x.q)({address:"masters/users",method:"DELETE",bodyData:{UserId:w.UserId}}).then((e=>{e.success?(y(!C),S((e=>!e)),U(s),p.m4.success(e.message)):p.m4.error(e.message)})).catch((e=>{console.error("Error deleting user:",e),p.m4.error("An error occurred. Please try again later.")}))},children:"Delete"})]})]})]})}},45180:(e,s,a)=>{a.d(s,{c:()=>n});var r=a(27664),t=a(82496);const n=(0,r.c)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},86e3:(e,s,a)=>{a.d(s,{c:()=>n});var r=a(27664),t=a(82496);const n=(0,r.c)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},84436:(e,s,a)=>{a.d(s,{c:()=>x});var r=a(45072),t=a(95656),n=a(69060),c=a(79736),o=a(21412),l=a(12556),d=a(49836),i=a(10099),m=a(33448);function u(e){return(0,m.cp)("MuiCardContent",e)}(0,i.c)("MuiCardContent",["root"]);var h=a(82496);const p=["className","component"],v=(0,l.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,s)=>s.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),x=n.forwardRef((function(e,s){const a=(0,d.C)({props:e,name:"MuiCardContent"}),{className:n,component:l="div"}=a,i=(0,t.c)(a,p),m=(0,r.c)({},a,{component:l}),x=(e=>{const{classes:s}=e;return(0,o.c)({root:["root"]},u,s)})(m);return(0,h.jsx)(v,(0,r.c)({as:l,className:(0,c.c)(x.root,n),ownerState:m,ref:s},i))}))},43692:(e,s,a)=>{a.d(s,{c:()=>N});var r=a(45072),t=a(95656),n=a(69060),c=a(79736),o=a(21412),l=a(12556),d=a(49836),i=a(85624),m=a(10099),u=a(33448);function h(e){return(0,u.cp)("MuiCard",e)}(0,m.c)("MuiCard",["root"]);var p=a(82496);const v=["className","raised"],x=(0,l.cp)(i.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,s)=>s.root})((()=>({overflow:"hidden"}))),N=n.forwardRef((function(e,s){const a=(0,d.C)({props:e,name:"MuiCard"}),{className:n,raised:l=!1}=a,i=(0,t.c)(a,v),m=(0,r.c)({},a,{raised:l}),u=(e=>{const{classes:s}=e;return(0,o.c)({root:["root"]},h,s)})(m);return(0,p.jsx)(x,(0,r.c)({className:(0,c.c)(u.root,n),elevation:l?8:void 0,ref:s,ownerState:m},i))}))},16344:(e,s,a)=>{a.d(s,{cV:()=>c,cp:()=>l});var r=a(69060),t=a(82496);const n=["as","disabled"];function c(e){let{tagName:s,disabled:a,href:r,target:t,rel:n,role:c,onClick:o,tabIndex:l=0,type:d}=e;s||(s=null!=r||null!=t||null!=n?"a":"button");const i={tagName:s};if("button"===s)return[{type:d||"button",disabled:a},i];const m=e=>{(a||"a"===s&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),a?e.stopPropagation():null==o||o(e)};return"a"===s&&(r||(r="#"),a&&(r=void 0)),[{role:null!=c?c:"button",disabled:void 0,tabIndex:a?void 0:l,href:r,target:"a"===s?t:void 0,"aria-disabled":a||void 0,rel:"a"===s?n:void 0,onClick:m,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),m(e))}},i]}const o=r.forwardRef(((e,s)=>{let{as:a,disabled:r}=e,o=function(e,s){if(null==e)return{};var a,r,t={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],s.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);const[l,{tagName:d}]=c(Object.assign({tagName:a,disabled:r},o));return(0,t.jsx)(d,Object.assign({},o,l,{ref:s}))}));o.displayName="Button";const l=o},42136:(e,s,a)=>{a.d(s,{c:()=>i});var r=a(264),t=a.n(r),n=a(69060),c=a(16344),o=a(83576),l=a(82496);const d=n.forwardRef(((e,s)=>{let{as:a,bsPrefix:r,variant:n="primary",size:d,active:i=!1,disabled:m=!1,className:u,...h}=e;const p=(0,o.Ky)(r,"btn"),[v,{tagName:x}]=(0,c.cV)({tagName:a,disabled:m,...h}),N=x;return(0,l.jsx)(N,{...v,...h,ref:s,disabled:m,className:t()(u,p,i&&"active",n&&"".concat(p,"-").concat(n),d&&"".concat(p,"-").concat(d),h.href&&m&&"disabled")})}));d.displayName="Button";const i=d}}]);
//# sourceMappingURL=7048.fcdc8d31.chunk.js.map
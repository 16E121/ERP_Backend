"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8272],{98272:(e,i,s)=>{s.r(i),s.d(i,{default:()=>M});var t=s(69060),n=s(82656),c=s(4488),d=s(90048),a=s(89e3),l=s(27454),o=s(700),r=s(52924),h=s(5548),g=s(99904),x=s(85624),u=s(33856),j=s(58612),R=s(29504),S=s(56416),m=s(56480),v=(s(21680),s(30612)),p=s(62344),f=s(77536),b=s(1908),C=s(82496);const k=(e,i,s,t,n)=>{t&&t(),(0,b.q)({address:"authorization/userTypeRights",method:"POST",bodyData:{MenuId:i,UserType:Number(s),ReadRights:!0===e.readRights?1:0,AddRights:!0===e.addRights?1:0,EditRights:!0===e.editRights?1:0,DeleteRights:!0===e.deleteRights?1:0,PrintRights:!0===e.printRights?1:0}}).then((e=>{e.success||m.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{n&&n()}))},_=e=>{let{UserTypeId:i,data:s,loadingOn:m,loadingOff:v}=e;const[f,b]=(0,t.useState)(!1),[_,I]=(0,t.useState)(1===s.Read_Rights),[M,w]=(0,t.useState)(1===s.Add_Rights),[z,O]=(0,t.useState)(1===s.Edit_Rights),[T,E]=(0,t.useState)(1===s.Delete_Rights),[U,A]=(0,t.useState)(1===s.Print_Rights),[D,H]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{I(1===s.Read_Rights),w(1===s.Add_Rights),O(1===s.Edit_Rights),E(1===s.Delete_Rights),A(1===s.Print_Rights),H(!1)}),[s]),(0,t.useEffect)((()=>{!0===D&&k({readRights:_,addRights:M,editRights:z,deleteRights:T,printRights:U},s.id,i,m,v)}),[_,M,z,T,U]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(l.c,{hover:!0,children:[(0,C.jsx)(o.c,{children:s.id}),(0,C.jsx)(o.c,{children:s.name}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:_,onChange:()=>{H(!0),I(!_)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:M,onChange:()=>{H(!0),w(!M)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:z,onChange:()=>{H(!0),O(!z)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:T,onChange:()=>{H(!0),E(!T)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:U,onChange:()=>{H(!0),A(!U)}})}),(0,C.jsx)(o.c,{children:s.SubMenu.length>0&&(0,C.jsx)(h.c,{"aria-label":"expand row",size:"small",onClick:()=>b(!f),children:(0,C.jsx)(S.c,{})})})]}),(0,C.jsxs)(n.c,{open:f,onClose:()=>b(!f),maxWidth:"lg",fullWidth:!0,children:[(0,C.jsxs)(c.c,{children:[(0,C.jsx)("h3",{style:{paddingBottom:"0.5em"},children:"Sub Menu"}),(0,C.jsx)(g.c,{component:x.c,sx:{maxHeight:650},children:(0,C.jsxs)(u.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,C.jsx)(j.c,{children:(0,C.jsx)(l.c,{children:p.o$.map((e=>(0,C.jsx)(o.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:e.headname},e.id)))})}),(0,C.jsx)(R.c,{children:s.SubMenu.map(((e,s)=>(0,C.jsx)(y,{data:e,UserTypeId:i,loadingOff:v,loadingOn:m},s)))})]})})]}),(0,C.jsx)(d.c,{children:(0,C.jsx)(a.c,{onClick:()=>b(!f),color:"primary",children:"Close"})})]})]})},y=e=>{var i;let{data:s,UserTypeId:m,loadingOn:v,loadingOff:f}=e;const[b,_]=(0,t.useState)(!1),[y,M]=(0,t.useState)(1===s.Read_Rights),[w,z]=(0,t.useState)(1===s.Add_Rights),[O,T]=(0,t.useState)(1===s.Edit_Rights),[E,U]=(0,t.useState)(1===s.Delete_Rights),[A,D]=(0,t.useState)(1===s.Print_Rights),[H,P]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{M(1===s.Read_Rights),z(1===s.Add_Rights),T(1===s.Edit_Rights),U(1===s.Delete_Rights),D(1===s.Print_Rights),P(!1)}),[s]),(0,t.useEffect)((()=>{!0===H&&k({readRights:y,addRights:w,editRights:O,deleteRights:E,printRights:A},s.id,m,v,f)}),[y,w,O,E,A]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(l.c,{hover:!0,children:[(0,C.jsx)(o.c,{children:s.id}),(0,C.jsx)(o.c,{children:s.name}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:y,onChange:()=>{P(!0),M(!y)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:w,onChange:()=>{P(!0),z(!w)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:O,onChange:()=>{P(!0),T(!O)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:E,onChange:()=>{P(!0),U(!E)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:A,onChange:()=>{P(!0),D(!A)}})}),(0,C.jsx)(o.c,{children:s.ChildMenu.length>0&&(0,C.jsx)(h.c,{"aria-label":"expand row",size:"small",onClick:()=>_(!b),children:(0,C.jsx)(S.c,{})})})]}),(0,C.jsxs)(n.c,{open:b,onClose:()=>_(!b),maxWidth:"lg",fullWidth:!0,children:[(0,C.jsxs)(c.c,{children:[(0,C.jsx)("h3",{style:{paddingBottom:"0.5em"},children:"Child Menu"}),(0,C.jsx)(g.c,{component:x.c,sx:{maxHeight:650},children:(0,C.jsxs)(u.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,C.jsx)(j.c,{children:(0,C.jsx)(l.c,{children:p.o$.map((e=>(0,C.jsx)(o.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:e.headname},e.id)))})}),(0,C.jsx)(R.c,{children:null===s||void 0===s||null===(i=s.ChildMenu)||void 0===i?void 0:i.map(((e,i)=>(0,C.jsx)(I,{data:e,UserTypeId:m,loadingOff:f,loadingOn:v},i)))})]})})]}),(0,C.jsx)(d.c,{children:(0,C.jsx)(a.c,{onClick:()=>_(!b),color:"primary",children:"Close"})})]})]})},I=e=>{const{data:i,UserTypeId:s,loadingOn:n,loadingOff:c}=e,[d,a]=(0,t.useState)(1===i.Read_Rights),[h,g]=(0,t.useState)(1===i.Add_Rights),[x,u]=(0,t.useState)(1===i.Edit_Rights),[j,R]=(0,t.useState)(1===i.Delete_Rights),[S,m]=(0,t.useState)(1===i.Print_Rights),[v,p]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{a(1===i.Read_Rights),g(1===i.Add_Rights),u(1===i.Edit_Rights),R(1===i.Delete_Rights),m(1===i.Print_Rights),p(!1)}),[i]),(0,t.useEffect)((()=>{!0===v&&k({readRights:d,addRights:h,editRights:x,deleteRights:j,printRights:S},i.id,s,n,c)}),[d,h,x,j,S]),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(l.c,{hover:!0,children:[(0,C.jsx)(o.c,{children:i.id}),(0,C.jsx)(o.c,{children:i.name}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:d,onChange:()=>{p(!0),a(!d)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:h,onChange:()=>{p(!0),g(!h)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:x,onChange:()=>{p(!0),u(!x)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:j,onChange:()=>{p(!0),R(!j)}})}),(0,C.jsx)(o.c,{children:(0,C.jsx)(r.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:S,onChange:()=>{p(!0),m(!S)}})}),(0,C.jsx)(o.c,{})]})})},M=e=>{let{loadingOn:i,loadingOff:s}=e;const n=localStorage.getItem("user"),c=JSON.parse(n),[d,a]=(0,t.useState)([]),[r,h]=(0,t.useState)([]),[S,k]=(0,t.useState)([]),{contextObj:y}=(0,t.useContext)(f.a),[M,w]=(0,t.useState)({value:null===c||void 0===c?void 0:c.UserTypeId,label:null===c||void 0===c?void 0:c.UserType});return(0,t.useEffect)((()=>{(0,b.q)({address:"authorization/userTypeRights?UserType=".concat(null===M||void 0===M?void 0:M.value)}).then((e=>{var i,s;e.success&&(a(null===e||void 0===e?void 0:e.data),h(null!==(i=null===e||void 0===e||null===(s=e.others)||void 0===s?void 0:s.subRoutings)&&void 0!==i?i:[]))})).catch((e=>console.error(e)))}),[M]),(0,t.useEffect)((()=>{(0,b.q)({address:"masters/userType"}).then((e=>{e.success&&k(e.data)})).catch((e=>console.error(e)))}),[]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(m.jd,{}),(0,C.jsx)("div",{className:"row",children:(0,C.jsx)("div",{className:"col-sm-4 pt-1",children:(0,C.jsx)(v.cp,{value:M,onChange:e=>w({value:e.value,label:e.label}),options:[...S.map((e=>({value:null===e||void 0===e?void 0:e.Id,label:null===e||void 0===e?void 0:e.UserType})))],styles:p.cF,isSearchable:!0,placeholder:"Select UserType"})})}),(0,C.jsx)("br",{}),(0,C.jsx)("h6",{style:{marginBottom:"0.5em",borderBottom:"2px solid blue",width:"fit-content"},children:"Main Menu"}),(0,C.jsx)(g.c,{component:x.c,sx:{maxHeight:650},children:(0,C.jsxs)(u.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,C.jsx)(j.c,{children:(0,C.jsx)(l.c,{children:p.o$.map((e=>(0,C.jsx)(o.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:e.headname},e.id)))})}),(0,C.jsx)(R.c,{children:null===d||void 0===d?void 0:d.map(((e,t)=>(0,C.jsx)(_,{data:e,UserTypeId:M.value,loadingOff:s,loadingOn:i},t)))})]})}),(0,C.jsx)("br",{}),(0,C.jsx)("h6",{style:{marginBottom:"0.5em",borderBottom:"2px solid blue",width:"fit-content"},children:"Sub-Routings Access Control"}),(0,C.jsx)(g.c,{component:x.c,sx:{maxHeight:650},title:"Sub-Routings Access Control",children:(0,C.jsxs)(u.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,C.jsx)(j.c,{children:(0,C.jsx)(l.c,{children:p.o$.map((e=>(0,C.jsx)(o.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"===e.headname?"Sub Menu":e.headname},e.id)))})}),(0,C.jsx)(R.c,{children:r.map(((e,t)=>(0,C.jsx)(I,{data:e,UserTypeId:M.value,loadingOff:s,loadingOn:i},t)))})]})})]})}}}]);
//# sourceMappingURL=8272.dbbd309d.chunk.js.map
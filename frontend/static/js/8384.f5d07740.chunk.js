"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8384],{13724:(e,l,i)=>{i.d(l,{c:()=>x});var a=i(69060),r=i(27454),t=i(700),s=i(5548),d=i(99904),n=i(85624),o=i(33856),c=i(58612),u=i(53248),_=i(29504),m=i(5930),v=i(39308),g=i(41459),b=i(46864),y=i(82496);const p=e=>{let{dataArray:l=[],columns:i=[],onClickFun:p=null,isExpendable:x=!1,expandableComp:F=null,tableMaxHeight:h=550,initialPageCount:N=20,EnableSerialNumber:A=!1,CellSize:f="small",disablePagination:j=!1}=e;const[D,M]=(0,a.useState)(0),[V,C]=(0,a.useState)(N),[S,B]=(0,a.useState)([]),L=[{type:"left",class:""},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],w=(e=>{if(!S.length)return e;return[...e].sort(((e,l)=>{for(const i of S){const{columnId:a,direction:r}=i,t=e[a],s=l[a];if(t!==s)return"asc"===r?t>s?1:-1:t<s?1:-1}return 0}))})(l),k=D*V,O=k+V,P=w.slice(k,O),Q=(e,l)=>{switch(l){case"number":return(0,v.SA)(e);case"date":return(0,v.uy)(e);case"time":return(0,v.AX)(e);case"string":return e;default:return""}},T=e=>{let{row:l,index:d}=e;const[n,o]=(0,a.useState)(!1),c="20px";return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsxs)(r.c,{children:[!0===x&&F&&(0,y.jsx)(t.c,{className:"fa-13 border-end text-center",children:(0,y.jsx)(s.c,{size:"small",onClick:()=>o((e=>!e)),children:n?(0,y.jsx)(g.c,{sx:{fontSize:c}}):(0,y.jsx)(b.c,{sx:{fontSize:c}})})}),!0===A&&(0,y.jsx)(t.c,{className:"fa-13 border-end text-center",children:V*D+d+1}),null===i||void 0===i?void 0:i.map(((e,i)=>{var a;return((0,v.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,v.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(!1!==Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell?(0,y.jsx)(t.c,{className:"fa-13 border-end "+(e.align?null===(a=L.find((l=>l.type===String(e.align).toLowerCase())))||void 0===a?void 0:a.class:""),children:e.Cell({row:l,Field_Name:e.Field_Name})},i):Object.entries(l).map((a=>{var r;let[s,d]=a;return e.Field_Name===s&&((0,v.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,v.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,y.jsx)(t.c,{className:"fa-13 border-end "+(e.align?null===(r=L.find((l=>l.type===String(e.align).toLowerCase())))||void 0===r?void 0:r.class:""),onClick:()=>p?p(l):console.log("Function not supplied"),children:Q(d,null===e||void 0===e?void 0:e.Fied_Data)},i)})))}))]}),!0===x&&F&&n&&(0,y.jsx)(r.c,{children:(0,y.jsx)(t.c,{colSpan:Number(null===i||void 0===i?void 0:i.length)+(!0===A?2:1),children:F({row:l,index:d})})})]})};return(0,y.jsxs)("div",{children:[(0,y.jsx)(d.c,{component:n.c,sx:{maxHeight:h},children:(0,y.jsxs)(o.c,{stickyHeader:!0,size:f,children:[(0,y.jsx)(c.c,{children:(0,y.jsxs)(r.c,{children:[!0===x&&F&&(0,y.jsx)(t.c,{className:"fa-13 fw-bold border-end border-top text-center",style:{backgroundColor:"#EDF0F7"},children:"#"}),!0===A&&(0,y.jsx)(t.c,{className:"fa-13 fw-bold border-end border-top text-center",style:{backgroundColor:"#EDF0F7"},children:"SNo"}),i.map(((e,l)=>{var i,a,r,s;return((0,v.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,v.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(!1!==Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell?(0,y.jsx)(t.c,{className:"fa-13 fw-bold border-end border-top "+(e.align?null===(r=L.find((l=>l.type===String(e.align).toLowerCase())))||void 0===r?void 0:r.class:""),style:{backgroundColor:"#EDF0F7"},children:e.ColumnHeader?e.ColumnHeader:null===e||void 0===e||null===(s=e.Field_Name)||void 0===s?void 0:s.replace(/_/g," ")},l):(0,y.jsx)(t.c,{className:"fa-13 fw-bold border-end border-top "+(e.align?null===(i=L.find((l=>l.type===String(e.align).toLowerCase())))||void 0===i?void 0:i.class:""),style:{backgroundColor:"#EDF0F7"},sortDirection:!!S.some((l=>l.columnId===e.Field_Name))&&S.find((l=>l.columnId===e.Field_Name)).direction,children:(0,y.jsx)(u.c,{active:S.some((l=>l.columnId===e.Field_Name)),direction:S.some((l=>l.columnId===e.Field_Name))?S.find((l=>l.columnId===e.Field_Name)).direction:"asc",onClick:()=>(e=>{const l=S.find((l=>l.columnId===e));if(l){const i="asc"===l.direction;B(S.map((l=>l.columnId===e?{...l,direction:i?"desc":"asc"}:l)))}else B([...S,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader?e.ColumnHeader:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")})},l))}))]})}),(0,y.jsxs)(_.c,{children:[(j?l:P).map(((e,l)=>(0,y.jsx)(T,{row:e,index:l},l))),0===l.length&&(0,y.jsx)(r.c,{children:(0,y.jsx)(t.c,{colSpan:i.length+(!0===x&&F?1:0)+(!0===A?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!j&&0!==P.length&&(0,y.jsx)("div",{className:"p-2 pb-0",children:(0,y.jsx)(m.c,{component:"div",count:l.length,page:D,onPageChange:(e,l)=>{M(l)},rowsPerPage:V,onRowsPerPageChange:e=>{C(parseInt(e.target.value,10)),M(0)},rowsPerPageOptions:Array.from(new Set([N,5,20,50,100,200,500])).sort(((e,l)=>e-l)),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};p.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1};const x=p},48384:(e,l,i)=>{i.r(l),i.d(l,{default:()=>T});var a=i(69060),r=i(43692),t=i(84436),s=i(3358),d=i(5548),n=i(39308),o=i(13724),c=i(71448),u=i(52924),_=i(44380),m=i(89e3),v=i(82656),g=i(4488),b=i(90048),y=i(26773),p=i(85624),x=i(78092),F=i(68424),h=i(39504),N=i(49608),A=i(12120),f=i(74912),j=i(97332),D=i(35832),M=i(82496);const V=(0,j.g0)({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),C=(0,M.jsx)(F.c,{fontSize:"small"}),S=(0,M.jsx)(h.c,{fontSize:"small"}),B=[{Field_Name:"Ledger_Name",Fied_Data:"string",isVisible:1,isDefault:1,OrderBy:1},{Field_Name:"Billed_Qty",Fied_Data:"number",isVisible:1,isDefault:0,OrderBy:2},{Field_Name:"M2_Avg",Fied_Data:"number",isVisible:1,isDefault:0,OrderBy:3},{Field_Name:"M3_Avg",Fied_Data:"number",isVisible:1,isDefault:0,OrderBy:4},{Field_Name:"M6_Avg",Fied_Data:"number",isVisible:1,isDefault:0,OrderBy:5},{Field_Name:"M9_Avg",Fied_Data:"number",isVisible:0,isDefault:0,OrderBy:6},{Field_Name:"M12_Avg",Fied_Data:"number",isVisible:1,isDefault:0,OrderBy:7},{Field_Name:"Q_Pay_Days",Fied_Data:"number",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Freq_Days",Fied_Data:"number",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Ledger_Alias",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Actual_Party_Name_with_Brokers",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Name",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Location",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Nature",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Group",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Ref_Brokers",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Ref_Owners",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Mobile_1",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Mobile_2",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_District",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"File_No",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null}],L=e=>{let{dataArray:l,filterDialog:i,closeDialog:t}=e;const[F,h]=(0,a.useState)({}),[L,w]=(0,a.useState)([]),[k,O]=(0,a.useState)(L),[P,Q]=(0,a.useState)(!1),[T,G]=(0,a.useState)(B),E=[...T].filter((e=>(0,n.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,n.Qr)(null===e||void 0===e?void 0:e.isVisible,1))).map((e=>e.Field_Name));(0,a.useEffect)((()=>{I()}),[F]);const R=(e,l)=>{h((i=>({...i,[e]:l})))},I=()=>{let e=[...l];for(const l of T)if(F[l.Field_Name])if("range"===F[l.Field_Name].type){const{min:i,max:a}=F[l.Field_Name];e=e.filter((e=>{const r=e[l.Field_Name];return(void 0===i||r>=i)&&(void 0===a||r<=a)}))}else if("date"===F[l.Field_Name].type){const{start:i,end:a}=F[l.Field_Name].value;e=e.filter((e=>{const r=new Date(e[l.Field_Name]);return(void 0===i||r>=new Date(i))&&(void 0===a||r<=new Date(a))}))}else if(Array.isArray(F[l.Field_Name])){var i;e=(null===(i=F[l.Field_Name])||void 0===i?void 0:i.length)>0?e.filter((e=>{var i;return F[l.Field_Name].includes(null===(i=e[l.Field_Name])||void 0===i?void 0:i.toLowerCase().trim())})):e}O(e)},W=e=>{const{Field_Name:i,Fied_Data:a}=e;var r,t,s,d,n,o,m,v,g,b;if("number"===a)return(0,M.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,M.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(r=null===(t=F[i])||void 0===t?void 0:t.min)&&void 0!==r?r:"",onChange:e=>R(i,{type:"range",...F[i],min:e.target.value?parseFloat(e.target.value):void 0})}),(0,M.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(s=null===(d=F[i])||void 0===d?void 0:d.max)&&void 0!==s?s:"",onChange:e=>R(i,{type:"range",...F[i],max:e.target.value?parseFloat(e.target.value):void 0})})]});if("date"===a)return(0,M.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,M.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(n=null===(o=F[i])||void 0===o||null===(m=o.value)||void 0===m?void 0:m.start)&&void 0!==n?n:"",onChange:e=>{var l;return R(i,{type:"date",value:{...null===(l=F[i])||void 0===l?void 0:l.value,start:e.target.value||void 0}})}}),(0,M.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(v=null===(g=F[i])||void 0===g||null===(b=g.value)||void 0===b?void 0:b.end)&&void 0!==v?v:"",onChange:e=>{var l;return R(i,{type:"date",value:{...null===(l=F[i])||void 0===l?void 0:l.value,end:e.target.value||void 0}})}})]});if("string"===a){const e=[...new Set(l.map((e=>{var l,a;return null===(l=e[i])||void 0===l||null===(a=l.toLowerCase())||void 0===a?void 0:a.trim()})))];return(0,M.jsx)(c.c,{multiple:!0,id:"".concat(i,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:F[i]||[],onChange:(e,l)=>R(i,l),renderOption:(e,l,i)=>{let{selected:a}=i;return(0,M.jsxs)("li",{...e,children:[(0,M.jsx)(u.c,{icon:C,checkedIcon:S,style:{marginRight:8},checked:a}),l]})},isOptionEqualToValue:(e,l)=>e===l,renderInput:e=>(0,M.jsx)(_.c,{...e,label:i,placeholder:"Select ".concat(null===i||void 0===i?void 0:i.replace(/_/g," "))})})}};return(0,a.useEffect)((()=>{const e=Object.keys(F).length>0?k:l;w(e)}),[F,l,k]),(0,a.useEffect)((()=>{G((e=>e.sort(((e,l)=>null!==e&&void 0!==e&&e.OrderBy&&null!==l&&void 0!==l&&l.OrderBy?(null===e||void 0===e?void 0:e.OrderBy)-(null===l||void 0===l?void 0:l.OrderBy):(null===l||void 0===l?void 0:l.OrderBy)-(null===e||void 0===e?void 0:e.OrderBy)))))}),[T]),(0,M.jsxs)(a.Fragment,{children:[(0,M.jsx)(m.c,{variant:"outlined",className:"mb-2",onClick:()=>{const e=L.map((e=>Object.fromEntries(Object.entries(e).filter((e=>{let[l]=e;return"LedgerSales"!==l&&E.find((e=>e===l))}))))),l=(0,j.oF)(V)(e);(0,j.kj)(V)(l)},startIcon:(0,M.jsx)(N.c,{}),children:"Download Ledger Data"}),(0,M.jsxs)("div",{className:"row",children:[(0,M.jsx)("div",{className:"col-xxl-10 col-lg-9 col-md-8",children:(0,M.jsx)(o.c,{columns:[{Field_Name:"Excel_Export",Fied_Data:"string",isVisible:1,OrderBy:1,isCustomCell:!0,Cell:e=>{let{row:l}=e;const i=Object.fromEntries(Object.entries(l).filter((e=>{let[l]=e;return"LedgerSales"!==l&&E.find((e=>e===l))})));return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(d.c,{size:"small",onClick:()=>{((e,l)=>{const i=D.c$.book_new(),a=D.c$.json_to_sheet(e);D.c$.book_append_sheet(i,a,"Sheet1");const r=D.c$.json_to_sheet(l);D.c$.book_append_sheet(i,r,"Sheet2"),D.a8(i,"exported_data.xlsx")})([i],l.LedgerSales)},children:(0,M.jsx)(N.c,{})})})}},...T.map((e=>(0,n.Qr)(e.isVisible,1)&&e))],dataArray:L,isExpendable:!0,expandableComp:e=>{let{row:l}=e;return(0,M.jsx)(o.c,{initialPageCount:15,dataArray:Array.isArray(l.LedgerSales)?l.LedgerSales:[],columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_AVG_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_AVG_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_AVG_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_AVG_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"One_Year_AVG_Qty",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})}),(0,M.jsxs)("div",{className:"col-xxl-2 col-lg-3 col-md-4 d-none d-md-block",children:[(0,M.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,M.jsx)("span",{children:"Filters"}),(0,M.jsxs)("span",{children:[(0,M.jsx)(s.c,{title:"Column Visiblity",children:(0,M.jsx)(d.c,{size:"small",onClick:()=>Q(!0),children:(0,M.jsx)(A.c,{})})}),(0,M.jsx)(s.c,{title:"Clear Filters",children:(0,M.jsx)(d.c,{size:"small",onClick:()=>h({}),children:(0,M.jsx)(f.c,{})})})]})]}),(0,M.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"58vh",overflow:"auto"},children:[T.map(((e,l)=>{var i;return(0,n.Qr)(e.isVisible,1)&&(0,M.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,M.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(i=e.Field_Name)||void 0===i?void 0:i.replace(/_/g," ")}),W(e)]},l)})),(0,M.jsx)("br",{})]})]})]}),(0,M.jsxs)(v.c,{open:i,onClose:t,maxWidth:"sm",fullWidth:!0,children:[(0,M.jsxs)(g.c,{children:[(0,M.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,M.jsx)("span",{children:"Filters"}),(0,M.jsxs)("span",{children:[(0,M.jsx)(s.c,{title:"Column Visiblity",children:(0,M.jsx)(d.c,{size:"small",onClick:()=>Q(!0),children:(0,M.jsx)(A.c,{})})}),(0,M.jsx)(s.c,{title:"Clear Filters",children:(0,M.jsx)(d.c,{size:"small",onClick:()=>h({}),children:(0,M.jsx)(f.c,{})})})]})]}),(0,M.jsxs)("div",{className:"border rounded-3 ",children:[T.map(((e,l)=>{var i;return(0,n.Qr)(e.isVisible,1)&&(0,M.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,M.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(i=e.Field_Name)||void 0===i?void 0:i.replace(/_/g," ")}),W(e)]},l)})),(0,M.jsx)("br",{})]})]}),(0,M.jsx)(b.c,{children:(0,M.jsx)(m.c,{onClick:t,color:"error",children:"close"})})]}),(0,M.jsxs)(v.c,{open:P,onClose:()=>Q(!1),maxWidth:"lg",fullWidth:!0,children:[(0,M.jsx)(y.c,{children:"Column Settings"}),(0,M.jsx)(g.c,{children:(0,M.jsx)("div",{className:"row",children:T.map(((e,l)=>(0,M.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,M.jsxs)(r.c,{component:p.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(l%2!==0?"bg-light":""),children:[(0,M.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,M.jsx)(x.c,{checked:Boolean(null===e||void 0===e?void 0:e.isDefault)||Boolean(null===e||void 0===e?void 0:e.isVisible),disabled:Boolean(null===e||void 0===e?void 0:e.isDefault),onChange:l=>G((i=>i.map((i=>i.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?{...i,isVisible:l.target.checked?1:0}:i))))}),(0,M.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Field_Name})]}),(0,M.jsx)("input",{type:"number",value:(0,n.Q$)(null===e||void 0===e?void 0:e.OrderBy)?null===e||void 0===e?void 0:e.OrderBy:"",onChange:l=>G((i=>i.map((i=>i.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?{...i,OrderBy:l.target.value}:i)))),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},l)))})}),(0,M.jsxs)(b.c,{children:[(0,M.jsx)(m.c,{onClick:()=>G(B),variant:"outlined",children:"Reset"}),(0,M.jsx)(m.c,{onClick:()=>Q(!1),color:"error",children:"close"})]})]})]})},w=e=>{let{dataArray:l}=e;const[i,r]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e=(Array.isArray(l)?[...l]:[]).map((e=>{var l,i,a,r,t;return{...e,M2_Avg:null!==(l=e.ALL_Avg_M2)&&void 0!==l?l:0,M3_Avg:null!==(i=e.ALL_Avg_M3)&&void 0!==i?i:0,M6_Avg:null!==(a=e.ALL_Avg_M6)&&void 0!==a?a:0,M9_Avg:null!==(r=e.ALL_Avg_M9)&&void 0!==r?r:0,M12_Avg:null!==(t=e.ALL_Avg_One_Year)&&void 0!==t?t:0,Billed_Qty:(0,n.SW)(e.StockTransaction,"bill_qty"),StockTransaction:e.StockTransaction.map((e=>{var l,i,a,r,t;return{...e,M2_Avg:null!==(l=e.M2_AVG_Qty)&&void 0!==l?l:0,M3_Avg:null!==(i=e.M3_AVG_Qty)&&void 0!==i?i:0,M6_Avg:null!==(a=e.M6_AVG_Qty)&&void 0!==a?a:0,M9_Avg:null!==(r=e.M9_AVG_Qty)&&void 0!==r?r:0,M12_Avg:null!==(t=e.One_Year_AVG_Qty)&&void 0!==t?t:0}}))}})).map((e=>({...e,Billed_Qty:(0,n.SW)(e.StockTransaction,"bill_qty")})));r(e)}),[l]),(0,M.jsx)(a.Fragment,{children:(0,M.jsx)(o.c,{dataArray:i,isExpendable:!0,columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"Billed_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}],expandableComp:e=>{let{row:l}=e;return(0,M.jsx)(o.c,{initialPageCount:10,dataArray:Array.isArray(l.StockTransaction)?l.StockTransaction:[],columns:[{Field_Name:"Item_Name_Modified",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})})},k=e=>{let{dataArray:l,days:i}=e;const[r,t]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e=(Array.isArray(l)?[...l]:[]).map((e=>{var l,a,r,t,s;return{...e,M2_Avg:null!==(l=(0,n.yy)(e.ALL_Avg_M2,(0,n.W8)(2)/2))&&void 0!==l?l:0,M3_Avg:null!==(a=(0,n.yy)(e.ALL_Avg_M3,(0,n.W8)(3)/3))&&void 0!==a?a:0,M6_Avg:null!==(r=(0,n.yy)(e.ALL_Avg_M6,(0,n.W8)(6)/6))&&void 0!==r?r:0,M9_Avg:null!==(t=(0,n.yy)(e.ALL_Avg_M9,(0,n.W8)(9)/9))&&void 0!==t?t:0,M12_Avg:null!==(s=(0,n.yy)(e.ALL_Avg_One_Year,(0,n.W8)(12)/12))&&void 0!==s?s:0,Billed_Qty:(0,n.SW)(e.StockTransaction,"bill_qty"),Billed_Avg:(0,n.SW)(e.StockTransaction,"bill_qty")/i,StockTransaction:e.StockTransaction.map((e=>{var l,i,a,r,t;return{...e,Grade_Item_Group:e.Item_Name_Modified,M2_Avg:null!==(l=(0,n.yy)(e.M2_AVG_Qty,(0,n.W8)(2)/2))&&void 0!==l?l:0,M3_Avg:null!==(i=(0,n.yy)(e.M3_AVG_Qty,(0,n.W8)(3)/3))&&void 0!==i?i:0,M6_Avg:null!==(a=(0,n.yy)(e.M6_AVG_Qty,(0,n.W8)(6)/6))&&void 0!==a?a:0,M9_Avg:null!==(r=(0,n.yy)(e.M9_AVG_Qty,(0,n.W8)(9)/9))&&void 0!==r?r:0,M12_Avg:null!==(t=(0,n.yy)(e.One_Year_AVG_Qty,(0,n.W8)(12)/12))&&void 0!==t?t:0}}))}})).map((e=>({...e,Billed_Qty:(0,n.SW)(e.StockTransaction,"bill_qty")})));t(e)}),[l]),(0,M.jsx)(a.Fragment,{children:(0,M.jsx)(o.c,{dataArray:r,isExpendable:!0,columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"Billed_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"Billed_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}],expandableComp:e=>{let{row:l}=e;return(0,M.jsx)(o.c,{initialPageCount:10,dataArray:Array.isArray(l.StockTransaction)?l.StockTransaction:[],columns:[{Field_Name:"Grade_Item_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})})};var O=i(31664),P=i(61988),Q=i(1908);const T=()=>{const e=JSON.parse(localStorage.getItem("user")),[l,i]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[u,_]=(0,a.useState)({Fromdate:(0,n.SO)(1),Todate:(0,n.Q7)(),ReportType:"LedgerBased",filterDialog:!1,reload:!0});(0,a.useEffect)((()=>{i(null),c(null),(0,Q.q)({address:"reports/salesReport/ledger?Fromdate=".concat(null===u||void 0===u?void 0:u.Fromdate,"&Todate=").concat(null===u||void 0===u?void 0:u.Todate),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{let{success:l,data:a,others:r}=e;if(l){const{ledgerDetails:e}=r,l=a.map((l=>{const i=e.filter((e=>(0,n.Qr)(l.Ledger_Tally_Id,e.Ledger_Id))),a=(0,n.SW)(i,"bill_qty");return{...l,LedgerSales:i,Transaction:i.length,Billed_Qty:a,BilledQtyAvg:(0,n.We)(i,"bill_qty"),Ledger_Name:l.Ledger_Name,M2_Avg:l.ALL_Avg_M2,M3_Avg:l.ALL_Avg_M3,M6_Avg:l.ALL_Avg_M6,M9_Avg:l.ALL_Avg_M9,M12_Avg:l.ALL_Avg_One_Year,Q_Pay_Days:l.Q_Pay_Days,Freq_Days:l.Freq_Days,Ledger_Alias:l.Ledger_Alias,Actual_Party_Name_with_Brokers:l.Actual_Party_Name_with_Brokers,Party_Name:l.Party_Name,Party_Location:l.Party_Location,Party_Nature:l.Party_Nature,Party_Group:l.Party_Group,Ref_Brokers:l.Ref_Brokers,Ref_Owners:l.Ref_Owners,Party_Mobile_1:l.Party_Mobile_1,Party_Mobile_2:l.Party_Mobile_2,Party_District:l.Party_District,File_No:l.File_No,Ledger_Tally_Id:l.Ledger_Tally_Id}}));i(l)}else i([])})).catch(console.error),(0,Q.q)({address:"reports/salesReport/products?Fromdate=".concat(null===u||void 0===u?void 0:u.Fromdate,"&Todate=").concat(null===u||void 0===u?void 0:u.Todate),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{if(e.success){var l;const i=Array.isArray(null===e||void 0===e||null===(l=e.others)||void 0===l?void 0:l.LOSAbstract)?e.others.LOSAbstract.map((l=>({...l,StockTransaction:Array.isArray(e.data)?[...e.data].filter((e=>e.Stock_Group===l.Stock_Group)):[]}))):[];c(i)}else c([])})).catch((e=>console.error(e)))}),[u.reload]);const m=()=>{_((e=>({...e,filterDialog:!1})))},v=(0,n.Oe)(new Date(u.Fromdate),new Date(u.Todate));return(0,M.jsx)(a.Fragment,{children:(0,M.jsxs)(r.c,{className:"mt-3",children:[(0,M.jsxs)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center fw-bold text-dark",style:{backgroundColor:"#eae0cc"},children:[(0,M.jsx)("span",{children:null===e||void 0===e?void 0:e.Company_Name}),(0,M.jsx)("span",{children:(0,M.jsxs)("select",{value:u.ReportType,className:"cus-inpt ps-3 w-100 rounded-5 border-0",onChange:e=>_((l=>({...l,ReportType:e.target.value}))),children:[(0,M.jsx)("option",{value:"LedgerBased",children:"Ledger Based"}),(0,M.jsx)("option",{value:"ProductBased",children:"Product Based"}),(0,M.jsx)("option",{value:"ProductDayAverage",children:"Product/Day Based"})]})})]}),(0,M.jsxs)(t.c,{children:[(0,M.jsxs)("div",{className:"mb-3",children:[(0,M.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5 me-1",value:u.Fromdate,onChange:e=>_((l=>({...l,Fromdate:e.target.value})))}),(0,M.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5",value:u.Todate,onChange:e=>_((l=>({...l,Todate:e.target.value})))}),(0,M.jsx)(s.c,{title:"Reload Data",children:(0,M.jsx)(d.c,{onClick:()=>_((e=>({...e,reload:!e.reload}))),size:"small",className:"ms-2",children:(0,M.jsx)(O.c,{})})}),(0,M.jsx)(s.c,{title:"Filters",children:(0,M.jsx)(d.c,{onClick:()=>_((e=>({...e,filterDialog:!0}))),size:"small",className:"d-md-none d-inline",children:(0,M.jsx)(P.c,{})})})]}),null===l&&"LedgerBased"===u.ReportType&&(0,M.jsx)("h6",{className:"blue-text text-center",children:"Fetching Ledger Based data..."}),null===o&&("ProductBased"===u.ReportType||"ProductDayAverage"===u.ReportType)&&(0,M.jsx)("h6",{className:"blue-text text-center",children:"Fetching Product Based data..."}),"LedgerBased"===u.ReportType&&Array.isArray(l)&&(0,M.jsx)(L,{filterDialog:u.filterDialog,closeDialog:m,dataArray:l}),"ProductBased"===u.ReportType&&Array.isArray(o)&&(0,M.jsx)(w,{filterDialog:u.filterDialog,closeDialog:m,dataArray:o}),"ProductDayAverage"===u.ReportType&&Array.isArray(o)&&(0,M.jsx)(k,{filterDialog:u.filterDialog,closeDialog:m,dataArray:o,days:v})]})]})})}}}]);
//# sourceMappingURL=8384.f5d07740.chunk.js.map
"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[6516],{13724:(e,l,a)=>{a.d(l,{c:()=>h});var i=a(69060),t=a(27454),s=a(700),n=a(5548),r=a(99904),d=a(85624),o=a(33856),c=a(58612),u=a(53248),m=a(29504),v=a(5930),_=a(39308),p=a(41459),g=a(46864),x=a(82496);const b=e=>{let{dataArray:l=[],columns:a=[],onClickFun:b=null,isExpendable:h=!1,expandableComp:y=null,tableMaxHeight:j=550,initialPageCount:F=20,EnableSerialNumber:A=!1,CellSize:f="small",disablePagination:N=!1,title:C=""}=e;const[S,D]=(0,i.useState)(0),[M,w]=(0,i.useState)(F),[k,V]=(0,i.useState)([]),T=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],L=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],I=(e=>{if(!k.length)return e;return[...e].sort(((e,l)=>{for(const a of k){const{columnId:i,direction:t}=a,s=e[i],n=l[i];if(s!==n)return"asc"===t?s>n?1:-1:s<n?1:-1}return 0}))})(l),B=S*M,P=B+M,O=I.slice(B,P),Q=(e,l)=>{switch(l){case"number":return(0,_.SA)(e);case"date":return(0,_.uy)(e);case"time":return(0,_.AX)(e);case"string":return e;default:return""}},E=e=>{let{row:l,index:r}=e;const[d,o]=(0,i.useState)(!1),c="20px";return(0,x.jsxs)(i.Fragment,{children:[(0,x.jsxs)(t.c,{children:[!0===h&&y&&(0,x.jsx)(s.c,{className:"fa-13 border-end text-center vtop",children:(0,x.jsx)(n.c,{size:"small",onClick:()=>o((e=>!e)),children:d?(0,x.jsx)(p.c,{sx:{fontSize:c}}):(0,x.jsx)(g.c,{sx:{fontSize:c}})})}),!0===A&&(0,x.jsx)(s.c,{className:"fa-13 border-end text-center vtop",children:M*S+r+1}),null===a||void 0===a?void 0:a.map(((e,a)=>{var i,t;return((0,_.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,_.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(!1!==Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell?(0,x.jsx)(s.c,{className:"fa-13 border-end "+(e.align?null===(i=T.find((l=>l.type===String(e.align).toLowerCase())))||void 0===i?void 0:i.class:"")+(e.verticalAlign?null===(t=L.find((l=>l.type===String(e.verticalAlign).toLowerCase())))||void 0===t?void 0:t.class:" vctr "),children:e.Cell({row:l,Field_Name:e.Field_Name})},a):Object.entries(l).map((i=>{var t,n;let[r,d]=i;return e.Field_Name===r&&((0,_.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,_.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,x.jsx)(s.c,{className:"fa-13 border-end "+(e.align?null===(t=T.find((l=>l.type===String(e.align).toLowerCase())))||void 0===t?void 0:t.class:"")+(e.verticalAlign?null===(n=L.find((l=>l.type===String(e.verticalAlign).toLowerCase())))||void 0===n?void 0:n.class:" vctr "),onClick:()=>b?b(l):console.log("Function not supplied"),children:Q(d,null===e||void 0===e?void 0:e.Fied_Data)},a)})))}))]}),!0===h&&y&&d&&(0,x.jsx)(t.c,{children:(0,x.jsx)(s.c,{colSpan:Number(null===a||void 0===a?void 0:a.length)+(!0===A?2:1),children:y({row:l,index:r})})})]})};return(0,x.jsxs)("div",{children:[C&&(0,x.jsx)("h6",{className:"fw-bold text-muted",children:C}),(0,x.jsx)(r.c,{component:d.c,sx:{maxHeight:j},children:(0,x.jsxs)(o.c,{stickyHeader:!0,size:f,children:[(0,x.jsx)(c.c,{children:(0,x.jsxs)(t.c,{children:[h&&y&&(0,x.jsx)(s.c,{className:"fa-13 fw-bold border-end border-top text-center",style:{backgroundColor:"#EDF0F7"},children:"#"}),A&&(0,x.jsx)(s.c,{className:"fa-13 fw-bold border-end border-top text-center",style:{backgroundColor:"#EDF0F7"},children:"SNo"}),a.map(((e,l)=>{const a=(0,_.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,_.Qr)(null===e||void 0===e?void 0:e.isVisible,1),i=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,t=k.find((l=>l.columnId===e.Field_Name)),n=t?t.direction:"asc";var r,d,o,c;return a?i?(0,x.jsx)(s.c,{className:"fa-13 fw-bold border-end border-top "+(e.align?null===(r=T.find((l=>l.type===String(e.align).toLowerCase())))||void 0===r?void 0:r.class:""),style:{backgroundColor:"#EDF0F7"},sortDirection:!!t&&n,children:(0,x.jsx)(u.c,{active:!!t,direction:n,onClick:()=>(e=>{const l=k.find((l=>l.columnId===e));if(l){const a="asc"===l.direction;V(k.map((l=>l.columnId===e?{...l,direction:a?"desc":"asc"}:l)))}else V([...k,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(d=e.Field_Name)||void 0===d?void 0:d.replace(/_/g," "))})},l):(0,x.jsx)(s.c,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fa-13 fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(o=T.find((l=>l.type===String(e.align).toLowerCase())))||void 0===o?void 0:o.class:""),style:{backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},l):null}))]})}),(0,x.jsxs)(m.c,{children:[(N?I:O).map(((e,l)=>(0,x.jsx)(E,{row:e,index:l},l))),0===l.length&&(0,x.jsx)(t.c,{children:(0,x.jsx)(s.c,{colSpan:a.length+(!0===h&&y?1:0)+(!0===A?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!N&&0!==O.length&&(0,x.jsx)("div",{className:"p-2 pb-0",children:(0,x.jsx)(v.c,{component:"div",count:l.length,page:S,onPageChange:(e,l)=>{D(l)},rowsPerPage:M,onRowsPerPageChange:e=>{w(parseInt(e.target.value,10)),D(0)},rowsPerPageOptions:Array.from(new Set([F,5,20,50,100,200,500])).sort(((e,l)=>e-l)),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};b.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0};const h=b},6516:(e,l,a)=>{a.r(l),a.d(l,{default:()=>O});var i=a(69060),t=a(43692),s=a(84436),n=a(3358),r=a(5548),d=a(39308),o=a(71448),c=a(52924),u=a(44380),m=a(12572),v=a(89e3),_=a(82656),p=a(26773),g=a(4488),x=a(90048),b=a(85624),h=a(78092),y=a(68424),j=a(39504),F=a(37508),A=a(61988),f=a(12120),N=a(74912),C=a(97332),S=a(13724),D=a(82496);const M=(0,C.g0)({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),w=(0,D.jsx)(y.c,{fontSize:"small"}),k=(0,D.jsx)(j.c,{fontSize:"small"}),V=e=>{let{dataArray:l=[],columns:a=[],ExpandableComp:s,enableFilters:y=!1}=e;const[j,V]=(0,i.useState)([]),[T,L]=(0,i.useState)({}),[I,B]=(0,i.useState)(l),P=Object.keys(T).length>0?I:l,[O,Q]=(0,i.useState)({filters:!1,columnSettings:!1});(0,i.useEffect)((()=>{const e=a.map(((e,l)=>({Field_Name:null===e||void 0===e?void 0:e.Column_Name,Fied_Data:null===e||void 0===e?void 0:e.Data_Type,isVisible:l<=7?1:0,align:"center",OrderBy:l+1})));V(e)}),[a]);const E=(0,i.useMemo)((()=>[...j].sort(((e,l)=>e.OrderBy-l.OrderBy))),[j]);(0,i.useEffect)((()=>{G()}),[T]);const W=(e,l)=>{L((a=>({...a,[e]:l})))},G=()=>{let e=[...l];for(const l of j)if(T[l.Field_Name])if("range"===T[l.Field_Name].type){const{min:a,max:i}=T[l.Field_Name];e=e.filter((e=>{const t=e[l.Field_Name];return(void 0===a||t>=a)&&(void 0===i||t<=i)}))}else if("date"===T[l.Field_Name].type){const{start:a,end:i}=T[l.Field_Name].value;e=e.filter((e=>{const t=new Date(e[l.Field_Name]);return(void 0===a||t>=new Date(a))&&(void 0===i||t<=new Date(i))}))}else if(Array.isArray(T[l.Field_Name])){var a;e=(null===(a=T[l.Field_Name])||void 0===a?void 0:a.length)>0?e.filter((e=>T[l.Field_Name].includes(e[l.Field_Name].toLowerCase().trim()))):e}B(e)},R=e=>{const{Field_Name:l,Fied_Data:a}=e;var i,t,s,n,r,d,m,v,_,p;if("number"===a)return(0,D.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,D.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(i=null===(t=T[l])||void 0===t?void 0:t.min)&&void 0!==i?i:"",onChange:e=>W(l,{type:"range",...T[l],min:e.target.value?parseFloat(e.target.value):void 0})}),(0,D.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(s=null===(n=T[l])||void 0===n?void 0:n.max)&&void 0!==s?s:"",onChange:e=>W(l,{type:"range",...T[l],max:e.target.value?parseFloat(e.target.value):void 0})})]});if("date"===a)return(0,D.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,D.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(r=null===(d=T[l])||void 0===d||null===(m=d.value)||void 0===m?void 0:m.start)&&void 0!==r?r:"",onChange:e=>{var a;return W(l,{type:"date",value:{...null===(a=T[l])||void 0===a?void 0:a.value,start:e.target.value||void 0}})}}),(0,D.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(v=null===(_=T[l])||void 0===_||null===(p=_.value)||void 0===p?void 0:p.end)&&void 0!==v?v:"",onChange:e=>{var a;return W(l,{type:"date",value:{...null===(a=T[l])||void 0===a?void 0:a.value,end:e.target.value||void 0}})}})]});if("string"===a){const e=[...new Set(P.map((e=>{var a,i;return null===(a=e[l])||void 0===a||null===(i=a.toLowerCase())||void 0===i?void 0:i.trim()})))];return(0,D.jsx)(o.c,{multiple:!0,id:"".concat(l,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:T[l]||[],onChange:(e,a)=>W(l,a),renderOption:(e,l,a)=>{let{selected:i}=a;return(0,D.jsxs)("li",{...e,children:[(0,D.jsx)(c.c,{icon:w,checkedIcon:k,style:{marginRight:8},checked:i}),l]})},isOptionEqualToValue:(e,l)=>e===l,renderInput:e=>(0,D.jsx)(u.c,{...e,label:l,placeholder:"Select ".concat(null===l||void 0===l?void 0:l.replace(/_/g," "))})})}};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(m.c,{sx:{display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap"},children:[(0,D.jsx)(v.c,{onClick:()=>{const e=(0,C.oF)(M)(l);(0,C.kj)(M)(e)},startIcon:(0,D.jsx)(F.c,{}),children:"All Data"}),(0,D.jsx)(v.c,{disabled:0===I.length,className:y?"":"d-none",onClick:()=>(e=>{const l=(0,C.oF)(M)(e);(0,C.kj)(M)(l)})(I),startIcon:(0,D.jsx)(F.c,{}),children:"Filtered Rows"}),(0,D.jsx)(v.c,{onClick:()=>Q((e=>({...e,filters:!0}))),className:y?"d-md-none d-inline":"d-none",startIcon:(0,D.jsx)(A.c,{}),children:"Filters"})]}),(0,D.jsxs)("div",{className:"row ",children:[(0,D.jsx)("div",{className:y?"col-xxl-10 col-lg-9 col-md-8":"",children:(0,D.jsx)("div",{className:"p-2",children:(0,D.jsx)(S.c,{dataArray:P,columns:E,isExpendable:!!s,expandableComp:s||void 0,tableMaxHeight:650})})}),y&&(0,D.jsxs)("div",{className:"col-xxl-2 col-lg-3 col-md-4 d-none d-md-block",children:[(0,D.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,D.jsx)("span",{children:"Filters"}),(0,D.jsxs)("span",{children:[(0,D.jsx)(n.c,{title:"Column Visiblity",children:(0,D.jsx)(r.c,{size:"small",onClick:()=>Q((e=>({...e,columnSettings:!0}))),children:(0,D.jsx)(f.c,{})})}),(0,D.jsx)(n.c,{title:"Clear Filters",children:(0,D.jsx)(r.c,{size:"small",onClick:()=>L({}),children:(0,D.jsx)(N.c,{})})})]})]}),(0,D.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[j.map(((e,l)=>{var a;return(0,D.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,D.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),R(e)]},l)})),(0,D.jsx)("br",{})]})]})]}),(0,D.jsxs)(_.c,{open:O.filters,onClose:()=>Q((e=>({...e,filters:!1}))),fullWidth:!0,maxWidth:"sm",children:[(0,D.jsx)(p.c,{children:(0,D.jsx)("span",{children:(0,D.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,D.jsx)("span",{children:"Filters"}),(0,D.jsxs)("span",{children:[(0,D.jsx)(n.c,{title:"Column Visiblity",children:(0,D.jsx)(r.c,{size:"small",onClick:()=>Q((e=>({...e,filters:!1}))),children:(0,D.jsx)(f.c,{})})}),(0,D.jsx)(n.c,{title:"Clear Filters",children:(0,D.jsx)(r.c,{size:"small",onClick:()=>L({}),children:(0,D.jsx)(N.c,{})})})]})]})})}),(0,D.jsx)(g.c,{children:(0,D.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[j.map(((e,l)=>{var a;return(0,D.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,D.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),R(e)]},l)})),(0,D.jsx)("br",{})]})}),(0,D.jsx)(x.c,{children:(0,D.jsx)(v.c,{onClick:()=>Q((e=>({...e,filters:!1}))),children:"Close"})})]}),(0,D.jsxs)(_.c,{open:O.columnSettings,onClose:()=>Q((e=>({...e,columnSettings:!1}))),maxWidth:"lg",fullWidth:!0,children:[(0,D.jsx)(p.c,{children:"Column Settings"}),(0,D.jsx)(g.c,{children:(0,D.jsx)("div",{className:"row",children:a.map(((e,l)=>{const a=j.find((l=>l.Field_Name===(null===e||void 0===e?void 0:e.Column_Name)));return(0,D.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,D.jsxs)(t.c,{component:b.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(l%2!==0?"bg-light":""),children:[(0,D.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,D.jsx)(h.c,{checked:Boolean(null===a||void 0===a?void 0:a.isVisible),onChange:l=>V((a=>a.map((a=>a.Field_Name===(null===e||void 0===e?void 0:e.Column_Name)?{...a,isVisible:l.target.checked?1:0}:a))))}),(0,D.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Column_Name})]}),(0,D.jsx)("input",{type:"number",value:(0,d.Q$)(null===a||void 0===a?void 0:a.OrderBy)?null===a||void 0===a?void 0:a.OrderBy:"",onChange:e=>V((l=>l.map((l=>l.Field_Name===(null===a||void 0===a?void 0:a.Field_Name)?{...l,OrderBy:e.target.value}:l)))),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},l)}))})}),(0,D.jsx)(x.c,{children:(0,D.jsx)(v.c,{onClick:()=>Q((e=>({...e,columnSettings:!1}))),color:"error",children:"close"})})]})]})},T=e=>{let{dataArray:l}=e;const[a,t]=(0,i.useState)([]);return(0,i.useEffect)((()=>{const e=(Array.isArray(l)?[...l]:[]).map((e=>{var l,a,i,t,s;return{...e,M2_Avg:null!==(l=e.ALL_Avg_M2)&&void 0!==l?l:0,M3_Avg:null!==(a=e.ALL_Avg_M3)&&void 0!==a?a:0,M6_Avg:null!==(i=e.ALL_Avg_M6)&&void 0!==i?i:0,M9_Avg:null!==(t=e.ALL_Avg_M9)&&void 0!==t?t:0,M12_Avg:null!==(s=e.ALL_Avg_One_Year)&&void 0!==s?s:0,Billed_Qty:(0,d.SW)(e.StockTransaction,"bill_qty"),StockTransaction:e.StockTransaction.map((e=>{var l,a,i,t,s;return{...e,M2_Avg:null!==(l=e.M2_AVG_Qty)&&void 0!==l?l:0,M3_Avg:null!==(a=e.M3_AVG_Qty)&&void 0!==a?a:0,M6_Avg:null!==(i=e.M6_AVG_Qty)&&void 0!==i?i:0,M9_Avg:null!==(t=e.M9_AVG_Qty)&&void 0!==t?t:0,M12_Avg:null!==(s=e.One_Year_AVG_Qty)&&void 0!==s?s:0}}))}})).map((e=>({...e,Billed_Qty:(0,d.SW)(e.StockTransaction,"bill_qty")})));t(e)}),[l]),(0,D.jsx)(i.Fragment,{children:(0,D.jsx)(S.c,{dataArray:a,isExpendable:!0,columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"Billed_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}],expandableComp:e=>{let{row:l}=e;return(0,D.jsx)(S.c,{initialPageCount:10,dataArray:Array.isArray(l.StockTransaction)?l.StockTransaction:[],columns:[{Field_Name:"Item_Name_Modified",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})})},L=e=>{let{dataArray:l,days:a}=e;const[t,s]=(0,i.useState)([]);return(0,i.useEffect)((()=>{const e=(Array.isArray(l)?[...l]:[]).map((e=>{var l,i,t,s,n;return{...e,M2_Avg:null!==(l=(0,d.yy)(e.ALL_Avg_M2,(0,d.W8)(2)/2))&&void 0!==l?l:0,M3_Avg:null!==(i=(0,d.yy)(e.ALL_Avg_M3,(0,d.W8)(3)/3))&&void 0!==i?i:0,M6_Avg:null!==(t=(0,d.yy)(e.ALL_Avg_M6,(0,d.W8)(6)/6))&&void 0!==t?t:0,M9_Avg:null!==(s=(0,d.yy)(e.ALL_Avg_M9,(0,d.W8)(9)/9))&&void 0!==s?s:0,M12_Avg:null!==(n=(0,d.yy)(e.ALL_Avg_One_Year,(0,d.W8)(12)/12))&&void 0!==n?n:0,Billed_Qty:(0,d.SW)(e.StockTransaction,"bill_qty"),Billed_Avg:(0,d.SW)(e.StockTransaction,"bill_qty")/a,StockTransaction:e.StockTransaction.map((e=>{var l,a,i,t,s;return{...e,Grade_Item_Group:e.Item_Name_Modified,M2_Avg:null!==(l=(0,d.yy)(e.M2_AVG_Qty,(0,d.W8)(2)/2))&&void 0!==l?l:0,M3_Avg:null!==(a=(0,d.yy)(e.M3_AVG_Qty,(0,d.W8)(3)/3))&&void 0!==a?a:0,M6_Avg:null!==(i=(0,d.yy)(e.M6_AVG_Qty,(0,d.W8)(6)/6))&&void 0!==i?i:0,M9_Avg:null!==(t=(0,d.yy)(e.M9_AVG_Qty,(0,d.W8)(9)/9))&&void 0!==t?t:0,M12_Avg:null!==(s=(0,d.yy)(e.One_Year_AVG_Qty,(0,d.W8)(12)/12))&&void 0!==s?s:0}}))}})).map((e=>({...e,Billed_Qty:(0,d.SW)(e.StockTransaction,"bill_qty")})));s(e)}),[l]),(0,D.jsx)(i.Fragment,{children:(0,D.jsx)(S.c,{dataArray:t,isExpendable:!0,columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"Billed_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"Billed_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}],expandableComp:e=>{let{row:l}=e;return(0,D.jsx)(S.c,{initialPageCount:10,dataArray:Array.isArray(l.StockTransaction)?l.StockTransaction:[],columns:[{Field_Name:"Grade_Item_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})})};var I=a(31664),B=a(1908);const P=e=>{let{row:l,Fromdate:a,Todate:t,DB:s}=e;const[n,r]=(0,i.useState)([]),[d,o]=(0,i.useState)([]);return(0,i.useEffect)((()=>{(0,B.q)({address:"reports/salesReport/ledger/itemDetails?Fromdate=".concat(a,"&Todate=").concat(t,"&Ledger_Id=").concat(null===l||void 0===l?void 0:l.Ledger_Tally_Id),headers:{Db:s}}).then((e=>{let{success:l,data:a,others:i}=e;if(l){const{dataTypeInfo:e}=i;r(a),o((l=>({...l,salesInfo:Array.isArray(e)?e:[]})))}else r([])})).catch(console.error)}),[null===l||void 0===l?void 0:l.Ledger_Tally_Id,a,t]),(0,D.jsx)(V,{dataArray:n,columns:d.salesInfo})},O=()=>{const e=JSON.parse(localStorage.getItem("user")),[l,a]=(0,i.useState)(null),[o,c]=(0,i.useState)({salesInfo:[],salesItemInfo:[]}),[u,m]=(0,i.useState)(null),[v,_]=(0,i.useState)({Fromdate:(0,d.SO)(1),Todate:(0,d.Q7)(),ReportType:"LedgerBased",filterDialog:!1,reload:!0});(0,i.useEffect)((()=>{a(null),m(null),c({salesInfo:[],salesItemInfo:[]}),(0,B.q)({address:"reports/salesReport/ledger?Fromdate=".concat(null===v||void 0===v?void 0:v.Fromdate,"&Todate=").concat(null===v||void 0===v?void 0:v.Todate),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{let{success:l,data:i,others:t}=e;if(l){const{dataTypeInfo:e}=t;a(i),c((l=>({...l,salesInfo:Array.isArray(e)?e:[]})))}else a([])})).catch(console.error),(0,B.q)({address:"reports/salesReport/products?Fromdate=".concat(null===v||void 0===v?void 0:v.Fromdate,"&Todate=").concat(null===v||void 0===v?void 0:v.Todate),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{if(e.success){var l;const{dataTypeInfo:a}=null===e||void 0===e?void 0:e.others,i=Array.isArray(null===e||void 0===e||null===(l=e.others)||void 0===l?void 0:l.LOSAbstract)?e.others.LOSAbstract.map((l=>({...l,StockTransaction:Array.isArray(e.data)?[...e.data].filter((e=>e.Stock_Group===l.Stock_Group)):[]}))):[];c((e=>({...e,salesItemInfo:Array.isArray(a)?a:[]}))),m(i)}else m([])})).catch((e=>console.error(e)))}),[v.reload]);const p=()=>{_((e=>({...e,filterDialog:!1})))},g=(0,d.Oe)(new Date(v.Fromdate),new Date(v.Todate));return(0,D.jsx)(i.Fragment,{children:(0,D.jsxs)(t.c,{className:"mt-3",children:[(0,D.jsxs)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center fw-bold text-dark",style:{backgroundColor:"#eae0cc"},children:[(0,D.jsx)("span",{children:null===e||void 0===e?void 0:e.Company_Name}),(0,D.jsx)("span",{children:(0,D.jsxs)("select",{value:v.ReportType,className:"cus-inpt ps-3 w-100 rounded-5 border-0",onChange:e=>_((l=>({...l,ReportType:e.target.value}))),children:[(0,D.jsx)("option",{value:"LedgerBased",children:"Ledger Based"}),(0,D.jsx)("option",{value:"ProductBased",children:"Product Based"}),(0,D.jsx)("option",{value:"ProductDayAverage",children:"Product/Day Based"})]})})]}),(0,D.jsxs)(s.c,{children:[(0,D.jsxs)("div",{className:"mb-3",children:[(0,D.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5 me-1",value:v.Fromdate,onChange:e=>_((l=>({...l,Fromdate:e.target.value})))}),(0,D.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5",value:v.Todate,onChange:e=>_((l=>({...l,Todate:e.target.value})))}),(0,D.jsx)(n.c,{title:"Reload Data",children:(0,D.jsx)(r.c,{onClick:()=>_((e=>({...e,reload:!e.reload}))),size:"small",className:"ms-2",children:(0,D.jsx)(I.c,{})})}),(0,D.jsx)(n.c,{title:"Filters",children:(0,D.jsx)(r.c,{onClick:()=>_((e=>({...e,filterDialog:!0}))),size:"small",className:"d-md-none d-inline",children:(0,D.jsx)(A.c,{})})})]}),null===l&&"LedgerBased"===v.ReportType&&(0,D.jsx)("h6",{className:"blue-text text-center",children:"Fetching Ledger Based data..."}),null===u&&("ProductBased"===v.ReportType||"ProductDayAverage"===v.ReportType)&&(0,D.jsx)("h6",{className:"blue-text text-center",children:"Fetching Product Based data..."}),"LedgerBased"===v.ReportType&&Array.isArray(l)&&(0,D.jsx)(V,{dataArray:l,columns:o.salesInfo,ExpandableComp:l=>{let{row:a}=l;return(0,D.jsx)(P,{row:a,DB:null===e||void 0===e?void 0:e.Company_id,Fromdate:null===v||void 0===v?void 0:v.Fromdate,Todate:null===v||void 0===v?void 0:v.Todate})},enableFilters:!0}),"ProductBased"===v.ReportType&&Array.isArray(u)&&(0,D.jsx)(T,{filterDialog:v.filterDialog,closeDialog:p,dataArray:u}),"ProductDayAverage"===v.ReportType&&Array.isArray(u)&&(0,D.jsx)(L,{filterDialog:v.filterDialog,closeDialog:p,dataArray:u,days:g})]})]})})}}}]);
//# sourceMappingURL=6516.49441ff8.chunk.js.map
"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7480],{62344:(e,a,t)=>{t.d(a,{o$:()=>n,o5:()=>d,cF:()=>o,iI:()=>l});const s=t.p+"static/media/smt.aa4d4f940bbebff07a57.png",l={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},o={control:(e,a)=>({...e,height:"45px",background:"rgba(255, 255, 255, 0.322)"}),menu:(e,a)=>({...e,zIndex:9999})},n=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],d=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:s,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}]},2940:(e,a,t)=>{t.d(a,{c:()=>n});var s=t(69060),l=t(47620),o=(t(34688),t(82496));const n=e=>{let{TasksArray:a}=e;const[t,n]=(0,s.useState)(null),[d,r]=(0,s.useState)(null),[c,i]=(0,s.useState)(null);(0,s.useEffect)((()=>{if(a.length>0){const e=a.reduce(((e,a)=>{const t=new Date((new Date).toISOString().split("T")[0]+"T"+a.Start_Time);return e+(new Date((new Date).toISOString().split("T")[0]+"T"+a.End_Time)-t)}),0),t=new Date((new Date).toISOString().split("T")[0]+"T"+a[0].Start_Time),s=new Date((new Date).toISOString().split("T")[0]+"T"+a[a.length-1].End_Time)-t,l=s-e,o=Math.floor(s/1e3),d=Math.floor(o/3600),r=Math.floor(o%3600/60),c=o%60;i("".concat(String(d).padStart(2,"0"),":").concat(String(r).padStart(2,"0"),":").concat(String(c).padStart(2,"0")));const m=a.map((e=>{const a=new Date((new Date).toISOString().split("T")[0]+"T"+e.Start_Time),t=new Date((new Date).toISOString().split("T")[0]+"T"+e.End_Time)-a;return{label:"".concat(e.Task_Name," (").concat(e.Start_Time," - ").concat(e.End_Time,")"),duration:t,backgroundColor:u()}})),p={labels:m.map((e=>e.label)),datasets:[{data:m.map((e=>e.duration)),backgroundColor:m.map((e=>e.backgroundColor)),borderColor:"rgba(255, 255, 255, 1)",borderWidth:1}]};p.labels.push("Free Time"),p.datasets[0].data.push(l),p.datasets[0].backgroundColor.push("#ADD8E6"),n(p)}}),[a]),(0,s.useEffect)((()=>{if(t){d&&d.destroy();const e=document.getElementById("empWokHours"),a=new l.cp(e,{type:"pie",data:t,options:{responsive:!0,plugins:{tooltip:{callbacks:{label:function(e){const a=e.parsed||0,t=e.dataset.data.reduce(((e,a)=>e+a),0),s=Math.round(a/t*100),l=Math.round(a/6e4);return"".concat(l," minutes (").concat(s,"%)")}}},datalabels:{color:"#fff",formatter:(e,a)=>{const t=a.chart.data.labels[a.dataIndex],s=a.parsed||0,l=a.dataset.data.reduce(((e,a)=>e+a),0),o=Math.round(s/l*100);return"".concat(t,": ").concat(e," (").concat(o,"%)")}}}}});r(a)}}),[t]);const u=()=>{let e="#";for(let a=0;a<6;a++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};return a.length>0?(0,o.jsxs)("div",{className:"d-flex flex-column align-items-center my-3",style:{maxHeight:"500px"},children:[c&&(0,o.jsxs)("p",{className:"my-2",children:["Total Time: ",c]}),(0,o.jsx)("canvas",{id:"empWokHours",width:"400",height:"100"})]}):(0,o.jsx)("h5",{className:"text-center my-5",children:"No Data For PieChart!"})}},35684:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var s=t(69060),l=(t(21680),t(30612)),o=t(62344),n=t(2940),d=t(47620),r=(t(95382),t(82496));const c=e=>{let{startDate:a,endDate:t,taskActivity:l}=e;const o=(0,s.useRef)(null),n=(0,s.useRef)(null);return(0,s.useEffect)((()=>{if(o&&o.current){const e=o.current.getContext("2d"),s=l.map((e=>new Date(e.Work_Dt))),r=l.map((e=>e.Worked_Minutes));n.current&&n.current.destroy(),n.current=new d.cp(e,{type:"line",data:{labels:s,datasets:[{label:"Worked Minutes",data:r,borderColor:"blue",backgroundColor:"transparent",pointBackgroundColor:"blue",pointRadius:5,pointHoverRadius:7}]},options:{scales:{x:{type:"time",time:{unit:"day",min:a,max:t},title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"Worked Minutes"}}},plugins:{tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";a&&(a+=": "),null!==e.parsed.y&&(a+=e.parsed.y+" minutes");const t=l[e.dataIndex];return t&&(a+=" (".concat(t.Employee_Name,", Time: ").concat(t.Start_Time,"-").concat(t.End_Time,")")),a}}}}}})}return()=>{n.current&&n.current.destroy()}}),[a,t,l]),(0,r.jsx)("canvas",{ref:o})};var i=t(43692),u=t(84436),m=t(1908);const p=()=>{const e=localStorage.getItem("user"),a=JSON.parse(e),[t,d]=(0,s.useState)([]),[p,h]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[b,k]=(0,s.useState)([]),[T,S]=(0,s.useState)([]),x={Emp_Id:null===a||void 0===a?void 0:a.UserId,date:(new Date).toISOString().split("T")[0],EmpGet:null===a||void 0===a?void 0:a.Name},f={Emp_Id:null===a||void 0===a?void 0:a.UserId,From:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().split("T")[0],To:(new Date).toISOString().split("T")[0],EmpGet:null===a||void 0===a?void 0:a.Name,Task_Id:"",TaskGet:""},[y,E]=(0,s.useState)(x),[I,D]=(0,s.useState)(f);return(0,s.useEffect)((()=>{(0,m.q)({address:"taskManagement/task/work?Emp_Id=".concat(y.Emp_Id,"&from=").concat(y.date,"&to=").concat(y.date)}).then((e=>{e.success&&d(e.data)})).catch((e=>console.error(e)))}),[null===y||void 0===y?void 0:y.Emp_Id,null===y||void 0===y?void 0:y.date]),(0,s.useEffect)((()=>{(0,m.q)({address:"taskManagement/task/assignEmployee/user/dropDown?Company_id=".concat(null===a||void 0===a?void 0:a.Company_id)}).then((e=>{e.success&&v(e.data)})).catch((e=>console.error(e))),(0,m.q)({address:"taskManagement/task/assignEmployee/task/dropDown"}).then((e=>{var a;e.success&&S(e.data),(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.length)>0&&D((a=>({...a,Task_Id:e.data[0].Task_Id,TaskGet:e.data[0].Task_Name})))})).catch((e=>console.error(e)))}),[]),(0,s.useEffect)((()=>{(0,m.q)({address:"taskManagement/task/work/barChart?Emp_Id=".concat(null===I||void 0===I?void 0:I.Emp_Id,"&From=").concat(null===I||void 0===I?void 0:I.From,"&To=").concat(null===I||void 0===I?void 0:I.To,"&Task_Id=").concat(null===I||void 0===I?void 0:I.Task_Id)}).then((e=>{e.success&&h(e.data)})).catch((e=>console.error(e)))}),[I.Emp_Id,I.From,I.To,I.Task_Id]),(0,s.useEffect)((()=>{k([]),(0,m.q)({address:"taskManagement/task/workedUsers/dropDown?Task_Id=".concat(I.Task_Id)}).then((e=>{e.success&&k(e.data)})).catch((e=>console.error(e)))}),[null===I||void 0===I?void 0:I.Task_Id]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.c,{children:(0,r.jsxs)(u.c,{style:{minHeight:500},children:[(0,r.jsx)("h5",{children:"User Work Report"}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)(l.cp,{value:{value:null===y||void 0===y?void 0:y.Emp_Id,label:null===y||void 0===y?void 0:y.EmpGet},onChange:e=>E({...y,Emp_Id:e.value,EmpGet:e.label}),options:[{value:"",label:"All Employee"},...g.map((e=>({value:e.UserId,label:e.Name})))],styles:o.cF,isSearchable:!0,placeholder:"Employee Name"})}),(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)("input",{type:"date",value:y.date,onChange:e=>E({...y,date:e.target.value}),className:"cus-inpt bg-test",style:{backgroundColor:"rgba(255, 255, 255, 0.322)"}})})]}),(0,r.jsx)(n.c,{TasksArray:t})]})}),(0,r.jsx)(i.c,{className:"mt-3",children:(0,r.jsxs)(u.c,{style:{minHeight:500},children:[(0,r.jsx)("h5",{children:"Task Activity Report"}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)(l.cp,{value:{value:null===I||void 0===I?void 0:I.Task_Id,label:null===I||void 0===I?void 0:I.TaskGet},onChange:e=>D({...I,Task_Id:e.value,TaskGet:e.label}),options:[...T.map((e=>({value:e.Task_Id,label:e.Task_Name})))],styles:o.cF,isSearchable:!0,placeholder:"Task Name"})}),(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)(l.cp,{value:{value:null===I||void 0===I?void 0:I.Emp_Id,label:null===I||void 0===I?void 0:I.EmpGet},onChange:e=>D({...I,Emp_Id:e.value,EmpGet:e.label}),options:[{value:"",label:"All Employee"},...b.map((e=>({value:null===e||void 0===e?void 0:e.Emp_Id,label:null===e||void 0===e?void 0:e.Name})))],styles:o.cF,isSearchable:!0,placeholder:"Employee Name"})}),(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)("input",{type:"date",value:I.From,onChange:e=>D({...I,From:e.target.value}),className:"cus-inpt bg-test",style:{backgroundColor:"rgba(255, 255, 255, 0.322)"}})}),(0,r.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,r.jsx)("input",{type:"date",value:I.To,onChange:e=>D({...I,To:e.target.value}),className:"cus-inpt bg-test",style:{backgroundColor:"rgba(255, 255, 255, 0.322)"}})})]}),(0,r.jsx)(c,{taskActivity:p,startDate:I.From,endDate:I.To})]})})]})}}}]);
//# sourceMappingURL=7480.3cadb620.chunk.js.map
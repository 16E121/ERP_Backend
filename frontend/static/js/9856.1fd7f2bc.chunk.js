"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[9856],{64568:(e,t,a)=>{a.d(t,{c:()=>d});var s=a(82496);const d=()=>(0,s.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},62344:(e,t,a)=>{a.d(t,{o$:()=>l,o5:()=>n,cF:()=>r,iI:()=>d});const s=a.p+"static/media/smt.aa4d4f940bbebff07a57.png",d={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},r={control:(e,t)=>({...e,height:"45px",background:"rgba(255, 255, 255, 0.322)"}),menu:(e,t)=>({...e,zIndex:9999})},l=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],n=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:s,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}]},10876:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var s=a(69060),d=a(5548),r=a(82656),l=a(26773),n=a(4488),o=a(90048),c=a(28655),i=a(14168),m=a(86e3),p=a(27664),u=a(82496);const h=(0,p.c)((0,u.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var _=a(56480),y=a(77536),j=a(1908),x=(a(21680),a(64568)),g=a(39308);const v=e=>{let{open:t,onClose:a,inputValue:d,isEdit:c,setReload:i}=e;const m=localStorage.getItem("user"),p=JSON.parse(m),[h,y]=(0,s.useState)([]),[v,b]=(0,s.useState)([]),[S,f]=(0,s.useState)({Project_Id:"",Project_Name:"",Project_Desc:"",Project_Head:"",Est_Start_Dt:(0,g.Q7)(),Est_End_Dt:(0,g.Q7)(),Project_Status:"",Entry_By:null===p||void 0===p?void 0:p.UserId,Company_id:null===p||void 0===p?void 0:p.Company_id});(0,s.useEffect)((()=>{(0,j.q)({address:"masters/users/employee/dropDown?Company_id=".concat(null===p||void 0===p?void 0:p.Company_id)}).then((e=>{y(e.success?e.data:[])})).catch((e=>console.error("Fetch Error:",e)))}),[null===p||void 0===p?void 0:p.Company_id]),(0,s.useEffect)((()=>{(0,j.q)({address:"taskManagement/statusList"}).then((e=>{e.success&&b(e.data)})).catch((e=>console.error("Fetch Error:",e)))}),[]),(0,s.useEffect)((()=>{t&&(c&&d?f({...d,Project_Head:null===d||void 0===d?void 0:d.Project_Head_Id,Est_Start_Dt:d.Est_Start_Dt?(0,g.Q7)(d.Est_Start_Dt):"",Est_End_Dt:d.Est_End_Dt?(0,g.Q7)(d.Est_End_Dt):"",Project_Status:(null===d||void 0===d?void 0:d.Project_Status)||"",Project_Desc:(null===d||void 0===d?void 0:d.Project_Desc)||"-"}):c||f({Project_Name:"",Project_Desc:"",Project_Head:"",Est_Start_Dt:(0,g.Q7)(),Est_End_Dt:(0,g.Q7)(),Project_Status:"",Entry_By:null===p||void 0===p?void 0:p.UserId,Company_id:null===p||void 0===p?void 0:p.Company_id}))}),[d,t,c]);const E=e=>{f({...S,[e.target.name]:e.target.value})},I=()=>{const e=["Project_Name","Project_Head","Est_Start_Dt","Est_End_Dt","Project_Status"];for(const t of e)if(!S[t])return _.m4.error("".concat(t.replace(/_/g," ")," is required")),!1;return!0},N=[{label:"Project Name",elem:"input",type:"text",required:!0,name:"Project_Name",value:S.Project_Name||""},{label:"Project Head",elem:"select",options:h.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name}))),required:!0,name:"Project_Head",value:S.Project_Head||""},{label:"Estimated Start Date",elem:"input",type:"date",required:!0,name:"Est_Start_Dt",value:S.Est_Start_Dt||""},{label:"Estimated End Date",elem:"input",type:"date",required:!0,name:"Est_End_Dt",value:S.Est_End_Dt||""},{label:"Project Status",elem:"select",options:v.map((e=>({value:e.Status_Id,label:e.Status}))),required:!0,name:"Project_Status",value:S.Project_Status||""},{label:"Description",elem:"textarea",name:"Project_Desc",value:S.Project_Desc||" "}];return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(r.c,{open:t,onClose:a,children:[(0,u.jsx)(l.c,{className:"bg-primary text-white mb-2 px-3 py-2",children:c?"Edit Project":"Create Project"}),(0,u.jsx)(n.c,{children:(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c?I()&&(0,j.q)({address:"taskManagement/project",method:"PUT",bodyData:S}).then((e=>{e.success?(a(),i((e=>!e)),_.m4.success(e.message)):_.m4.error(e.message)})).catch((e=>console.error("Fetch Error:",e))):(()=>{if(!I())return;const e={...S,Company_id:p.Company_id};(0,j.q)({address:"taskManagement/project",method:"POST",bodyData:e}).then((e=>{e.success?(a(),i((e=>!e)),_.m4.success(e.message)):_.m4.error(e.message)})).catch((e=>{console.error("Fetch Error:",e),_.m4.error("An error occurred while creating the project.")}))})()},children:[(0,u.jsx)("div",{className:"row",children:N.map(((e,t)=>(0,u.jsxs)("div",{className:"col-lg-4 mb-3",children:[(0,u.jsxs)("label",{children:[e.label," ",e.required&&(0,u.jsx)(x.c,{})]}),"textarea"===e.elem?(0,u.jsx)("textarea",{name:e.name,className:"cus-inpt",value:e.value,onChange:E}):"select"===e.elem?(0,u.jsxs)("select",{name:e.name,className:"cus-inpt",value:e.value,onChange:E,children:[(0,u.jsx)("option",{value:"",children:"Select"}),e.options&&e.options.map(((e,t)=>(0,u.jsx)("option",{value:e.value,children:e.label},t)))]}):(0,u.jsx)("input",{type:e.type,name:e.name,className:"cus-inpt",value:e.value,onChange:E})]},t)))}),(0,u.jsxs)(o.c,{children:[(0,u.jsx)("button",{className:"btn btn-light rounded-5 px-3",type:"button",onClick:a,children:"Cancel"}),(0,u.jsx)("button",{className:"btn btn-primary rounded-5 px-3",type:"submit",children:c?"Update":"Submit"})]})]})})]})})};var b=a(89e3),S=a(99904),f=a(33856),E=a(58612),I=a(27454),N=a(700),D=a(29504),C=a(71448),T=a(44380),R=a(12572),k=a(76552);const P=e=>{let{open:t,onClose:a,projectId:d,onReload:c}=e;const i={Name:"",Designation_Name:"",BranchName:""},[m,p]=(0,s.useState)(i),[h,x]=(0,s.useState)(!0),[g,v]=(0,s.useState)(!1),[P,w]=(0,s.useState)([]),[A,M]=(0,s.useState)([]),F=localStorage.getItem("user"),B=JSON.parse(F),{contextObj:L}=(0,s.useContext)(y.a);(0,s.useEffect)((()=>{t&&d&&(q(),O(),H())}),[t,d]);const q=async()=>{x(!0);try{const e=await(0,j.q)({address:"masters/Employeedetails?Project_Id=".concat(d)});e.success&&p(e.data)}catch(e){console.error(e),_.m4.error("Failed to fetch employee details")}finally{x(!1)}},O=async()=>{x(!0);try{const e=await(0,j.q)({address:"masters/Employeedetails/dropDown?Company_id=".concat(B.Company_id)});e.success&&w(e.data)}catch(e){console.error(e),_.m4.error("Failed to fetch employees for dropdown")}finally{x(!1)}},H=async()=>{x(!0);try{const e=await(0,j.q)({address:"masters/Employeedetails?Project_Id=".concat(d)});e.success&&M(e.data)}catch(e){console.error(e),_.m4.error("Failed to fetch assigned employees")}finally{x(!1)}},U=()=>{a(),p(i)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(r.c,{open:t,maxWidth:"sm",fullWidth:!0,children:[(0,u.jsxs)(R.c,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:2,marginInlineStart:2,children:[(0,u.jsx)("span",{children:"Employee Details"}),(0,u.jsx)(o.c,{children:(0,u.jsx)(b.c,{variant:"contained",color:"primary",onClick:()=>{v(!0)},sx:{mr:1},children:"Add"})})]}),(0,u.jsx)(n.c,{children:h?(0,u.jsx)("p",{children:"Loading..."}):(0,u.jsx)(S.c,{children:(0,u.jsxs)(f.c,{children:[(0,u.jsx)(E.c,{children:(0,u.jsxs)(I.c,{children:[(0,u.jsx)(N.c,{children:"Employee Name"}),(0,u.jsx)(N.c,{children:"Position"}),(0,u.jsx)(N.c,{children:"Department"})]})}),(0,u.jsx)(D.c,{children:Array.isArray(m)&&m.length>0?m.map((e=>(0,u.jsxs)(I.c,{children:[(0,u.jsx)(N.c,{children:e.Name||"N/A"}),(0,u.jsx)(N.c,{children:e.Designation_Name||"-"}),(0,u.jsx)(N.c,{children:e.BranchName||"-"})]},e.EmployeeId||e.UserId))):(0,u.jsx)(I.c,{children:(0,u.jsx)(N.c,{colSpan:3,children:"No data available"})})})]})})}),(0,u.jsx)(o.c,{sx:{marginTop:"auto ",position:"sticky",bottom:0},children:(0,u.jsx)(b.c,{variant:"contained",color:"primary",onClick:U,children:"Close"})})]}),(0,u.jsxs)(r.c,{open:g,maxWidth:"sm",fullWidth:!0,children:[(0,u.jsx)(l.c,{children:"Add Employee"}),(0,u.jsx)(n.c,{children:(0,u.jsx)(C.c,{multiple:!0,options:P,getOptionLabel:e=>e.Name,isOptionEqualToValue:(e,t)=>e.UserId===t.UserId,onChange:(e,t)=>{const a=t.filter(((e,t,a)=>t===a.findIndex((t=>t.UserId===e.UserId))));M(a)},PopperComponent:e=>(0,u.jsx)(k.c,{...e,placement:"top"}),value:A,onClose:onclose,renderInput:e=>(0,u.jsx)(T.c,{...e,placeholder:"Employees"})})}),(0,u.jsxs)(o.c,{children:[(0,u.jsx)(b.c,{onClick:()=>{v(!1),U(),p(i)},children:"Cancel"}),(0,u.jsx)(b.c,{onClick:async()=>{if(1===Number(null===L||void 0===L?void 0:L.Add_Rights))try{(await(0,j.q)({address:"masters/Employeedetails/employeeAdd",method:"POST",bodyData:{Project_Id:d,UserIds:A.map((e=>e.UserId))}})).success?(_.m4.success("Employees added successfully"),v(!1),await q(),await H(),c()):_.m4.error("Failed to add employees")}catch(e){console.error(e),_.m4.error("Error adding employees")}},variant:"contained",color:"primary",children:"Add"})]})]})]})};var w=a(32635),A=a(30612),M=a(62344);const F=e=>{let{open:t,onClose:a,projectId:d,taskId:c,reload:i,editData:m}=e;const p=localStorage.getItem("user"),h=JSON.parse(p),[y,x]=(0,s.useState)([]),[g,v]=(0,s.useState)(!1),[S,f]=(0,s.useState)([]),E={AN_No:"",Project_Id:d,Sch_Id:c,Assigned_Emp_Id:null===h||void 0===h?void 0:h.UserId,Emp_Id:"",Task_Assign_dt:(new Date).toISOString().split("T")[0],Sch_Period:"",Sch_Time:"",EN_Time:"",Est_Start_Dt:"",Est_End_Dt:"",Ord_By:1,Timer_Based:!1,Sch_Type:"",Invovled_Stat:!0,EmpGet:"- Select -",Is_Repitative:!1,RepeatDays:{Mon:!1,Tue:!1,Wed:!1,Thu:!1,Fri:!1,Sat:!1,Sun:!1}},[I,N]=(0,s.useState)(E);(0,s.useEffect)((()=>{t&&(async()=>{v(!0);try{const e=await(0,j.q)({address:"masters/Employeedetails/getusersproject?Project_Id=".concat(d)}),t=await(0,j.q)({address:"taskManagement/project/schedule/newscheduleType"});e.success&&x(e.data||[]),t.success}catch(e){_.m4.error("Failed to fetch data.")}finally{v(!1)}})()}),[d,t,i]),(0,s.useEffect)((()=>{t&&(async()=>{v(!0);try{if(m){var e,t;const a=await(0,j.q)({address:"masters/employeedetails/selectedTaskDetails?projectId=".concat(d,"&Sch_Id=").concat(c.Sch_Id,"&Task_Id=").concat(c.Task_Id)}),s=null===(e=a.data[0])||void 0===e?void 0:e.Sch_Type_Id,r=null===(t=a.data[0])||void 0===t?void 0:t.Sch_Name;f(s&&r?{value:s,label:r}:{value:"",label:""})}else{var a,s;const e=await(0,j.q)({address:"masters/employeedetails/selectedTaskDetails?projectId=".concat(d,"&Sch_Id=").concat(c.TaskSchId,"&Task_Id=").concat(c.Task_Id)}),t=null===(a=e.data[0])||void 0===a?void 0:a.Sch_Type_Id,r=null===(s=e.data[0])||void 0===s?void 0:s.Sch_Name;f(t&&r?{value:t,label:r}:{value:"",label:""})}}catch(r){_.m4.error("Failed to fetch data.")}finally{v(!1)}})()}),[t,m,i,d]),(0,s.useEffect)((()=>{m&&N((e=>({...e,AN_No:m.AN_No,Emp_Id:m.Emp_Id,Sch_Time:m.Sch_Time,EN_Time:m.EN_Time,Est_Start_Dt:m.Est_Start_Dt.split("T")[0],Est_End_Dt:m.Est_End_Dt.split("T")[0],Ord_By:m.Ord_By,Timer_Based:m.Timer_Based,Invovled_Stat:m.Invovled_Stat,Sch_Type_Id:m.Sch_Type,Sch_Type:m.Sch_Type_Name,EmpGet:m.EmployeeName,Is_Repitative:m.Is_Repitative,RepeatDays:{Mon:!!m.IS_Rep_Monday,Tue:!!m.IS_Rep_Tuesday,Wed:!!m.IS_Rep_Wednesday,Thu:!!m.IS_Rep_Thursday,Fri:!!m.Is_Rep_Friday,Sat:!!m.Is_Rep_Saturday,Sun:!!m.Is_Rep_Sunday}})))}),[m]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(r.c,{open:t,maxWidth:"sm",children:[(0,u.jsx)(l.c,{children:m?"Edit Task":"Employee Assign"}),(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{const[e,t]=I.Sch_Time.split(":").map(Number),[a,s]=I.EN_Time.split(":").map(Number),d=new Date(0,0,0,e,t),r=new Date(0,0,0,a,s);if(r>d){let e=Math.abs(r-d);const t=Math.floor(e/36e5),a=Math.floor(e/6e4);return"".concat(String(t).padStart(2,"0"),":").concat(String(a).padStart(2,"0"))}return""})();if(I.Est_End_Dt<I.Est_Start_Dt)_.m4.error("End date must be greater than start date.");else try{const e=m?"masters/employeedetails/updateTask":"masters/employeedetails/assignTask",s={IS_Rep_Monday:I.RepeatDays.Mon?1:null,IS_Rep_Tuesday:I.RepeatDays.Tue?1:null,IS_Rep_Wednesday:I.RepeatDays.Wed?1:null,IS_Rep_Thursday:I.RepeatDays.Thu?1:null,Is_Rep_Friday:I.RepeatDays.Fri?1:null,Is_Rep_Saturday:I.RepeatDays.Sat?1:null,Is_Rep_Sunday:I.RepeatDays.Sun?1:null};(await(0,j.q)({address:e,method:m?"PUT":"POST",bodyData:{...I,Project_Id:d,Sch_Id:m?c.Sch_Id:c.TaskSchId,Task_Levl_Id:c.Task_Levl_Id,Task_Id:Number(c.Task_Id),Assigned_Emp_Id:I.Assigned_Emp_Id,Emp_Id:I.Emp_Id,Sch_Period:t,Sch_Time:I.Sch_Time,EN_Time:I.EN_Time,Est_Start_Dt:I.Est_Start_Dt,Est_End_Dt:I.Est_End_Dt,Ord_By:I.Ord_By,Sch_Type:S.value,Timer_Based:I.Timer_Based?1:0,Invovled_Stat:I.Invovled_Stat?1:0,Is_Repitative:I.Is_Repitative?1:0,RepeatDays:I.Is_Repitative?I.RepeatDays:"",...s}})).success?(_.m4.success("Task ".concat(m?"updated":"assigned"," successfully!")),N({}),a()):_.m4.error("Please fill the values correctly")}catch(s){_.m4.error("Error during task assignment/update: "+s.message)}},children:[(0,u.jsxs)(n.c,{className:"table-responsive",children:[g&&(0,u.jsx)("div",{children:"Loading..."}),(0,u.jsx)("table",{className:"table",style:{tableLayout:"fixed"},children:(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle",paddingRight:"1em"},children:"Employee"}),(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{paddingLeft:"1em"},children:(0,u.jsx)(A.cp,{value:{value:I.Emp_Id,label:I.EmpGet},onChange:e=>N({...I,Emp_Id:e.value,EmpGet:e.label}),options:[{value:"",label:"- Select -"},...y.map((e=>({value:e.UserId,label:e.Name})))],styles:M.cF,required:!0,isSearchable:!0,placeholder:"Select User"})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle",paddingRight:"1em"},children:"Sch_Type"}),(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{paddingLeft:"1em"},children:(0,u.jsx)(A.cp,{value:S?{value:S.value,label:"".concat(S.label)}:null,styles:{padding:"0.5em"},isDisabled:!0,placeholder:"Select Sch_Type"})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle",paddingRight:"1em"},children:"Start Time"}),(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{paddingLeft:"1em"},children:(0,u.jsx)("input",{type:"time",className:"cus-inpt",value:I.Sch_Time,required:!0,onChange:e=>N({...I,Sch_Time:e.target.value}),style:{padding:"0.5em"}})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle",paddingRight:"1em"},children:"End Time"}),(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{paddingLeft:"1em"},children:(0,u.jsx)("input",{type:"time",className:"cus-inpt",value:I.EN_Time,required:!0,min:I.Sch_Time,onChange:e=>N({...I,EN_Time:e.target.value}),style:{padding:"0.5em"}})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle",paddingRight:"1em"},children:"Est. Start Date"}),(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{paddingLeft:"1em"},children:(0,u.jsx)("input",{type:"date",className:"cus-inpt",value:I.Est_Start_Dt,required:!0,onChange:e=>N({...I,Est_Start_Dt:e.target.value}),style:{padding:"0.5em"}})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle",paddingRight:"1em"},children:"Est. End Date"}),(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{paddingLeft:"1em"},children:(0,u.jsx)("input",{type:"date",className:"cus-inpt",value:I.Est_End_Dt,required:!0,min:I.Est_Start_Dt,onChange:e=>N({...I,Est_End_Dt:e.target.value}),style:{padding:"0.5em"}})})]}),(0,u.jsx)("tr",{children:(0,u.jsxs)("td",{className:"border-bottom-0 fa-15 text-start",style:{paddingRight:"1em"},children:[(0,u.jsxs)("div",{style:{display:"inline-flex",marginRight:"1em"},children:[(0,u.jsx)("input",{className:"form-check-input shadow-none",type:"checkbox",id:"timerbased",checked:Boolean(Number(null===I||void 0===I?void 0:I.Timer_Based)),onChange:e=>N({...I,Timer_Based:e.target.checked}),style:{marginRight:"0.5em"}}),(0,u.jsx)("label",{className:"form-check-label p-1 ps-2",htmlFor:"timerbased",children:"Timer Based Task?"})]}),m&&(0,u.jsxs)("div",{style:{display:"inline-flex",marginRight:"1em"},children:[(0,u.jsx)("input",{className:"form-check-input shadow-none",type:"checkbox",checked:Boolean(Number(null===I||void 0===I?void 0:I.Invovled_Stat)),onChange:()=>N({...I,Invovled_Stat:!I.Invovled_Stat}),style:{marginRight:"0.5em"}}),(0,u.jsx)("label",{className:"form-check-label p-1 ps-2",children:"Involved Status"})]})]})}),(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"border-bottom-0 fa-15",style:{paddingRight:"1em"},children:(0,u.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,u.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:"1em"},children:[(0,u.jsx)("input",{type:"checkbox",checked:1===I.Is_Repitative,onChange:e=>{N((t=>({...t,Is_Repitative:e.target.checked?1:0})))},style:{marginRight:"1em"}}),(0,u.jsx)("label",{style:{marginBottom:"0"},children:"Is Repetitive?"})]}),1===I.Is_Repitative&&(0,u.jsx)("div",{style:{display:"inline-flex",gap:"0.5em"},children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e=>(0,u.jsxs)("label",{style:{display:"flex",alignItems:"center",marginRight:"1em",width:"30px"},children:[(0,u.jsx)("input",{type:"checkbox",checked:I.RepeatDays[e],onChange:()=>N({...I,RepeatDays:{...I.RepeatDays,[e]:!I.RepeatDays[e]}}),style:{marginRight:"0.5em"}}),e]},e)))})]})})})]})})]}),(0,u.jsxs)(o.c,{children:[(0,u.jsx)(b.c,{onClick:()=>{a(),N(E)},variant:"outlined",children:"Close"}),(0,u.jsx)(b.c,{type:"submit",variant:"contained",children:"Save Changes"})]})]})]})})},B=()=>{const[e,t]=(0,s.useState)(!1),[a,p]=(0,s.useState)([]),[x,g]=(0,s.useState)([]),{contextObj:b}=(0,s.useContext)(y.a),[S,f]=(0,s.useState)(!1),[E,I]=(0,s.useState)(null),[N,D]=(0,s.useState)(!1),[C,T]=(0,s.useState)(0),[R,k]=(0,s.useState)(!1),[A,M]=(0,s.useState)(null),[B,L]=(0,s.useState)(!1),[q,O]=(0,s.useState)(!1),[H,U]=(0,s.useState)(""),W=JSON.parse(localStorage.getItem("user"));(0,s.useEffect)((()=>{V(),G()}),[null===W||void 0===W?void 0:W.Company_id,e]);const z=()=>t((e=>!e)),V=async()=>{try{const e=await(0,j.q)({address:"taskManagement/project/newProjectAbstract?Company_id=".concat(null===W||void 0===W?void 0:W.Company_id)});p(e.success?e.data:[])}catch(e){console.error(e),p([])}},G=async()=>{try{const e=await(0,j.q)({address:"taskManagement/project?Company_id=".concat(null===W||void 0===W?void 0:W.Company_id)});g(e.success?e.data:[])}catch(e){console.error(e),g([])}},Q=()=>{A&&(0,j.q)({address:"taskManagement/project",method:"DELETE",bodyData:{Project_Id:null===A||void 0===A?void 0:A.Project_Id}}).then((a=>{a.success?(t(!e),_.m4.success(a.message)):_.m4.error(a.message)})).catch((e=>console.error("Fetch Error:",e))),k(!1)},J=[{name:"Project",selector:e=>e.Project_Name,sortable:!0,width:"250px"},{name:"Head",selector:e=>{var t;return null===(t=x.find((t=>t.Project_Id===e.Project_Id)))||void 0===t?void 0:t.Project_Head_Name},sortable:!0},{name:"Status",selector:e=>{var t;return null===(t=x.find((t=>t.Project_Id===e.Project_Id)))||void 0===t?void 0:t.Status},sortable:!0},{name:"End Date",selector:e=>e.Est_End_Dt?new Date(e.Est_End_Dt).toLocaleDateString("en-IN"):"N/A",sortable:!0},{name:"Progress",selector:e=>{return"".concat((t=e.TasksScheduled,a=e.CompletedTasks,0===Number(t)?0:(Number(a)/Number(t)*100).toFixed(0)),"%");var t,a},sortable:!0},{name:"Tasks",cell:e=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.c,{onClick:()=>Y(e),children:(0,u.jsx)(c.c,{})}),e.CompletedTasks," / ",e.TasksScheduled]})},{name:"Assigned",selector:e=>e.TasksAssignedToEmployee},{name:"Employees",cell:e=>(0,u.jsxs)(u.Fragment,{children:[1===Number(null===b||void 0===b?void 0:b.Add_Rights)&&(0,u.jsx)(d.c,{onClick:()=>X(e.Project_Id),children:(0,u.jsx)(i.c,{})}),e.EmployeesInvolved]})},{name:"Actions",cell:e=>(0,u.jsx)(u.Fragment,{children:1===Number(null===b||void 0===b?void 0:b.Edit_Rights)&&(0,u.jsx)(d.c,{onClick:()=>K(e),children:(0,u.jsx)(m.c,{})})})}],Z=a.filter((e=>{var t,a;const s=(null===(t=x.find((t=>t.Project_Id===e.Project_Id)))||void 0===t?void 0:t.Project_Head_Name)||"",d=(null===(a=x.find((t=>t.Project_Id===e.Project_Id)))||void 0===a?void 0:a.Status)||"";return e.Project_Name.toLowerCase().includes(H.toLowerCase())||s.toLowerCase().includes(H.toLowerCase())||d.toLowerCase().includes(H.toLowerCase())})),K=e=>{I(e),D(!0),f(!0)},Y=e=>{I(e),T(e.Project_Id),O(!0)},$=()=>{f(!1),O(!1),I(null),M(null),k(!1)},X=e=>{T(e),L(!0)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"fw-bold d-flex align-items-center justify-content-between mt-0 ",children:[(0,u.jsx)("span",{style:{marginLeft:"20px"},children:"Projects"}),(0,u.jsxs)("div",{className:"mb-1",style:{display:"flex",alignItems:"center"},children:[(0,u.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,u.jsx)(h,{style:{position:"absolute",left:15,color:"#aaa"}}),(0,u.jsx)("input",{type:"text",placeholder:"Search",onChange:e=>U(e.target.value),style:{paddingLeft:35,marginRight:10,margin:10,borderRadius:4,border:"1px solid black"}})]}),1===Number(null===b||void 0===b?void 0:b.Add_Rights)&&(0,u.jsx)("button",{onClick:()=>{I(null),D(!1),f(!0)},className:"btn btn-primary fa-13 shadow",children:"Create Project"})]})]}),(0,u.jsxs)("div",{className:"card-body p-0 table-container",children:[(0,u.jsx)(w.cp,{columns:J,data:Z,pagination:!0,highlightOnHover:!0,fixedHeader:!0,paginationPerPage:15,responsive:!0,persistTableHead:!0,customStyles:{headCells:{style:{fontSize:"16px",fontWeight:"bold",padding:"10px",backgroundColor:"#2c3e50",color:"#ecf0f1",position:"sticky",top:0,zIndex:2}},cells:{style:{padding:"8px",fontSize:"14px",backgroundColor:"#f9f9f9",color:"#2c3e50"}},rows:{style:{borderBottom:"1px solid #ddd"}}},style:{overflowY:"auto",maxHeight:"calc(100vh - 200px)"}}),(0,u.jsxs)(r.c,{open:R,onClose:$,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,u.jsx)(l.c,{className:"bg-danger text-white mb-2 px-3 py-2",style:{fontSize:"18px"},children:"Confirm Deletion"}),(0,u.jsxs)(n.c,{className:"p-4",style:{fontSize:"16px"},children:["Are you sure you want to delete the project",(0,u.jsx)("span",{className:"text-primary",children:" "+(null===A||void 0===A?void 0:A.Project_Name)+" "}),"?"]}),(0,u.jsxs)(o.c,{children:[(0,u.jsx)("button",{onClick:()=>k(!1),className:"btn btn-secondary fa-13 shadow",style:{background:"#95a5a6",color:"white",borderRadius:"25px",padding:"8px 15px",cursor:"pointer"},children:"Cancel"}),(0,u.jsx)("button",{onClick:Q,className:"btn btn-danger fa-13 shadow",style:{background:"#e74c3c",color:"white",borderRadius:"25px",padding:"8px 15px",cursor:"pointer"},children:"Delete"})]})]})]}),(0,u.jsx)(F,{onClose:$,dialogOpen:q,setDialogOpen:O,isEdit:!1,parseData:W,projectid:C,onReload:z,selectedProject:E}),(0,u.jsx)(v,{open:S,onClose:$,inputValue:E,isEdit:N,setReload:z,projectData:C}),(0,u.jsx)(P,{open:B,onClose:()=>L(!1),projectId:C,onReload:z}),(0,u.jsxs)(r.c,{open:R,onClose:$,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,u.jsx)(l.c,{className:"bg-primary text-white mb-2 px-3 py-2",children:"Confirmation"}),(0,u.jsxs)(n.c,{className:"p-4",children:["Do you want to delete the project",(0,u.jsx)("span",{className:"text-primary",children:" "+(null===A||void 0===A?void 0:A.Project_Name)+" "}),"?"]}),(0,u.jsxs)(o.c,{children:[(0,u.jsx)("button",{onClick:()=>k(!1),className:"btn btn-secondary fa-13 shadow",children:"Cancel"}),(0,u.jsx)("button",{onClick:Q,className:"btn btn-danger fa-13 shadow",children:"Delete"})]})]})]})}},86e3:(e,t,a)=>{a.d(t,{c:()=>r});var s=a(27664),d=a(82496);const r=(0,s.c)((0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},28655:(e,t,a)=>{a.d(t,{c:()=>r});var s=a(27664),d=a(82496);const r=(0,s.c)((0,d.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch")},14168:(e,t,a)=>{a.d(t,{c:()=>r});var s=a(27664),d=a(82496);const r=(0,s.c)((0,d.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")},12572:(e,t,a)=>{a.d(t,{c:()=>c});var s=a(0),d=a(31152),r=a(46712),l=a(83068);const n=(0,a(10099).c)("MuiBox",["root"]),o=(0,r.c)(),c=(0,s.c)({themeId:l.c,defaultTheme:o,defaultClassName:n.root,generateClassName:d.c.generate})},0:(e,t,a)=>{a.d(t,{c:()=>u});var s=a(45072),d=a(95656),r=a(69060),l=a(79736),n=a(7592),o=a(6868),c=a(47100),i=a(47664),m=a(82496);const p=["className","component"];function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:a,defaultClassName:u="MuiBox-root",generateClassName:h}=e,_=(0,n.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(o.c);return r.forwardRef((function(e,r){const n=(0,i.c)(a),o=(0,c.c)(e),{className:y,component:j="div"}=o,x=(0,d.c)(o,p);return(0,m.jsx)(_,(0,s.c)({as:j,ref:r,className:(0,l.c)(y,h?h(u):u),theme:t&&n[t]||n},x))}))}}}]);
//# sourceMappingURL=9856.1fd7f2bc.chunk.js.map
"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8384],{13724:(e,i,l)=>{l.d(i,{c:()=>F});var a=l(69060),t=l(27454),r=l(700),s=l(5548),d=l(99904),n=l(85624),o=l(33856),c=l(58612),u=l(53248),_=l(29504),m=l(5930),v=l(39308),g=l(41459),b=l(46864),y=l(82496);const p=e=>{let{dataArray:i=[],columns:l=[],onClickFun:p=null,isExpendable:F=!1,expandableComp:x=null,tableMaxHeight:h=550,initialPageCount:A=20,EnableSerialNumber:N=!1,CellSize:D="small",disablePagination:f=!1,title:j=""}=e;const[V,M]=(0,a.useState)(0),[C,S]=(0,a.useState)(A),[B,w]=(0,a.useState)([]),L=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],O=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],k=(e=>{if(!B.length)return e;return[...e].sort(((e,i)=>{for(const l of B){const{columnId:a,direction:t}=l,r=e[a],s=i[a];if(r!==s)return"asc"===t?r>s?1:-1:r<s?1:-1}return 0}))})(i),P=V*C,Q=P+C,T=k.slice(P,Q),G=(e,i)=>{switch(i){case"number":return(0,v.SA)(e);case"date":return(0,v.uy)(e);case"time":return(0,v.AX)(e);case"string":return e;default:return""}},E=e=>{let{row:i,index:d}=e;const[n,o]=(0,a.useState)(!1),c="20px";return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsxs)(t.c,{children:[!0===F&&x&&(0,y.jsx)(r.c,{className:"fa-13 border-end text-center vtop",children:(0,y.jsx)(s.c,{size:"small",onClick:()=>o((e=>!e)),children:n?(0,y.jsx)(g.c,{sx:{fontSize:c}}):(0,y.jsx)(b.c,{sx:{fontSize:c}})})}),!0===N&&(0,y.jsx)(r.c,{className:"fa-13 border-end text-center vtop",children:C*V+d+1}),null===l||void 0===l?void 0:l.map(((e,l)=>{var a,t;return((0,v.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,v.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(!1!==Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell?(0,y.jsx)(r.c,{className:"fa-13 border-end "+(e.align?null===(a=L.find((i=>i.type===String(e.align).toLowerCase())))||void 0===a?void 0:a.class:"")+(e.verticalAlign?null===(t=O.find((i=>i.type===String(e.verticalAlign).toLowerCase())))||void 0===t?void 0:t.class:" vctr "),children:e.Cell({row:i,Field_Name:e.Field_Name})},l):Object.entries(i).map((a=>{var t,s;let[d,n]=a;return e.Field_Name===d&&((0,v.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,v.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,y.jsx)(r.c,{className:"fa-13 border-end "+(e.align?null===(t=L.find((i=>i.type===String(e.align).toLowerCase())))||void 0===t?void 0:t.class:"")+(e.verticalAlign?null===(s=O.find((i=>i.type===String(e.verticalAlign).toLowerCase())))||void 0===s?void 0:s.class:" vctr "),onClick:()=>p?p(i):console.log("Function not supplied"),children:G(n,null===e||void 0===e?void 0:e.Fied_Data)},l)})))}))]}),!0===F&&x&&n&&(0,y.jsx)(t.c,{children:(0,y.jsx)(r.c,{colSpan:Number(null===l||void 0===l?void 0:l.length)+(!0===N?2:1),children:x({row:i,index:d})})})]})};return(0,y.jsxs)("div",{children:[j&&(0,y.jsx)("h6",{className:"fw-bold text-muted",children:j}),(0,y.jsx)(d.c,{component:n.c,sx:{maxHeight:h},children:(0,y.jsxs)(o.c,{stickyHeader:!0,size:D,children:[(0,y.jsx)(c.c,{children:(0,y.jsxs)(t.c,{children:[F&&x&&(0,y.jsx)(r.c,{className:"fa-13 fw-bold border-end border-top text-center",style:{backgroundColor:"#EDF0F7"},children:"#"}),N&&(0,y.jsx)(r.c,{className:"fa-13 fw-bold border-end border-top text-center",style:{backgroundColor:"#EDF0F7"},children:"SNo"}),l.map(((e,i)=>{const l=(0,v.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,v.Qr)(null===e||void 0===e?void 0:e.isVisible,1),a=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,t=B.find((i=>i.columnId===e.Field_Name)),s=t?t.direction:"asc";var d,n,o,c;return l?a?(0,y.jsx)(r.c,{className:"fa-13 fw-bold border-end border-top "+(e.align?null===(d=L.find((i=>i.type===String(e.align).toLowerCase())))||void 0===d?void 0:d.class:""),style:{backgroundColor:"#EDF0F7"},sortDirection:!!t&&s,children:(0,y.jsx)(u.c,{active:!!t,direction:s,onClick:()=>(e=>{const i=B.find((i=>i.columnId===e));if(i){const l="asc"===i.direction;w(B.map((i=>i.columnId===e?{...i,direction:l?"desc":"asc"}:i)))}else w([...B,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(n=e.Field_Name)||void 0===n?void 0:n.replace(/_/g," "))})},i):(0,y.jsx)(r.c,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fa-13 fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(o=L.find((i=>i.type===String(e.align).toLowerCase())))||void 0===o?void 0:o.class:""),style:{backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},i):null}))]})}),(0,y.jsxs)(_.c,{children:[(f?k:T).map(((e,i)=>(0,y.jsx)(E,{row:e,index:i},i))),0===i.length&&(0,y.jsx)(t.c,{children:(0,y.jsx)(r.c,{colSpan:l.length+(!0===F&&x?1:0)+(!0===N?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!f&&0!==T.length&&(0,y.jsx)("div",{className:"p-2 pb-0",children:(0,y.jsx)(m.c,{component:"div",count:i.length,page:V,onPageChange:(e,i)=>{M(i)},rowsPerPage:C,onRowsPerPageChange:e=>{S(parseInt(e.target.value,10)),M(0)},rowsPerPageOptions:Array.from(new Set([A,5,20,50,100,200,500])).sort(((e,i)=>e-i)),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};p.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0};const F=p},48384:(e,i,l)=>{l.r(i),l.d(i,{default:()=>T});var a=l(69060),t=l(43692),r=l(84436),s=l(3358),d=l(5548),n=l(39308),o=l(13724),c=l(71448),u=l(52924),_=l(44380),m=l(89e3),v=l(82656),g=l(4488),b=l(90048),y=l(26773),p=l(85624),F=l(78092),x=l(68424),h=l(39504),A=l(49608),N=l(12120),D=l(74912),f=l(97332),j=l(35832),V=l(82496);const M=(0,f.g0)({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),C=(0,V.jsx)(x.c,{fontSize:"small"}),S=(0,V.jsx)(h.c,{fontSize:"small"}),B=[{Field_Name:"Ledger_Name",Fied_Data:"string",isVisible:1,isDefault:1,OrderBy:1},{Field_Name:"Billed_Qty",Fied_Data:"number",isVisible:1,isDefault:0,OrderBy:2},{Field_Name:"M2_Avg",Fied_Data:"number",isVisible:1,isDefault:0,OrderBy:3},{Field_Name:"M3_Avg",Fied_Data:"number",isVisible:1,isDefault:0,OrderBy:4},{Field_Name:"M6_Avg",Fied_Data:"number",isVisible:1,isDefault:0,OrderBy:5},{Field_Name:"M9_Avg",Fied_Data:"number",isVisible:0,isDefault:0,OrderBy:6},{Field_Name:"M12_Avg",Fied_Data:"number",isVisible:1,isDefault:0,OrderBy:7},{Field_Name:"A1",Fied_Data:"string",isVisible:1,isDefault:0,OrderBy:null},{Field_Name:"A2",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"A3",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"A4",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"A5",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Q_Pay_Days",Fied_Data:"number",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Freq_Days",Fied_Data:"number",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Ledger_Alias",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Actual_Party_Name_with_Brokers",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Name",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Location",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Nature",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Group",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Ref_Brokers",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Ref_Owners",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Mobile_1",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_Mobile_2",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"Party_District",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null},{Field_Name:"File_No",Fied_Data:"string",isVisible:0,isDefault:0,OrderBy:null}],w=e=>{let{dataArray:i,filterDialog:l,closeDialog:r}=e;const[x,h]=(0,a.useState)({}),[w,L]=(0,a.useState)([]),[O,k]=(0,a.useState)(w),[P,Q]=(0,a.useState)(!1),[T,G]=(0,a.useState)(B),E=[...T].filter((e=>(0,n.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,n.Qr)(null===e||void 0===e?void 0:e.isVisible,1))).map((e=>e.Field_Name));(0,a.useEffect)((()=>{W()}),[x]);const R=(e,i)=>{h((l=>({...l,[e]:i})))},W=()=>{let e=[...i];for(const i of T)if(x[i.Field_Name])if("range"===x[i.Field_Name].type){const{min:l,max:a}=x[i.Field_Name];e=e.filter((e=>{const t=e[i.Field_Name];return(void 0===l||t>=l)&&(void 0===a||t<=a)}))}else if("date"===x[i.Field_Name].type){const{start:l,end:a}=x[i.Field_Name].value;e=e.filter((e=>{const t=new Date(e[i.Field_Name]);return(void 0===l||t>=new Date(l))&&(void 0===a||t<=new Date(a))}))}else if(Array.isArray(x[i.Field_Name])){var l;e=(null===(l=x[i.Field_Name])||void 0===l?void 0:l.length)>0?e.filter((e=>{var l;return x[i.Field_Name].includes(null===(l=e[i.Field_Name])||void 0===l?void 0:l.toLowerCase().trim())})):e}k(e)},I=e=>{const{Field_Name:l,Fied_Data:a}=e;var t,r,s,d,n,o,m,v,g,b;if("number"===a)return(0,V.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,V.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(t=null===(r=x[l])||void 0===r?void 0:r.min)&&void 0!==t?t:"",onChange:e=>R(l,{type:"range",...x[l],min:e.target.value?parseFloat(e.target.value):void 0})}),(0,V.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(s=null===(d=x[l])||void 0===d?void 0:d.max)&&void 0!==s?s:"",onChange:e=>R(l,{type:"range",...x[l],max:e.target.value?parseFloat(e.target.value):void 0})})]});if("date"===a)return(0,V.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,V.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(n=null===(o=x[l])||void 0===o||null===(m=o.value)||void 0===m?void 0:m.start)&&void 0!==n?n:"",onChange:e=>{var i;return R(l,{type:"date",value:{...null===(i=x[l])||void 0===i?void 0:i.value,start:e.target.value||void 0}})}}),(0,V.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(v=null===(g=x[l])||void 0===g||null===(b=g.value)||void 0===b?void 0:b.end)&&void 0!==v?v:"",onChange:e=>{var i;return R(l,{type:"date",value:{...null===(i=x[l])||void 0===i?void 0:i.value,end:e.target.value||void 0}})}})]});if("string"===a){const e=[...new Set(i.map((e=>{var i,a;return null===(i=e[l])||void 0===i||null===(a=i.toLowerCase())||void 0===a?void 0:a.trim()})))];return(0,V.jsx)(c.c,{multiple:!0,id:"".concat(l,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:x[l]||[],onChange:(e,i)=>R(l,i),renderOption:(e,i,l)=>{let{selected:a}=l;return(0,V.jsxs)("li",{...e,children:[(0,V.jsx)(u.c,{icon:C,checkedIcon:S,style:{marginRight:8},checked:a}),i]})},isOptionEqualToValue:(e,i)=>e===i,renderInput:e=>(0,V.jsx)(_.c,{...e,label:l,placeholder:"Select ".concat(null===l||void 0===l?void 0:l.replace(/_/g," "))})})}};return(0,a.useEffect)((()=>{const e=Object.keys(x).length>0?O:i;L(e)}),[x,i,O]),(0,a.useEffect)((()=>{G((e=>e.sort(((e,i)=>null!==e&&void 0!==e&&e.OrderBy&&null!==i&&void 0!==i&&i.OrderBy?(null===e||void 0===e?void 0:e.OrderBy)-(null===i||void 0===i?void 0:i.OrderBy):(null===i||void 0===i?void 0:i.OrderBy)-(null===e||void 0===e?void 0:e.OrderBy)))))}),[T]),(0,V.jsxs)(a.Fragment,{children:[(0,V.jsx)(m.c,{variant:"outlined",className:"mb-2",onClick:()=>{const e=w.map((e=>Object.fromEntries(Object.entries(e).filter((e=>{let[i]=e;return"LedgerSales"!==i&&E.find((e=>e===i))}))))),i=(0,f.oF)(M)(e);(0,f.kj)(M)(i)},startIcon:(0,V.jsx)(A.c,{}),children:"Download Ledger Data"}),(0,V.jsxs)("div",{className:"row",children:[(0,V.jsx)("div",{className:"col-xxl-10 col-lg-9 col-md-8",children:(0,V.jsx)(o.c,{columns:[{Field_Name:"Excel_Export",Fied_Data:"string",isVisible:1,OrderBy:1,isCustomCell:!0,Cell:e=>{let{row:i}=e;const l=Object.fromEntries(Object.entries(i).filter((e=>{let[i]=e;return"LedgerSales"!==i&&E.find((e=>e===i))})));return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(d.c,{size:"small",onClick:()=>{((e,i)=>{const l=j.c$.book_new(),a=j.c$.json_to_sheet(e);j.c$.book_append_sheet(l,a,"Sheet1");const t=j.c$.json_to_sheet(i);j.c$.book_append_sheet(l,t,"Sheet2"),j.a8(l,"exported_data.xlsx")})([l],i.LedgerSales)},children:(0,V.jsx)(A.c,{})})})}},...T.map((e=>(0,n.Qr)(e.isVisible,1)&&e))],dataArray:w,isExpendable:!0,expandableComp:e=>{let{row:i}=e;return(0,V.jsx)(o.c,{initialPageCount:15,dataArray:Array.isArray(i.LedgerSales)?i.LedgerSales:[],columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_AVG_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_AVG_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_AVG_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_AVG_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"One_Year_AVG_Qty",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})}),(0,V.jsxs)("div",{className:"col-xxl-2 col-lg-3 col-md-4 d-none d-md-block",children:[(0,V.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,V.jsx)("span",{children:"Filters"}),(0,V.jsxs)("span",{children:[(0,V.jsx)(s.c,{title:"Column Visiblity",children:(0,V.jsx)(d.c,{size:"small",onClick:()=>Q(!0),children:(0,V.jsx)(N.c,{})})}),(0,V.jsx)(s.c,{title:"Clear Filters",children:(0,V.jsx)(d.c,{size:"small",onClick:()=>h({}),children:(0,V.jsx)(D.c,{})})})]})]}),(0,V.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"58vh",overflow:"auto"},children:[T.map(((e,i)=>{var l;return(0,n.Qr)(e.isVisible,1)&&(0,V.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,V.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(l=e.Field_Name)||void 0===l?void 0:l.replace(/_/g," ")}),I(e)]},i)})),(0,V.jsx)("br",{})]})]})]}),(0,V.jsxs)(v.c,{open:l,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,V.jsxs)(g.c,{children:[(0,V.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,V.jsx)("span",{children:"Filters"}),(0,V.jsxs)("span",{children:[(0,V.jsx)(s.c,{title:"Column Visiblity",children:(0,V.jsx)(d.c,{size:"small",onClick:()=>Q(!0),children:(0,V.jsx)(N.c,{})})}),(0,V.jsx)(s.c,{title:"Clear Filters",children:(0,V.jsx)(d.c,{size:"small",onClick:()=>h({}),children:(0,V.jsx)(D.c,{})})})]})]}),(0,V.jsxs)("div",{className:"border rounded-3 ",children:[T.map(((e,i)=>{var l;return(0,n.Qr)(e.isVisible,1)&&(0,V.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,V.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(l=e.Field_Name)||void 0===l?void 0:l.replace(/_/g," ")}),I(e)]},i)})),(0,V.jsx)("br",{})]})]}),(0,V.jsx)(b.c,{children:(0,V.jsx)(m.c,{onClick:r,color:"error",children:"close"})})]}),(0,V.jsxs)(v.c,{open:P,onClose:()=>Q(!1),maxWidth:"lg",fullWidth:!0,children:[(0,V.jsx)(y.c,{children:"Column Settings"}),(0,V.jsx)(g.c,{children:(0,V.jsx)("div",{className:"row",children:T.map(((e,i)=>(0,V.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,V.jsxs)(t.c,{component:p.c,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(i%2!==0?"bg-light":""),children:[(0,V.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,V.jsx)(F.c,{checked:Boolean(null===e||void 0===e?void 0:e.isDefault)||Boolean(null===e||void 0===e?void 0:e.isVisible),disabled:Boolean(null===e||void 0===e?void 0:e.isDefault),onChange:i=>G((l=>l.map((l=>l.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?{...l,isVisible:i.target.checked?1:0}:l))))}),(0,V.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Field_Name})]}),(0,V.jsx)("input",{type:"number",value:(0,n.Q$)(null===e||void 0===e?void 0:e.OrderBy)?null===e||void 0===e?void 0:e.OrderBy:"",onChange:i=>G((l=>l.map((l=>l.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?{...l,OrderBy:i.target.value}:l)))),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},i)))})}),(0,V.jsxs)(b.c,{children:[(0,V.jsx)(m.c,{onClick:()=>G(B),variant:"outlined",children:"Reset"}),(0,V.jsx)(m.c,{onClick:()=>Q(!1),color:"error",children:"close"})]})]})]})},L=e=>{let{dataArray:i}=e;const[l,t]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e=(Array.isArray(i)?[...i]:[]).map((e=>{var i,l,a,t,r;return{...e,M2_Avg:null!==(i=e.ALL_Avg_M2)&&void 0!==i?i:0,M3_Avg:null!==(l=e.ALL_Avg_M3)&&void 0!==l?l:0,M6_Avg:null!==(a=e.ALL_Avg_M6)&&void 0!==a?a:0,M9_Avg:null!==(t=e.ALL_Avg_M9)&&void 0!==t?t:0,M12_Avg:null!==(r=e.ALL_Avg_One_Year)&&void 0!==r?r:0,Billed_Qty:(0,n.SW)(e.StockTransaction,"bill_qty"),StockTransaction:e.StockTransaction.map((e=>{var i,l,a,t,r;return{...e,M2_Avg:null!==(i=e.M2_AVG_Qty)&&void 0!==i?i:0,M3_Avg:null!==(l=e.M3_AVG_Qty)&&void 0!==l?l:0,M6_Avg:null!==(a=e.M6_AVG_Qty)&&void 0!==a?a:0,M9_Avg:null!==(t=e.M9_AVG_Qty)&&void 0!==t?t:0,M12_Avg:null!==(r=e.One_Year_AVG_Qty)&&void 0!==r?r:0}}))}})).map((e=>({...e,Billed_Qty:(0,n.SW)(e.StockTransaction,"bill_qty")})));t(e)}),[i]),(0,V.jsx)(a.Fragment,{children:(0,V.jsx)(o.c,{dataArray:l,isExpendable:!0,columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"Billed_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}],expandableComp:e=>{let{row:i}=e;return(0,V.jsx)(o.c,{initialPageCount:10,dataArray:Array.isArray(i.StockTransaction)?i.StockTransaction:[],columns:[{Field_Name:"Item_Name_Modified",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})})},O=e=>{let{dataArray:i,days:l}=e;const[t,r]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e=(Array.isArray(i)?[...i]:[]).map((e=>{var i,a,t,r,s;return{...e,M2_Avg:null!==(i=(0,n.yy)(e.ALL_Avg_M2,(0,n.W8)(2)/2))&&void 0!==i?i:0,M3_Avg:null!==(a=(0,n.yy)(e.ALL_Avg_M3,(0,n.W8)(3)/3))&&void 0!==a?a:0,M6_Avg:null!==(t=(0,n.yy)(e.ALL_Avg_M6,(0,n.W8)(6)/6))&&void 0!==t?t:0,M9_Avg:null!==(r=(0,n.yy)(e.ALL_Avg_M9,(0,n.W8)(9)/9))&&void 0!==r?r:0,M12_Avg:null!==(s=(0,n.yy)(e.ALL_Avg_One_Year,(0,n.W8)(12)/12))&&void 0!==s?s:0,Billed_Qty:(0,n.SW)(e.StockTransaction,"bill_qty"),Billed_Avg:(0,n.SW)(e.StockTransaction,"bill_qty")/l,StockTransaction:e.StockTransaction.map((e=>{var i,l,a,t,r;return{...e,Grade_Item_Group:e.Item_Name_Modified,M2_Avg:null!==(i=(0,n.yy)(e.M2_AVG_Qty,(0,n.W8)(2)/2))&&void 0!==i?i:0,M3_Avg:null!==(l=(0,n.yy)(e.M3_AVG_Qty,(0,n.W8)(3)/3))&&void 0!==l?l:0,M6_Avg:null!==(a=(0,n.yy)(e.M6_AVG_Qty,(0,n.W8)(6)/6))&&void 0!==a?a:0,M9_Avg:null!==(t=(0,n.yy)(e.M9_AVG_Qty,(0,n.W8)(9)/9))&&void 0!==t?t:0,M12_Avg:null!==(r=(0,n.yy)(e.One_Year_AVG_Qty,(0,n.W8)(12)/12))&&void 0!==r?r:0}}))}})).map((e=>({...e,Billed_Qty:(0,n.SW)(e.StockTransaction,"bill_qty")})));r(e)}),[i]),(0,V.jsx)(a.Fragment,{children:(0,V.jsx)(o.c,{dataArray:t,isExpendable:!0,columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"Billed_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"Billed_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}],expandableComp:e=>{let{row:i}=e;return(0,V.jsx)(o.c,{initialPageCount:10,dataArray:Array.isArray(i.StockTransaction)?i.StockTransaction:[],columns:[{Field_Name:"Grade_Item_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})})};var k=l(31664),P=l(61988),Q=l(1908);const T=()=>{const e=JSON.parse(localStorage.getItem("user")),[i,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[u,_]=(0,a.useState)({Fromdate:(0,n.SO)(1),Todate:(0,n.Q7)(),ReportType:"LedgerBased",filterDialog:!1,reload:!0});(0,a.useEffect)((()=>{l(null),c(null),(0,Q.q)({address:"reports/salesReport/ledger?Fromdate=".concat(null===u||void 0===u?void 0:u.Fromdate,"&Todate=").concat(null===u||void 0===u?void 0:u.Todate),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{let{success:i,data:a,others:t}=e;if(i){const{ledgerDetails:e}=t,i=a.map((i=>{const l=e.filter((e=>(0,n.Qr)(i.Ledger_Tally_Id,e.Ledger_Id))),a=(0,n.SW)(l,"bill_qty");return{...i,LedgerSales:l,Transaction:l.length,Billed_Qty:a,BilledQtyAvg:(0,n.We)(l,"bill_qty"),Ledger_Name:i.Ledger_Name,M2_Avg:i.ALL_Avg_M2,M3_Avg:i.ALL_Avg_M3,M6_Avg:i.ALL_Avg_M6,M9_Avg:i.ALL_Avg_M9,M12_Avg:i.ALL_Avg_One_Year,Q_Pay_Days:i.Q_Pay_Days,Freq_Days:i.Freq_Days,Ledger_Alias:i.Ledger_Alias,Actual_Party_Name_with_Brokers:i.Actual_Party_Name_with_Brokers,Party_Name:i.Party_Name,Party_Location:i.Party_Location,Party_Nature:i.Party_Nature,Party_Group:i.Party_Group,Ref_Brokers:i.Ref_Brokers,Ref_Owners:i.Ref_Owners,Party_Mobile_1:i.Party_Mobile_1,Party_Mobile_2:i.Party_Mobile_2,Party_District:i.Party_District,File_No:i.File_No,Ledger_Tally_Id:i.Ledger_Tally_Id}}));l(i)}else l([])})).catch(console.error),(0,Q.q)({address:"reports/salesReport/products?Fromdate=".concat(null===u||void 0===u?void 0:u.Fromdate,"&Todate=").concat(null===u||void 0===u?void 0:u.Todate),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{if(e.success){var i;const l=Array.isArray(null===e||void 0===e||null===(i=e.others)||void 0===i?void 0:i.LOSAbstract)?e.others.LOSAbstract.map((i=>({...i,StockTransaction:Array.isArray(e.data)?[...e.data].filter((e=>e.Stock_Group===i.Stock_Group)):[]}))):[];c(l)}else c([])})).catch((e=>console.error(e)))}),[u.reload]);const m=()=>{_((e=>({...e,filterDialog:!1})))},v=(0,n.Oe)(new Date(u.Fromdate),new Date(u.Todate));return(0,V.jsx)(a.Fragment,{children:(0,V.jsxs)(t.c,{className:"mt-3",children:[(0,V.jsxs)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center fw-bold text-dark",style:{backgroundColor:"#eae0cc"},children:[(0,V.jsx)("span",{children:null===e||void 0===e?void 0:e.Company_Name}),(0,V.jsx)("span",{children:(0,V.jsxs)("select",{value:u.ReportType,className:"cus-inpt ps-3 w-100 rounded-5 border-0",onChange:e=>_((i=>({...i,ReportType:e.target.value}))),children:[(0,V.jsx)("option",{value:"LedgerBased",children:"Ledger Based"}),(0,V.jsx)("option",{value:"ProductBased",children:"Product Based"}),(0,V.jsx)("option",{value:"ProductDayAverage",children:"Product/Day Based"})]})})]}),(0,V.jsxs)(r.c,{children:[(0,V.jsxs)("div",{className:"mb-3",children:[(0,V.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5 me-1",value:u.Fromdate,onChange:e=>_((i=>({...i,Fromdate:e.target.value})))}),(0,V.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5",value:u.Todate,onChange:e=>_((i=>({...i,Todate:e.target.value})))}),(0,V.jsx)(s.c,{title:"Reload Data",children:(0,V.jsx)(d.c,{onClick:()=>_((e=>({...e,reload:!e.reload}))),size:"small",className:"ms-2",children:(0,V.jsx)(k.c,{})})}),(0,V.jsx)(s.c,{title:"Filters",children:(0,V.jsx)(d.c,{onClick:()=>_((e=>({...e,filterDialog:!0}))),size:"small",className:"d-md-none d-inline",children:(0,V.jsx)(P.c,{})})})]}),null===i&&"LedgerBased"===u.ReportType&&(0,V.jsx)("h6",{className:"blue-text text-center",children:"Fetching Ledger Based data..."}),null===o&&("ProductBased"===u.ReportType||"ProductDayAverage"===u.ReportType)&&(0,V.jsx)("h6",{className:"blue-text text-center",children:"Fetching Product Based data..."}),"LedgerBased"===u.ReportType&&Array.isArray(i)&&(0,V.jsx)(w,{filterDialog:u.filterDialog,closeDialog:m,dataArray:i}),"ProductBased"===u.ReportType&&Array.isArray(o)&&(0,V.jsx)(L,{filterDialog:u.filterDialog,closeDialog:m,dataArray:o}),"ProductDayAverage"===u.ReportType&&Array.isArray(o)&&(0,V.jsx)(O,{filterDialog:u.filterDialog,closeDialog:m,dataArray:o,days:v})]})]})})}}}]);
//# sourceMappingURL=8384.53a9b126.chunk.js.map
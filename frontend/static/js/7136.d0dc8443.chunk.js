"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7136],{74920:(e,a,t)=>{t.d(a,{c:()=>i});var l=t(39308),n=t(82496);const i=e=>{let{Value:a,Label:t}=e;return(0,n.jsxs)("div",{className:"grid-card d-flex align-items-center justify-content-center flex-column cus-shadow",children:[(0,n.jsx)("h1",{style:{fontSize:"45px",color:"blue",margin:"0 0.5em"},children:isNaN(a)?a||"-":a?(0,l.SA)(a):"0"}),(0,n.jsx)("h2",{className:"fa-20",children:t})]})}},17136:(e,a,t)=>{t.r(a),t.d(a,{default:()=>A});var l=t(69060),n=t(43692),i=t(5548),s=t(60476),r=t(84436),o=t(41459),c=t(46864),d=t(39308),u=t(74920),v=t(98944),x=t(1908),h=t(82496);const m=e=>{let{Value:a,Label:t}=e;return(0,h.jsx)(u.c,{Value:a,Label:t})},j=e=>{let{reqDate:a,reqLocation:t}=e;const[n,i]=(0,l.useState)([]),[s,r]=(0,l.useState)([]),[o,c]=(0,l.useState)({currentMonth:(0,d.WQ)()});(0,l.useEffect)((()=>{(0,x.q)({address:"dataEntry/driverActivities?reqDate=".concat(a,"&reqLocation=").concat(t)}).then((e=>{e.success&&i(e.data)})).catch((e=>console.error(e))),(0,x.q)({address:"dataEntry/driverActivities/tripBased?reqDate=".concat(a,"&reqLocation=").concat(t)}).then((e=>r(e.data))).catch((e=>console.error(e)))}),[a,t]);const u=(e=>{const a={};return e.forEach((e=>{e.LocationGroup.forEach((e=>{a[e.TripCategory]||(a[e.TripCategory]=0),e.TripDetails.forEach((t=>{var l;a[e.TripCategory]+=null===t||void 0===t||null===(l=t.Trips)||void 0===l?void 0:l.reduce(((e,a)=>e+((null===a||void 0===a?void 0:a.TonnageValue)||0)),0)}))}))})),a})(n),j=Object.values(u).reduce(((e,a)=>e+a),0);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"my-2",children:(0,h.jsxs)("div",{className:"cus-grid text-dark",children:[(0,h.jsx)(m,{Value:null===n||void 0===n?void 0:n.length,Label:"DRIVERS"}),(0,h.jsx)(m,{Value:null===s||void 0===s?void 0:s.reduce(((e,a)=>{var t;let l=0;return l+=(null===a||void 0===a||null===(t=a.Trips)||void 0===t?void 0:t.length)||0,l+e}),0),Label:"TRIPS"}),(0,h.jsx)(m,{Value:j,Label:"TOTAL"}),Object.entries(u).map((e=>{let[a,t]=e;return(0,h.jsx)(m,{Value:t,Label:a},a)}))]})}),(0,h.jsx)("input",{type:"month",className:"cus-inpt w-auto mt-3",value:o.currentMonth,onChange:e=>c((a=>({...a,currentMonth:e.target.value})))}),(0,h.jsx)("div",{className:"my-3 d-flex justify-content-center flex-wrap",children:(0,h.jsx)(v.e,{xAxis:[{scaleType:"band",data:null===s||void 0===s?void 0:s.map((e=>null===e||void 0===e?void 0:e.DriverName))}],series:[{data:null===s||void 0===s?void 0:s.map((e=>{var a;return null===e||void 0===e||null===(a=e.Trips)||void 0===a?void 0:a.length})),label:"TRIPS"},{data:null===s||void 0===s?void 0:s.map((e=>{var a;return Number(null===e||void 0===e||null===(a=e.Trips)||void 0===a?void 0:a.reduce(((e,a)=>{var t;let l=0;return l+=null===a||void 0===a||null===(t=a.Categories)||void 0===t?void 0:t.reduce(((e,a)=>{let t=0;return t+=(null===a||void 0===a?void 0:a.TonnageValue)||0,t+e}),0),e+l}),0)).toFixed(2)})),label:"TONNAGE"}],width:900,height:400,barLabel:"value",borderRadius:6})})]})},p=e=>{let{Value:a,Label:t}=e;return(0,h.jsx)(u.c,{Value:a,Label:t})},L=e=>{var a,t,n,i,s;let{reqDate:r,reqLocation:o}=e;const[c,u]=(0,l.useState)([]);return(0,l.useEffect)((()=>{(0,x.q)({address:"dataEntry/godownActivities/abstract?reqDate=".concat(r,"&reqLocation=").concat(o)}).then((e=>{e.success&&u(e.data)})).catch((e=>console.error(e)))}),[r,o]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"my-2",children:(0,h.jsxs)("div",{className:"cus-grid text-dark",children:[(0,h.jsx)(p,{Value:(null===(a=c[0])||void 0===a?void 0:a.PurchaseTotal)||0,Label:"Purchase"}),(0,h.jsx)(p,{Value:(null===(t=c[0])||void 0===t?void 0:t.SalesTotal)||0,Label:"Sales"}),(0,h.jsx)(p,{Value:(null===(n=c[0])||void 0===n?void 0:n.ManagementTotal)||0,Label:"Handling"}),(0,h.jsx)(p,{Value:null!==(i=c[0])&&void 0!==i&&i.EntryAt?(0,d.Gu)(null===(s=c[0])||void 0===s?void 0:s.EntryAt):"-",Label:"Updated"})]})})})},f=e=>{let{Value:a,Label:t}=e;return(0,h.jsx)(u.c,{Value:a,Label:t})},g=e=>{var a,t,n,i,s,r;let{reqDate:o,reqLocation:c}=e;const[u,v]=(0,l.useState)([]);return(0,l.useEffect)((()=>{(0,x.q)({address:"dataEntry/deliveryActivities/abstract?reqDate=".concat(o,"&reqLocation=").concat(c)}).then((e=>{e.success&&v(e.data)})).catch((e=>console.error(e)))}),[o,c]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"my-2",children:(0,h.jsxs)("div",{className:"cus-grid text-dark",children:[(0,h.jsx)(f,{Value:null!==(a=u[0])&&void 0!==a&&a.EntryTime?(0,d.Gu)(null===(t=u[0])||void 0===t?void 0:t.EntryTime):"-",Label:"Time"}),(0,h.jsx)(f,{Value:(null===(n=u[0])||void 0===n?void 0:n.OverAllSales)||0,Label:"Sales"}),(0,h.jsx)(f,{Value:(null===(i=u[0])||void 0===i?void 0:i.NotTaken)||0,Label:"NotTaken"}),(0,h.jsx)(f,{Value:(null===(s=u[0])||void 0===s?void 0:s.NotVerified)||0,Label:"NotVerified"}),(0,h.jsx)(f,{Value:(null===(r=u[0])||void 0===r?void 0:r.NotDelivery)||0,Label:"Not Delivery"})]})})})},q=e=>{let{Value:a,Label:t}=e;return(0,h.jsx)(u.c,{Value:a,Label:t})},b=e=>{var a,t;let{reqDate:n,reqLocation:i}=e;const[s,r]=(0,l.useState)([]);(0,l.useEffect)((()=>{(0,x.q)({address:"dataEntry/staffActivities/staffBased?reqDate=".concat(n,"&reqLocation=").concat(i)}).then((e=>{e.success&&r(e.data)})).catch((e=>console.error(e)))}),[n,i]);const o=()=>{let e=[];return null===s||void 0===s||s.forEach((a=>{var t;null===a||void 0===a||null===(t=a.Categories)||void 0===t||t.forEach((a=>{const t=e.findIndex((e=>(null===e||void 0===e?void 0:e.Category)===(null===a||void 0===a?void 0:a.Category)));var l,n,i;-1!==t?e[t]={...e[t],Total:(null===(l=e[t])||void 0===l?void 0:l.Total)+((null===a||void 0===a||null===(n=a.StaffDetails)||void 0===n?void 0:n.Tonnage)||0)}:e.push({Category:null===a||void 0===a?void 0:a.Category,Total:(null===a||void 0===a||null===(i=a.StaffDetails)||void 0===i?void 0:i.Tonnage)||0})}))})),e},c=null===(a=o())||void 0===a?void 0:a.reduce(((e,a)=>{let t=0;return t+="OTHERS 1 - PRINT"!==(null===a||void 0===a?void 0:a.Category)?null===a||void 0===a?void 0:a.Total:0,e+t}),0);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"my-2",children:(0,h.jsxs)("div",{className:"cus-grid text-dark",children:[(0,h.jsx)(q,{Value:(null===s||void 0===s?void 0:s.length)||0,Label:"Staffs"}),null===(t=o())||void 0===t?void 0:t.map(((e,a)=>(0,h.jsx)(q,{Value:null===e||void 0===e?void 0:e.Total,Label:null===e||void 0===e?void 0:e.Category},a))),(0,h.jsx)(q,{Value:c,Label:"Total"})]})})})},y=e=>{let{Value:a,Label:t}=e;return(0,h.jsx)(u.c,{Value:a,Label:t})},N=e=>{let{reqDate:a,reqLocation:t}=e;const[n,i]=(0,l.useState)([]);return(0,l.useEffect)((()=>{(0,x.q)({address:"dataEntry/weightCheckActivity?reqDate=".concat(a,"&reqLocation=").concat(t)}).then((e=>{e.success&&i(e.data)})).catch((e=>console.error(e)))}),[a,t]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"my-2",children:(0,h.jsxs)("div",{className:"cus-grid text-dark",children:[(0,h.jsx)(y,{Value:(null===n||void 0===n?void 0:n.length)||0,Label:"Items"}),Object.entries(null===n||void 0===n?void 0:n.reduce(((e,a)=>({Average_Input:e.Average_Input+=a.InputKG||0,Average_Output:e.Average_Output+=a.OutputKG||0})),{Average_Input:0,Average_Output:0})).map((e=>{let[a,t]=e;return(0,h.jsx)(y,{Value:parseInt(t/n.length),Label:null===a||void 0===a?void 0:a.replace("_"," ")},a)}))]})})})};var D=t(94968),T=t(47752),V=t(85400),S=t(72920),O=t(8472);const A=()=>{const[e,a]=(0,l.useState)({reqDate:(0,d.Q7)(),reqLocation:"MILL"}),[t,u]=(0,l.useState)([{name:"Driver Activities",isOpen:!1,icon:(0,h.jsx)(D.Dxr,{style:{fontSize:"40px"}})},{name:"Godown Activities",isOpen:!1,icon:(0,h.jsx)(V.mR0,{style:{fontSize:"40px"}})},{name:"Delivery Activities",isOpen:!1,icon:(0,h.jsx)(T.wTw,{style:{fontSize:"40px"}})},{name:"Staff Activities",isOpen:!1,icon:(0,h.jsx)(S.xBK,{style:{fontSize:"40px"}})},{name:"Weight Checking Activities",isOpen:!1,icon:(0,h.jsx)(O.iG5,{style:{fontSize:"40px"}})}]),v=(0,l.useMemo)((()=>[(0,h.jsx)(j,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,h.jsx)(L,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,h.jsx)(g,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,h.jsx)(b,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,h.jsx)(N,{reqDate:e.reqDate,reqLocation:e.reqLocation})]),[e.reqDate,e.reqLocation]);(0,l.useEffect)((()=>{u((e=>e.map(((e,a)=>({...e,comp:v[a]})))))}),[v]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,h.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,h.jsx)("label",{className:"mb-1",children:"DATE"}),(0,h.jsx)("input",{type:"date",className:"cus-inpt w-auto",value:e.reqDate,onChange:e=>a((a=>({...a,reqDate:e.target.value})))})]}),(0,h.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,h.jsx)("label",{className:"mb-1",children:"LOCATION"}),(0,h.jsxs)("select",{className:"cus-inpt w-auto",value:e.reqLocation,onChange:e=>a((a=>({...a,reqLocation:e.target.value}))),children:[(0,h.jsx)("option",{value:"MILL",children:"MILL"}),(0,h.jsx)("option",{value:"GODOWN",children:"GODOWN"})]})]})]}),t.map(((e,a)=>(0,h.jsxs)(n.c,{className:"mt-2",children:[(0,h.jsxs)("div",{className:"fa-17 fw-bold border-bottom p-0 d-flex justify-content-between align-items-center",onClick:()=>(e=>{u((a=>a.map(((a,t)=>t===e?{...a,isOpen:!a.isOpen}:a))))})(a),style:{cursor:"pointer"},children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-0",children:[(0,h.jsx)("span",{className:"p-4 bg-primary text-white",children:e.icon}),(0,h.jsx)("span",{className:"ps-3 fa-20",children:e.name})]}),(0,h.jsx)(i.c,{size:"small",className:"p-2",children:e.isOpen?(0,h.jsx)(o.c,{}):(0,h.jsx)(c.c,{})})]}),(0,h.jsx)(s.c,{in:e.isOpen,unmountOnExit:!0,children:(0,h.jsx)(r.c,{children:e.comp})})]},a)))]})}}}]);
//# sourceMappingURL=7136.d0dc8443.chunk.js.map
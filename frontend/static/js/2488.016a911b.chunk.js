"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[2488,8668],{52488:(e,a,s)=>{s.r(a),s.d(a,{default:()=>f});var l=s(77536),t=s(69060),r=s(56480),d=(s(21680),s(67472),s(68424)),c=s(39504),n=s(86e3),i=s(45180),o=s(5548),m=s(71448),u=s(52924),h=s(44380),v=s(82656),x=s(26773),p=s(4488),j=s(90048),b=s(32635),k=s(48668),_=s(1908),N=s(39308),T=s(82496);const g=(0,T.jsx)(d.c,{fontSize:"small"}),y=(0,T.jsx)(c.c,{fontSize:"small"}),f=()=>{var e;const a=localStorage.getItem("user"),s=JSON.parse(a),d={Task_Id:"",Task_Name:"",Task_Desc:"",Task_Group_Id:0,Entry_By:null===s||void 0===s?void 0:s.UserId,Entry_Date:"",Update_By:"",Update_Date:"",Task_Parameters:[]},[c,f]=(0,t.useState)([]),[C,D]=(0,t.useState)([]),[P,S]=(0,t.useState)([]),[w,I]=(0,t.useState)([]),[E,L]=(0,t.useState)(!1),{contextObj:M}=(0,t.useContext)(l.a),[O,z]=(0,t.useState)(!0),[q,H]=(0,t.useState)(d),[V,B]=(0,t.useState)(!1),[U,F]=(0,t.useState)("");(0,t.useEffect)((()=>{(0,_.q)({address:"taskManagement/tasks?Company_id=".concat(null===s||void 0===s?void 0:s.Company_id)}).then((e=>{e.success&&f(e.data)})).catch((e=>console.error(e)))}),[E]),(0,t.useEffect)((()=>{(0,_.q)({address:"masters/taskType/dropDown"}).then((e=>{e.success&&S(e.data)})).catch((e=>console.error(e))),(0,_.q)({address:"taskManagement/parameters"}).then((e=>{e.success&&I(e.data)})).catch((e=>console.error(e)))}),[]),(0,t.useEffect)((()=>{const e=[...c].filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(U.toLowerCase())))));D(e)}),[U,c]);const G=e=>{H(d),z(!O),e&&L(!E)},R=()=>{H(d),B(!1)},Q=[{name:"Task",selector:e=>null===e||void 0===e?void 0:e.Task_Name,sortable:!0},{name:"Task Group",selector:e=>null===e||void 0===e?void 0:e.Task_Group,sortable:!0},{name:"Task Describtion",selector:e=>null===e||void 0===e?void 0:e.Task_Desc,sortable:!0,width:"170px"},{name:"Created At",selector:e=>new Date(null===e||void 0===e?void 0:e.Entry_Date),cell:e=>new Date(null===e||void 0===e?void 0:e.Entry_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),sortable:!0},{name:"Actions",cell:e=>(0,T.jsxs)("div",{children:[1===Number(null===M||void 0===M?void 0:M.Edit_Rights)&&(0,T.jsx)(o.c,{onClick:()=>(e=>{H(e),z(!O)})(e),children:(0,T.jsx)(n.c,{})}),1===Number(null===M||void 0===M?void 0:M.Delete_Rights)&&(0,T.jsx)(o.c,{onClick:()=>(e=>{H(e),B(!0)})(e),children:(0,T.jsx)(i.c,{sx:{color:"#FF6865"}})})]})}];return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(k.default,{}),(0,T.jsxs)("div",{className:"card",children:[(0,T.jsxs)("div",{className:"card-header bg-white fw-bold d-flex align-items-center justify-content-between",children:[(0,T.jsx)("div",{className:"fa-15 flex-grow",children:O?"Task List":(0,N.Q$)(q.Task_Id)?"Edit Task":"Create Task"}),(0,T.jsx)("button",{onClick:()=>{G(!1)},className:"btn btn-primary rounded-5 px-3 py-1 fa-13 shadow",children:O?"Create Task":"Back"})]}),(0,T.jsx)("div",{className:"card-body p-0 overflow-hidden rounded-bottom-3",children:O?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:"d-flex justify-content-end",children:(0,T.jsx)("div",{className:"col-md-4 p-2",children:(0,T.jsx)("input",{type:"search",value:U,className:"cus-inpt",placeholder:"Search",onChange:function(e){const a=e.target.value;F(a)}})})}),(0,T.jsx)(b.cp,{columns:Q,data:C&&C.length?C:""===U?c:[],pagination:!0,highlightOnHover:!0,fixedHeader:!0,fixedHeaderScrollHeight:"68vh"})]}):(0,T.jsxs)("div",{className:"row px-3 py-2",children:[(0,T.jsxs)("div",{className:"col-md-4 p-2",children:[(0,T.jsx)("label",{children:"Task Name"}),(0,T.jsx)("input",{maxLength:150,onChange:e=>H({...q,Task_Name:e.target.value}),value:null===q||void 0===q?void 0:q.Task_Name,placeholder:"ex: File Checking",className:"cus-inpt"})]}),(0,T.jsxs)("div",{className:"col-md-4 p-2",children:[(0,T.jsx)("label",{children:"Task Group"}),(0,T.jsxs)("select",{value:q.Task_Group_Id,className:"cus-inpt",onChange:e=>H({...q,Task_Group_Id:e.target.value}),children:[(0,T.jsx)("option",{value:0,disabled:!0,children:"- select -"}),null===P||void 0===P?void 0:P.map(((e,a)=>0!==Number(null===e||void 0===e?void 0:e.Task_Type_Id)&&(0,T.jsx)("option",{value:null===e||void 0===e?void 0:e.Task_Type_Id,children:null===e||void 0===e?void 0:e.Task_Type},a)))]})]}),(0,T.jsxs)("div",{className:"col-md-4 p-2",children:[(0,T.jsx)("label",{children:"Base Task"}),(0,T.jsxs)("select",{value:q.Under_Task_Id,className:"cus-inpt",onChange:e=>H({...q,Under_Task_Id:e.target.value}),children:[(0,T.jsx)("option",{value:0,children:"Primary"}),null===c||void 0===c?void 0:c.map(((e,a)=>(0,T.jsx)("option",{value:null===e||void 0===e?void 0:e.Task_Id,children:null===e||void 0===e?void 0:e.Task_Name},a)))]})]}),(0,T.jsxs)("div",{className:"col-12",children:[(0,T.jsx)("label",{children:"Task Describtion"}),(0,T.jsx)("textarea",{className:"cus-inpt",value:q.Task_Desc,rows:"5",onChange:e=>H({...q,Task_Desc:e.target.value})})]}),(0,T.jsx)("div",{className:"col-md-12 p-2",children:(0,T.jsx)(m.c,{multiple:!0,id:"checkboxes-tags-demo",options:[...null===w||void 0===w?void 0:w.map((e=>({...e,Default_Value:""})))],disableCloseOnSelect:!0,getOptionLabel:e=>(null===e||void 0===e?void 0:e.Paramet_Name)+" - "+(null===e||void 0===e?void 0:e.Paramet_Data_Type),value:(null===q||void 0===q?void 0:q.Task_Parameters)||[],onChange:(e,a)=>H({...q,Task_Parameters:a}),renderOption:(e,a,s)=>{let{selected:l}=s;return(0,T.jsxs)("li",{...e,children:[(0,T.jsx)(u.c,{icon:g,checkedIcon:y,style:{marginRight:8},checked:l}),(null===a||void 0===a?void 0:a.Paramet_Name)+" - "+(null===a||void 0===a?void 0:a.Paramet_Data_Type)]})},className:"pt-2",isOptionEqualToValue:(e,a)=>Number(null===e||void 0===e?void 0:e.Paramet_Id)===Number(null===a||void 0===a?void 0:a.Paramet_Id),renderInput:e=>(0,T.jsx)(h.c,{...e,label:"Task Prarameters",placeholder:"Choose Task Parameters"})})}),null===q||void 0===q||null===(e=q.Task_Parameters)||void 0===e?void 0:e.map(((e,a)=>(0,T.jsxs)("div",{className:"col-md-4 p-2",children:[(0,T.jsx)("label",{className:"mb-2",children:null===e||void 0===e?void 0:e.Paramet_Name}),(0,T.jsx)("input",{type:(null===e||void 0===e?void 0:e.Paramet_Data_Type)||"text",className:"cus-inpt",onChange:e=>{const s=[...q.Task_Parameters];s[a]={...s[a],Default_Value:e.target.value},H({...q,Task_Parameters:s})},value:null===e||void 0===e?void 0:e.Default_Value,placeholder:"Default Value"})]},a)))]})}),!O&&(0,T.jsxs)("div",{className:"card-body text-end",children:[(0,T.jsx)("button",{className:"btn btn-light rounded-5 px-3 me-2",onClick:()=>G(!1),children:"Cancel"}),(0,T.jsx)("button",{className:"btn btn-primary rounded-5 px-3",onClick:async()=>{var e;const a=(null===q||void 0===q||null===(e=q.Task_Parameters)||void 0===e?void 0:e.map((e=>({...e,Param_Id:null===e||void 0===e?void 0:e.Paramet_Id}))))||[],s={...q,Task_Parameters:a};null!==q&&void 0!==q&&q.Task_Name&&null!==q&&void 0!==q&&q.Task_Desc?(0,_.q)({address:"taskManagement/tasks",method:(0,N.Q$)(s.Task_Id)?"PUT":"POST",bodyData:s}).then((e=>{e.success?(r.m4.success(e.message),G(!0)):r.m4.error(e.message)})).catch((e=>console.error(e))):r.m4.error("Enter Task Name and Describtion")},children:(0,N.Q$)(q.Task_Id)?"Update Task":"Create Task"})]})]}),(0,T.jsxs)(v.c,{open:V,onClose:R,"aria-labelledby":"create-dialog-title","aria-describedby":"create-dialog-description",children:[(0,T.jsx)(x.c,{className:"bg-primary text-white mb-2 px-3 py-2",children:"Confirmation"}),(0,T.jsxs)(p.c,{className:"p-4",children:["Do you want to delete the",(0,T.jsx)("span",{className:"text-primary",children:" "+(null===q||void 0===q?void 0:q.Task_Name)+" "}),"Task ?"]}),(0,T.jsxs)(j.c,{children:[(0,T.jsx)("button",{className:"btn btn-light rounded-5 px-3 me-1",onClick:R,children:"Cancel"}),(0,T.jsx)("button",{className:"btn btn-primary rounded-5 px-3",onClick:async()=>{null!==q&&void 0!==q&&q.Task_Id&&1===Number(M.Delete_Rights)&&(0,_.q)({address:"taskManagement/tasks",method:"DELETE",bodyData:{Task_Id:null===q||void 0===q?void 0:q.Task_Id}}).then((e=>{e.success?(r.m4.success(e.message),L(!E),R()):r.m4.error(e.message)})).catch((e=>console.error(e)))},children:"Delete"})]})]})]})}},48668:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var l=s(5548),t=s(60476),r=s(82656),d=s(26773),c=s(4488),n=s(90048),i=s(89e3),o=s(69060),m=s(56480),u=s(22727),h=s(99768),v=s(1908),x=s(82496);const p=e=>{var a;let{isOpened:s,disableCollapse:p}=e;const j={Paramet_Id:"",Paramet_Name:"",Paramet_Data_Type:""},[b,k]=(0,o.useState)([]),[_,N]=(0,o.useState)(!1),[T,g]=(0,o.useState)(!1),[y,f]=(0,o.useState)(j),[C,D]=(0,o.useState)(!1),[P,S]=(0,o.useState)(!!s),[w,I]=(0,o.useState)(""),[E,L]=(0,o.useState)([]);(0,o.useEffect)((()=>{(0,v.q)({address:"taskManagement/parameters"}).then((e=>{e.success&&k(e.data)})).catch((e=>console.error(e)))}),[C]);const M=()=>{N(!1),f(j)},O=()=>{f(j),g(!1)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"card mb-3",children:[(0,x.jsxs)("div",{className:"card-header bg-white fw-bold d-flex align-items-center justify-content-between",children:[(0,x.jsxs)("div",{className:"flex-grow-1 mb-0",children:[!p&&(0,x.jsx)(l.c,{size:"small",onClick:()=>S(!P),children:P?(0,x.jsx)(u.c,{style:{fontSize:"18px",color:"black"}}):(0,x.jsx)(h.c,{style:{fontSize:"18px",color:"black"}})}),"Task Parameters"]}),(0,x.jsx)("button",{onClick:()=>N(!0),className:"btn btn-primary rounded-5 px-3 py-1 fa-13 shadow",children:"Create Parameter"})]}),(0,x.jsx)(t.c,{in:P,unmountOnExit:!0,children:(0,x.jsxs)("div",{className:"card-body",style:{maxHeight:"40vh",overflowY:"scroll"},children:[(0,x.jsx)("div",{className:"row flex-row-reverse",children:(0,x.jsx)("div",{className:"col-md-4 pb-2",children:(0,x.jsx)("input",{type:"search",value:w,className:"cus-inpt",placeholder:"Search",onChange:function(e){const a=e.target.value;I(a);const s=b.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(a.toLowerCase())))));L(s)}})})}),(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsxs)("table",{className:"table",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"border fa-14",children:"Sno"}),(0,x.jsx)("th",{className:"border fa-14",children:"Parameter"}),(0,x.jsx)("th",{className:"border fa-14",children:"Data Type"})]})}),(0,x.jsx)("tbody",{children:null===(a=E.length>0?E:""===w?b:[])||void 0===a?void 0:a.map(((e,a)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border fa-14",children:a+1}),(0,x.jsx)("td",{className:"border fa-14",children:null===e||void 0===e?void 0:e.Paramet_Name}),(0,x.jsx)("td",{className:"border fa-14",children:null===e||void 0===e?void 0:e.Paramet_Data_Type})]},a)))})]})})]})})]}),(0,x.jsxs)(r.c,{open:_,onClose:M,maxWidth:"sm",fullWidth:!0,children:[(0,x.jsx)(d.c,{children:"Create Task Parameters"}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,v.q)({address:"taskManagement/parameters",method:"POST",bodyData:y}).then((e=>{e.success?(m.m4.success(e.message),D(!C)):m.m4.error(e.message)})).catch((e=>console.error(e))).finally(M)},children:[(0,x.jsx)(c.c,{children:(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsx)("table",{className:"table",children:(0,x.jsxs)("tbody",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0 fa-14",children:"Name"}),(0,x.jsx)("td",{className:"border-0 fa-14",children:(0,x.jsx)("input",{className:"cus-inpt",value:null===y||void 0===y?void 0:y.Paramet_Name,required:!0,onChange:e=>f({...y,Paramet_Name:e.target.value})})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0 fa-14",children:"Data Type"}),(0,x.jsx)("td",{className:"border-0 fa-14",children:(0,x.jsxs)("select",{className:"cus-inpt",value:null===y||void 0===y?void 0:y.Paramet_Data_Type,required:!0,onChange:e=>f({...y,Paramet_Data_Type:e.target.value}),children:[(0,x.jsx)("option",{value:"",disabled:!0,children:"Select Data Type"}),(0,x.jsx)("option",{value:"number",children:"number"}),(0,x.jsx)("option",{value:"text",children:"text"}),(0,x.jsx)("option",{value:"date",children:"date"})]})})]})]})})})}),(0,x.jsxs)(n.c,{children:[(0,x.jsx)(i.c,{onClick:M,type:"button",children:"cancel"}),(0,x.jsx)(i.c,{type:"submit",children:"Create Parameter"})]})]})]}),(0,x.jsxs)(r.c,{open:T,onClose:O,children:[(0,x.jsx)(d.c,{children:"Confirm Delete"}),(0,x.jsxs)(c.c,{children:["Do you want to delete the",(null===y||void 0===y?void 0:y.Paramet_Name)&&(0,x.jsx)("span",{className:"text-primary px-1",children:null===y||void 0===y?void 0:y.Paramet_Name}),"Parameter?"]}),(0,x.jsxs)(n.c,{children:[(0,x.jsx)(i.c,{onClick:O,children:"Cancel"}),(0,x.jsx)(i.c,{onClick:()=>{(0,v.q)({address:"taskManagement/parameters",method:"DELETE",bodyData:{Paramet_Id:y.Paramet_Id}}).then((e=>{e.success?(m.m4.success(e.message),D(!C)):m.m4.error(e.message)})).catch((e=>console.error(e))).finally(O)},children:"Delete"})]})]})]})}},39504:(e,a,s)=>{s.d(a,{c:()=>r});var l=s(27664),t=s(82496);const r=(0,l.c)((0,t.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox")},68424:(e,a,s)=>{s.d(a,{c:()=>r});var l=s(27664),t=s(82496);const r=(0,l.c)((0,t.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank")},45180:(e,a,s)=>{s.d(a,{c:()=>r});var l=s(27664),t=s(82496);const r=(0,l.c)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},86e3:(e,a,s)=>{s.d(a,{c:()=>r});var l=s(27664),t=s(82496);const r=(0,l.c)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},22727:(e,a,s)=>{s.d(a,{c:()=>r});var l=s(27664),t=s(82496);const r=(0,l.c)((0,t.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess")},99768:(e,a,s)=>{s.d(a,{c:()=>r});var l=s(27664),t=s(82496);const r=(0,l.c)((0,t.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")}}]);
//# sourceMappingURL=2488.016a911b.chunk.js.map
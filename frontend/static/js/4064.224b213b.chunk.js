"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4064],{14064:(e,i,t)=>{t.r(i),t.d(i,{default:()=>A});var s=t(69060),n=t(82656),c=t(4488),d=t(90048),a=t(89e3),o=t(27454),l=t(700),h=t(52924),r=t(5548),g=t(99904),u=t(85624),x=t(33856),j=t(58612),m=t(29504),v=t(56416),R=t(56480),S=(t(21680),t(30612)),f=t(77536),p=t(62344),b=t(91012),C=t(1908),_=t(82496);const I=(e,i,t,s,n)=>{s&&s(),(0,C.q)({address:"authorization/userRights",method:"POST",bodyData:{MenuId:i,User:Number(t),ReadRights:!0===e.readRights?1:0,AddRights:!0===e.addRights?1:0,EditRights:!0===e.editRights?1:0,DeleteRights:!0===e.deleteRights?1:0,PrintRights:!0===e.printRights?1:0},headers:{"Content-Type":"application/json"}}).then((e=>{e.success||R.m4.error(e.message)})).catch((e=>console.error(e))).finally((()=>{n&&n()}))},k=e=>{var i,t;let{UserId:R,data:S,loadingOn:f,loadingOff:b}=e;const[C,k]=(0,s.useState)(!1),[z,A]=(0,s.useState)(1===S.Read_Rights),[w,O]=(0,s.useState)(1===S.Add_Rights),[y,E]=(0,s.useState)(1===S.Edit_Rights),[U,N]=(0,s.useState)(1===S.Delete_Rights),[D,H]=(0,s.useState)(1===S.Print_Rights),[P,B]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{A(1===S.Read_Rights),O(1===S.Add_Rights),E(1===S.Edit_Rights),N(1===S.Delete_Rights),H(1===S.Print_Rights),B(!1)}),[S]),(0,s.useEffect)((()=>{!0===P&&I({readRights:z,addRights:w,editRights:y,deleteRights:U,printRights:D},S.id,R,f,b)}),[z,w,y,U,D]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(o.c,{hover:!0,children:[(0,_.jsx)(l.c,{children:S.id}),(0,_.jsx)(l.c,{children:S.name}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:z,onChange:()=>{B(!0),A(!z)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:w,onChange:()=>{B(!0),O(!w)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:y,onChange:()=>{B(!0),E(!y)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:U,onChange:()=>{B(!0),N(!U)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:D,onChange:()=>{B(!0),H(!D)}})}),(0,_.jsx)(l.c,{children:(null===S||void 0===S||null===(i=S.SubMenu)||void 0===i?void 0:i.length)>0&&(0,_.jsx)(r.c,{"aria-label":"expand row",size:"small",onClick:()=>k(!C),children:(0,_.jsx)(v.c,{})})})]}),(0,_.jsxs)(n.c,{open:C,onClose:()=>k(!C),maxWidth:"lg",fullWidth:!0,children:[(0,_.jsxs)(c.c,{children:[(0,_.jsx)("h3",{style:{paddingBottom:"0.5em"},children:"Sub Menu"}),(0,_.jsx)(g.c,{component:u.c,sx:{maxHeight:650},children:(0,_.jsxs)(x.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,_.jsx)(j.c,{children:(0,_.jsx)(o.c,{children:p.o$.map((e=>(0,_.jsx)(l.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"===e.headname?"Child Menu":e.headname},e.id)))})}),(0,_.jsx)(m.c,{children:null===S||void 0===S||null===(t=S.SubMenu)||void 0===t?void 0:t.map(((e,i)=>(0,_.jsx)(M,{data:e,UserId:R,loadingOn:f,loadingOff:b},i)))})]})})]}),(0,_.jsx)(d.c,{children:(0,_.jsx)(a.c,{onClick:()=>k(!C),color:"primary",children:"Close"})})]})]})},M=e=>{var i,t;let{data:R,UserId:S,loadingOn:f,loadingOff:b}=e;const[C,k]=(0,s.useState)(!1),[M,A]=(0,s.useState)(1===R.Read_Rights),[w,O]=(0,s.useState)(1===R.Add_Rights),[y,E]=(0,s.useState)(1===R.Edit_Rights),[U,N]=(0,s.useState)(1===R.Delete_Rights),[D,H]=(0,s.useState)(1===R.Print_Rights),[P,B]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{A(1===R.Read_Rights),O(1===R.Add_Rights),E(1===R.Edit_Rights),N(1===R.Delete_Rights),H(1===R.Print_Rights),B(!1)}),[R]),(0,s.useEffect)((()=>{!0===P&&I({readRights:M,addRights:w,editRights:y,deleteRights:U,printRights:D},R.id,S,f,b)}),[M,w,y,U,D]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(o.c,{hover:!0,children:[(0,_.jsx)(l.c,{children:R.id}),(0,_.jsx)(l.c,{children:R.name}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:M,onChange:()=>{B(!0),A(!M)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:w,onChange:()=>{B(!0),O(!w)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:y,onChange:()=>{B(!0),E(!y)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:U,onChange:()=>{B(!0),N(!U)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:D,onChange:()=>{B(!0),H(!D)}})}),(0,_.jsx)(l.c,{children:(null===R||void 0===R||null===(i=R.ChildMenu)||void 0===i?void 0:i.length)>0&&(0,_.jsx)(r.c,{"aria-label":"expand row",size:"small",onClick:()=>k(!C),children:(0,_.jsx)(v.c,{})})})]}),(0,_.jsxs)(n.c,{open:C,onClose:()=>k(!C),maxWidth:"lg",fullWidth:!0,children:[(0,_.jsxs)(c.c,{children:[(0,_.jsx)("h3",{style:{paddingBottom:"0.5em"},children:"Child Menu"}),(0,_.jsx)(g.c,{component:u.c,sx:{maxHeight:650},children:(0,_.jsxs)(x.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,_.jsx)(j.c,{children:(0,_.jsx)(o.c,{children:p.o$.map((e=>(0,_.jsx)(l.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:e.headname},e.id)))})}),(0,_.jsx)(m.c,{children:null===R||void 0===R||null===(t=R.ChildMenu)||void 0===t?void 0:t.map(((e,i)=>(0,_.jsx)(z,{data:e,UserId:S},i)))})]})})]}),(0,_.jsx)(d.c,{children:(0,_.jsx)(a.c,{onClick:()=>k(!C),color:"primary",children:"Close"})})]})]})},z=e=>{let{data:i,UserId:t,loadingOn:n,loadingOff:c}=e;const[d,a]=(0,s.useState)(1===i.Read_Rights),[r,g]=(0,s.useState)(1===i.Add_Rights),[u,x]=(0,s.useState)(1===i.Edit_Rights),[j,m]=(0,s.useState)(1===i.Delete_Rights),[v,R]=(0,s.useState)(1===i.Print_Rights),[S,f]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{a(1===i.Read_Rights),g(1===i.Add_Rights),x(1===i.Edit_Rights),m(1===i.Delete_Rights),R(1===i.Print_Rights),f(!1)}),[i]),(0,s.useEffect)((()=>{!0===S&&I({readRights:d,addRights:r,editRights:u,deleteRights:j,printRights:v},i.id,t,n,c)}),[d,r,u,j,v]),(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(o.c,{hover:!0,children:[(0,_.jsx)(l.c,{children:i.id}),(0,_.jsx)(l.c,{children:i.name}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:d,onChange:()=>{f(!0),a(!d)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:r,onChange:()=>{f(!0),g(!r)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:u,onChange:()=>{f(!0),x(!u)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:j,onChange:()=>{f(!0),m(!j)}})}),(0,_.jsx)(l.c,{children:(0,_.jsx)(h.c,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:v,onChange:()=>{f(!0),R(!v)}})}),(0,_.jsx)(l.c,{})]})})},A=e=>{const[i,t]=(0,s.useState)([]),[n,c]=(0,s.useState)([]),[d,a]=(0,s.useState)([]),h=localStorage.getItem("user"),r=JSON.parse(h),[v,R]=(0,s.useState)({value:null===r||void 0===r?void 0:r.Autheticate_Id,label:null===r||void 0===r?void 0:r.Name}),[I,M]=(0,s.useState)(null===r||void 0===r?void 0:r.UserId),{contextObj:A}=(0,s.useContext)(f.a);(0,s.useEffect)((()=>{(0,C.q)({address:"authorization/userRights",headers:{Authorization:v.value}}).then((e=>{e.success&&(t(e.data),c(e.others.subRoutings))}))}),[v]),(0,s.useEffect)((()=>{(0,C.q)({address:"masters/users?Company_id=".concat(null===r||void 0===r?void 0:r.Company_id)}).then((e=>{e.success&&a(e.data)})).catch((e=>console.log(e)))}),[null===r||void 0===r?void 0:r.Company_id]);return 1===Number(null===A||void 0===A?void 0:A.Read_Rights)?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"row",children:(0,_.jsx)("div",{className:"col-sm-4 pt-1",children:(0,_.jsx)(S.cp,{value:v,onChange:e=>(e=>{if(e){const i=d.find((i=>i.Autheticate_Id===e.value));R({value:null===i||void 0===i?void 0:i.Autheticate_Id,label:i.Name}||{value:null===r||void 0===r?void 0:r.Autheticate_Id,label:null===r||void 0===r?void 0:r.Name}),M((null===i||void 0===i?void 0:i.UserId)||r.UserId)}})(e),options:[...d.map((e=>({value:e.Autheticate_Id,label:e.Name})))],styles:p.cF,isSearchable:!0,placeholder:"Select User"})})}),(0,_.jsx)("br",{}),(0,_.jsx)("h6",{style:{marginBottom:"0.5em",borderBottom:"2px solid blue",width:"fit-content"},children:"Menu Access Control"}),(0,_.jsx)(g.c,{component:u.c,sx:{maxHeight:650},title:"Menu Access Control",children:(0,_.jsxs)(x.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,_.jsx)(j.c,{children:(0,_.jsx)(o.c,{children:p.o$.map((e=>(0,_.jsx)(l.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"===e.headname?"Sub Menu":e.headname},e.id)))})}),(0,_.jsx)(m.c,{children:i.map(((i,t)=>(0,_.jsx)(k,{data:i,UserId:I,loadingOn:e.loadingOn,loadingOff:e.loadingOff},t)))})]})}),(0,_.jsx)("br",{}),(0,_.jsx)("h6",{style:{marginBottom:"0.5em",borderBottom:"2px solid blue",width:"fit-content"},children:"Sub-Routings Access Control"}),(0,_.jsx)(g.c,{component:u.c,sx:{maxHeight:650},title:"Sub-Routings Access Control",children:(0,_.jsxs)(x.c,{stickyHeader:!0,"aria-label":"simple table",children:[(0,_.jsx)(j.c,{children:(0,_.jsx)(o.c,{children:p.o$.map((e=>(0,_.jsx)(l.c,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"===e.headname?"Sub Menu":e.headname},e.id)))})}),(0,_.jsx)(m.c,{children:n.map(((i,t)=>(0,_.jsx)(z,{data:i,UserId:I,loadingOn:e.loadingOn,loadingOff:e.loadingOff},t)))})]})})]}):(0,_.jsx)(b.c,{})}}}]);
//# sourceMappingURL=4064.224b213b.chunk.js.map
"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8776],{64568:(e,l,a)=>{a.d(l,{c:()=>s});var d=a(82496);const s=()=>(0,d.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},18776:(e,l,a)=>{a.r(l),a.d(l,{default:()=>O});var d=a(69060),s=a(3358),t=a(5548),i=a(43692),r=a(78092),o=a(84436),n=a(82656),c=a(26773),u=a(4488),v=a(90048),m=a(89e3),h=(a(67472),a(30612)),_=a(62344),x=a(39308),b=a(71412),j=a(61988),p=a(80236),g=a(1908),N=a(13724),I=a(56480),y=a(96064),S=a(86e3),C=a(45180),P=a(80156),D=a(36992),f=a(56084),T=a(64568),R=a(82496);const A=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1){case 0:return(0,x.kR)(e*(l/100));case 1:return(0,x.kR)(e-e*(100/(100+l)));default:return 0}},G=function(){var e;let l=arguments.length>1?arguments[1]:void 0;return null!==(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((e=>(0,x.Qr)(e.Product_Id,l))))&&void 0!==e?e:{}},B=e=>{let{editValues:l,loadingOn:a,loadingOff:s,reload:i,switchScreen:r,editOn:o}=e;const b=JSON.parse(localStorage.getItem("user")),[j,p]=(0,d.useState)([]),[B,F]=(0,d.useState)([]),[Q,w]=(0,d.useState)([]),[O,L]=(0,d.useState)([]),[U,V]=(0,d.useState)({}),H={Company_Id:null===b||void 0===b?void 0:b.Company_id,Do_Date:(0,x.Q7)(),Retailer_Id:"",Retailer_Name:"Select",Delivery_Status:1,Delivery_Person_Id:0,Payment_Ref_No:"",Delivery_Person_Name:"",Payment_Mode:0,Payment_Status:0,Branch_Id:null===b||void 0===b?void 0:b.BranchId,Narration:"",Created_by:null===b||void 0===b?void 0:b.UserId,Product_Array:[],So_No:null===l||void 0===l?void 0:l.So_Id,GST_Inclusive:1,IS_IGST:0},M={Item_Id:"",ItemName:"Search Item",Bill_Qty:0,Item_Rate:0,UOM:"",Units:"",Product:{},Group:"Search Group",GroupID:"",Brand:"Search Brand",BrandID:"",Amount:0},[k,E]=(0,d.useState)(H),[q,X]=(0,d.useState)([]),[z,W]=(0,d.useState)(M),[Y,J]=(0,d.useState)(!1),[K,Z]=(0,d.useState)(!1),$=(0,x.Qr)(k.GST_Inclusive,0),ee=(0,x.Qr)(k.GST_Inclusive,1),le=(0,x.Qr)(k.GST_Inclusive,2),ae=(0,x.Qr)(k.IS_IGST,1),[de,se]=(0,d.useState)(null),[te,ie]=(0,d.useState)([]);(0,d.useEffect)((()=>{var e;(0,x.CY)(l)?(E((e=>{var a;return{...e,Do_Id:null===l||void 0===l?void 0:l.Do_Id,Do_Date:null!==(a=null===l||void 0===l?void 0:l.Do_Date)&&void 0!==a?a:(0,x.Q7)(),Retailer_Id:null===l||void 0===l?void 0:l.Retailer_Id,Retailer_Name:null===l||void 0===l?void 0:l.Retailer_Name,Delivery_Status:null===l||void 0===l?void 0:l.Delivery_Status,Delivery_Person_Id:null===l||void 0===l?void 0:l.Delivery_Person_Id,Delivery_Person_Name:null===l||void 0===l?void 0:l.Delivery_Person_Name,Payment_Status:null===l||void 0===l?void 0:l.Payment_Status,Payment_Mode:null===l||void 0===l?void 0:l.Payment_Mode,Branch_Id:null===l||void 0===l?void 0:l.Branch_Id,Narration:null===l||void 0===l?void 0:l.Narration,Created_by:null===l||void 0===l?void 0:l.Created_by,Payment_Ref_No:null===l||void 0===l?void 0:l.Payment_Ref_No,So_No:null===l||void 0===l?void 0:l.So_Id,GST_Inclusive:null===l||void 0===l?void 0:l.GST_Inclusive,IS_IGST:null===l||void 0===l?void 0:l.IS_IGST}})),X(null===l||void 0===l||null===(e=l.Products_List)||void 0===e?void 0:e.map((e=>{var l,a,d,s,t,i,r,o,n,c,u,v,m,h,_,b,j;return{...e,Item_Id:null!==(l=e.Item_Id)&&void 0!==l?l:"",ItemName:null!==(a=null===e||void 0===e?void 0:e.Product_Name)&&void 0!==a?a:"",Bill_Qty:null!==(d=null===e||void 0===e?void 0:e.Bill_Qty)&&void 0!==d?d:0,Item_Rate:null!==(s=null===e||void 0===e?void 0:e.Item_Rate)&&void 0!==s?s:0,UOM:null!==(t=null===e||void 0===e?void 0:e.Unit_Id)&&void 0!==t?t:"",Units:null!==(i=null===e||void 0===e?void 0:e.Units)&&void 0!==i?i:"",Product:null!==(r={...e,Cgst_P:null!==(o=Number(null===(n=G(B,e.Item_Id))||void 0===n?void 0:n.Cgst_P))&&void 0!==o?o:0,Sgst_P:null!==(c=Number(null===(u=G(B,e.Item_Id))||void 0===u?void 0:u.Sgst_P))&&void 0!==c?c:0,Igst_P:null!==(v=Number(null===(m=G(B,e.Item_Id))||void 0===m?void 0:m.Igst_P))&&void 0!==v?v:0,Gst_P:null!==(h=(0,x.Q5)(null===(_=G(B,e.Item_Id))||void 0===_?void 0:_.Cgst_P,null===(b=G(B,e.Item_Id))||void 0===b?void 0:b.Sgst_P))&&void 0!==h?h:0})&&void 0!==r?r:{},Group:"Search Group",GroupID:"",Brand:"Search Brand",BrandID:"",Amount:null!==(j=null===e||void 0===e?void 0:e.Amount)&&void 0!==j?j:0}}))),J(!0),null!==l&&void 0!==l&&l.Latitude&&null!==l&&void 0!==l&&l.Longitude||(async()=>{try{const e=await new Promise(((e,l)=>{navigator.geolocation.getCurrentPosition(e,l)})),{latitude:l,longitude:a}=e.coords;E((e=>({...e,Delivery_Latitude:l,Delivery_Longitude:a})))}catch(e){console.error(e),I.m4.warn("Unable to fetch location. Allow location access.")}})()):(E(H),X([]),J(!1))}),[l,B]),(0,d.useEffect)((()=>{(0,g.q)({address:"masters/retailers/dropDown?Company_Id=".concat(null===b||void 0===b?void 0:b.Company_id)}).then((e=>{e.success&&p(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/uom"}).then((e=>{e.success&&L(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/products?Company_Id=".concat(null===b||void 0===b?void 0:b.Company_id)}).then((e=>{if(e.success){F(e.data);const l=(0,x.Un)(e.data,"Brand",["Brand_Name"]);w(l)}else F([]),w([])})).catch((e=>console.error(e))),(0,g.q)({address:"masters/users/salesPerson/dropDown?Company_id=".concat(null===b||void 0===b?void 0:b.Company_id)}).then((e=>{e.success&&ie(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/company?Company_id=".concat(null===b||void 0===b?void 0:b.Company_id)}).then((e=>{e.success&&V(null!==e&&void 0!==e&&e.data[0]?null===e||void 0===e?void 0:e.data[0]:{})})).catch((e=>console.error(e)))}),[null===b||void 0===b?void 0:b.Company_id]);const re=()=>{Z(!1),W(M)},oe=q.reduce(((e,l)=>{const a=(0,x.kR)(null===l||void 0===l?void 0:l.Item_Rate),d=parseInt(null===l||void 0===l?void 0:l.Bill_Qty),s=(0,x.eX)(d,a);if(ee||le)return e+s;if($){const t=G(B,l.Item_Id),i=(0,x.Qr)(ae,1)?t.Igst_P:t.Gst_P;return e+(s+A(0,a,i)*d)}}),0),ne=q.reduce(((e,l)=>{const a=(0,x.kR)(null===l||void 0===l?void 0:l.Item_Rate),d=parseInt(null===l||void 0===l?void 0:l.Bill_Qty)||0;if(le)return e.TotalValue+=(0,x.eX)(d,a),e;const s=G(B,l.Item_Id),t=ae?s.Igst_P:s.Gst_P;if(ee){const l=A(1,a,t),s=(0,x.od)(a,l);e.TotalTax+=(0,x.eX)(d,l),e.TotalValue+=(0,x.eX)(d,s)}if($){const l=A(0,a,t);e.TotalTax+=(0,x.eX)(d,l),e.TotalValue+=(0,x.eX)(d,a)}return e}),{TotalValue:0,TotalTax:0});(0,d.useEffect)((()=>{X((e=>null===e||void 0===e?void 0:e.map((e=>({...e,Amount:(0,x.eX)(null===e||void 0===e?void 0:e.Item_Rate,null===e||void 0===e?void 0:e.Bill_Qty)})))))}),[k.GST_Inclusive]);return(0,R.jsxs)(R.Fragment,{children:[o&&(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("h6",{className:"fa-18 m-0 p-3 py-2 d-flex align-items-center justify-content-between",children:"Create Delivery Order"})}),(0,R.jsxs)("div",{className:"p-3 pt-0",children:[(0,R.jsxs)("div",{className:"p-3 bg-light rounded-3 mb-3 shadow-sm",children:[(0,R.jsx)("h5",{className:"border-bottom",children:"From:"}),(0,R.jsxs)("div",{className:"row",children:[(0,R.jsx)("div",{className:"col-lg-8 col-md-7",children:(0,R.jsx)("table",{className:"table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsx)("tr",{children:(0,R.jsx)("td",{className:"border-0 bg-light",colSpan:2,children:null===U||void 0===U?void 0:U.Company_Name})}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Address:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:null===U||void 0===U?void 0:U.Company_Address})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Phone:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:null===U||void 0===U?void 0:U.Telephone_Number})]})]})})}),(0,R.jsx)("div",{className:"col-lg-4 col-md-5",children:(0,R.jsx)("table",{className:"table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Date:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:(0,R.jsx)("input",{type:"date",value:null!==k&&void 0!==k&&k.Do_Date?(0,x.Q7)(null===k||void 0===k?void 0:k.Do_Date):"",onChange:e=>E({...k,Do_Date:e.target.value}),className:"cus-inpt p-1"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Invoice Type:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:(0,R.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>E({...k,GST_Inclusive:Number(e.target.value)}),value:k.GST_Inclusive,children:[(0,R.jsx)("option",{value:1,children:"Inclusive Tax"}),(0,R.jsx)("option",{value:0,children:"Exclusive Tax"}),(0,R.jsx)("option",{value:2,children:"Not Taxable"})]})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Tax Type:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:(0,R.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>E({...k,IS_IGST:Number(e.target.value)}),value:k.IS_IGST,children:[(0,R.jsx)("option",{value:"0",children:"GST"}),(0,R.jsx)("option",{value:"1",children:"IGST"})]})})]})]})})})]})]}),(0,R.jsxs)("div",{className:"p-3 bg-light rounded-3 mb-3 shadow-sm",children:[(0,R.jsx)("h5",{className:"border-bottom",children:"To:"}),(0,R.jsxs)("div",{className:"row ",children:[(0,R.jsx)("div",{className:"col-md-6",children:(0,R.jsx)("table",{className:"table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Retailer Name:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:(0,R.jsx)(h.cp,{value:{value:null===k||void 0===k?void 0:k.Retailer_Id,label:null===k||void 0===k?void 0:k.Retailer_Name},onChange:e=>E({...k,Retailer_Id:e.value,Retailer_Name:e.label}),options:[{value:"",label:"select",isDisabled:!0},...j.map((e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name})))],styles:_.cF,isSearchable:!0,placeholder:"Retailer Name",maxMenuHeight:200})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Address:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:b.Name})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Phone:"}),(0,R.jsx)("td",{className:"border-0 bg-light"})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Delivery_Status:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:(0,R.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>E({...k,Delivery_Status:e.target.value}),value:k.Delivery_Status?k.Delivery_Status:1,children:[(0,R.jsx)("option",{value:5,children:"Pending"}),(0,R.jsx)("option",{value:7,children:"Delivered"}),(0,R.jsx)("option",{value:6,children:"Return"})]})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Payment_Mode:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:(0,R.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>E({...k,Payment_Mode:e.target.value}),value:k.Payment_Mode||0,children:[(0,R.jsx)("option",{value:0}),(0,R.jsx)("option",{value:1,children:"Cash"}),(0,R.jsx)("option",{value:3,children:"QR-Pay"}),(0,R.jsx)("option",{value:2,children:"G-Pay"})]})})]})]})})}),(0,R.jsx)("div",{className:"col-md-6",children:(0,R.jsx)("table",{className:"table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Q-Pay:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:10})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Frequency Days:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:20})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Payment_Status:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:(0,R.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>E({...k,Payment_Status:Number(e.target.value)}),value:k.Payment_Status,children:[(0,R.jsx)("option",{value:1,children:"Pending"}),(0,R.jsx)("option",{value:3,children:"Complete"})]})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Delivery Person Name:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:(0,R.jsx)(h.cp,{value:de?{value:de.UserId,label:de.Name}:{value:null===k||void 0===k?void 0:k.Delivery_Person_Id,label:null===k||void 0===k?void 0:k.Delivery_Person_Name},onChange:e=>{se(e?{UserId:e.value,Name:e.label}:null)},options:[{value:"",label:"Select",isDisabled:!0},...te.map((e=>({value:e.UserId,label:e.Name})))],styles:_.cF,isSearchable:!0,placeholder:de?de.Name:"Sales Person Name"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 bg-light",children:"Payment Reference No:"}),(0,R.jsx)("td",{className:"border-0 bg-light",children:(0,R.jsx)("input",{type:"text",className:"cus-inpt p-1",onChange:e=>E({...k,Payment_Ref_No:e.target.value}),value:null===k||void 0===k?void 0:k.Payment_Ref_No,placeholder:"Enter Payment Reference Number"})})]})]})})})]})]}),(0,R.jsx)("div",{className:"d-flex align-items-end justify-content-end flex-wrap mb-3",children:(0,R.jsx)(m.c,{onClick:()=>Z(!0),sx:{ml:1},variant:"outlined",startIcon:(0,R.jsx)(y.c,{}),children:"Add Product"})}),(0,R.jsx)(N.c,{dataArray:q,columns:[{isCustomCell:!0,Cell:e=>{var l;let{row:a}=e;return null===a||void 0===a||null===(l=a.Product)||void 0===l?void 0:l.Product_Name},ColumnHeader:"Product",isVisible:1},{isCustomCell:!0,Cell:e=>{var l;let{row:a}=e;return null===a||void 0===a||null===(l=a.Product)||void 0===l?void 0:l.HSN_Code},ColumnHeader:"HSN Code",isVisible:1},{isCustomCell:!0,Cell:e=>{var l;let{row:a}=e;return(null===a||void 0===a?void 0:a.Bill_Qty)+" "+(null!==(l=null===a||void 0===a?void 0:a.Units)&&void 0!==l?l:"")},ColumnHeader:"Quantity",isVisible:1,align:"center"},{Field_Name:"Item_Rate",ColumnHeader:"Rate",Fied_Data:"number",isVisible:1,align:"right"},{ColumnHeader:"Taxable Amount",isCustomCell:!0,Cell:e=>{var l,a,d,s,t;let{row:i}=e;const r=null!==(l=ae?null===i||void 0===i||null===(a=i.Product)||void 0===a?void 0:a.Igst_P:(0,x.Q5)(null===i||void 0===i||null===(d=i.Product)||void 0===d?void 0:d.Cgst_P,null===i||void 0===i||null===(s=i.Product)||void 0===s?void 0:s.Sgst_P))&&void 0!==l?l:0,o=null!==(t=i.Amount)&&void 0!==t?t:0,n=A(k.GST_Inclusive,o,r);return(0,x.SA)(ee?o-n:o)},isVisible:1,align:"right"},{isCustomCell:!0,Cell:e=>{var l,a,d,s,t;let{row:i}=e;const r=null!==(l=ae?null===i||void 0===i||null===(a=i.Product)||void 0===a?void 0:a.Igst_P:(0,x.Q5)(null===i||void 0===i||null===(d=i.Product)||void 0===d?void 0:d.Cgst_P,null===i||void 0===i||null===(s=i.Product)||void 0===s?void 0:s.Sgst_P))&&void 0!==l?l:0,o=null!==(t=i.Amount)&&void 0!==t?t:0;return(0,x.SA)(A(k.GST_Inclusive,o,r))+" ("+r+"%)"},ColumnHeader:"Tax",isVisible:1,align:"right"},{ColumnHeader:"Amount",isCustomCell:!0,Cell:e=>{var l,a,d,s,t;let{row:i}=e;const r=null!==(l=ae?null===i||void 0===i||null===(a=i.Product)||void 0===a?void 0:a.Igst_P:(0,x.Q5)(null===i||void 0===i||null===(d=i.Product)||void 0===d?void 0:d.Cgst_P,null===i||void 0===i||null===(s=i.Product)||void 0===s?void 0:s.Sgst_P))&&void 0!==l?l:0,o=null!==(t=i.Amount)&&void 0!==t?t:0,n=A(k.GST_Inclusive,o,r);return(0,x.SA)((0,x.Qr)(k.GST_Inclusive,1)?o:o+n)},isVisible:1,align:"right"},{isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(t.c,{onClick:()=>{var e,a,d,s,t;W({Item_Id:l.Item_Id,ItemName:null===l||void 0===l||null===(e=l.Product)||void 0===e?void 0:e.Product_Name,Bill_Qty:l.Bill_Qty,Item_Rate:l.Item_Rate,UOM:l.Product.UOM_Id,Product:l.Product,Group:null===l||void 0===l||null===(a=l.Product)||void 0===a?void 0:a.Pro_Group,GroupID:null===l||void 0===l||null===(d=l.Product)||void 0===d?void 0:d.Product_Group,Brand:null===l||void 0===l||null===(s=l.Product)||void 0===s?void 0:s.Brand_Name,BrandID:null===l||void 0===l||null===(t=l.Product)||void 0===t?void 0:t.Brand,Amount:null===l||void 0===l?void 0:l.Amount}),Z(!0)},size:"small",children:(0,R.jsx)(S.c,{})}),(0,R.jsx)(t.c,{size:"small",onClick:()=>{X((e=>e.filter((e=>!(0,x.Qr)(e.Item_Id,l.Item_Id)))))},color:"error",children:(0,R.jsx)(C.c,{})})]})},ColumnHeader:"Action",isVisible:1}],EnableSerialNumber:!0,CellSize:"small",disablePagination:!0}),q.length>0&&(0,R.jsx)("div",{className:"d-flex justify-content-end py-2",children:(0,R.jsx)("table",{className:"table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{children:[(0,R.jsxs)("td",{className:"border p-2",rowSpan:(0,x.Qr)(k.IS_IGST,1)?4:5,children:["Total in words: ",(0,x.m4)(parseInt(oe))]}),(0,R.jsx)("td",{className:"border p-2",children:"Total Taxable Amount"}),(0,R.jsx)("td",{className:"border p-2",children:(0,x.SA)(ne.TotalValue)})]}),(0,x.Qr)(k.IS_IGST,1)?(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2",children:"IGST"}),(0,R.jsx)("td",{className:"border p-2",children:(0,x.SA)(ne.TotalTax)})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2",children:"CGST"}),(0,R.jsx)("td",{className:"border p-2",children:(0,x.SA)(ne.TotalTax/2)})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2",children:"SGST"}),(0,R.jsx)("td",{className:"border p-2",children:(0,x.SA)(ne.TotalTax/2)})]})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2",children:"Round Off"}),(0,R.jsx)("td",{className:"border p-2",children:(0,x.SA)(oe-(ne.TotalValue+ne.TotalTax))})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2",children:"Total"}),(0,R.jsx)("td",{className:"border p-2",children:(0,x.SA)(oe)})]})]})})}),(0,R.jsx)("p",{className:"fa-15 mt-3 m-0",children:"Narration"}),(0,R.jsx)("textarea",{className:"cus-inpt ",value:k.Narration,onChange:e=>E((l=>({...l,Narration:e.target.value})))}),(0,R.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,R.jsx)(m.c,{variant:"outlined",startIcon:(0,R.jsx)(P.c,{}),onClick:r,children:"cancel"}),(0,R.jsx)(m.c,{onClick:()=>{if((null===q||void 0===q?void 0:q.length)>0&&null!==k&&void 0!==k&&k.Retailer_Id)a(),(0,g.q)({address:"delivery/deliveryOrder",method:Y&&!o?"PUT":"POST",bodyData:{...k,Product_Array:q.filter((e=>(0,x.QT)(null===e||void 0===e?void 0:e.Bill_Qty,0))),Delivery_Person_Id:de?de.UserId:Number(null===k||void 0===k?void 0:k.Delivery_Person_Id),Payment_Status:null!==k&&void 0!==k&&k.Payment_Status?Number(null===k||void 0===k?void 0:k.Payment_Status):1,Payment_Ref_No:null===k||void 0===k?void 0:k.Payment_Ref_No,Delivery_Status:null!==k&&void 0!==k&&k.Delivery_Status?Number(null===k||void 0===k?void 0:k.Delivery_Status):1,Payment_Mode:null!==k&&void 0!==k&&k.Payment_Mode?Number(null===k||void 0===k?void 0:k.Payment_Mode):1}}).then((e=>{e.success?(I.m4.success(null===e||void 0===e?void 0:e.message),E(H),X([]),i()):I.m4.error(null===e||void 0===e?void 0:e.message)})).catch((e=>console.error(e))).finally((()=>s()));else{if(q.length<=0)return I.m4.error("Enter any one product quantity");if(null===k||void 0===k||!k.Retailer_Id)return I.m4.error("Select Retailer"),I.m4.error("Select Retailer")}},sx:{ml:1},variant:"outlined",color:"success",startIcon:(0,R.jsx)(D.c,{}),disabled:0===(null===q||void 0===q?void 0:q.length)||!(null!==k&&void 0!==k&&k.Retailer_Id),children:"Save"})]})]}),(0,R.jsxs)(n.c,{open:K,onClose:re,maxWidth:"sm",fullWidth:!0,children:[(0,R.jsx)(c.c,{className:"border-bottom",children:(0,R.jsx)("span",{children:"Add Products Details"})}),(0,R.jsxs)("form",{onSubmit:e=>{e.preventDefault(),z.Item_Id&&z.Bill_Qty&&z.Item_Rate?(((e,l,a,d,s,t)=>{const i=q.findIndex((l=>(0,x.Qr)(l.Item_Id,e)));if(-1!==i){const e=[...q];e[i].Bill_Qty=Number(l),e[i].Item_Rate=Number(a),e[i].UOM=s,e[i].Units=t,e[i].Amount=(0,x.eX)(l,a),e[i]={...e[i],Product:d},X(e)}else X((i=>[...i,{Item_Id:e,Bill_Qty:Number(l),Item_Rate:Number(a),UOM:s,Units:t,Amount:(0,x.eX)(l,a),Product:d}]))})(z.Item_Id,z.Bill_Qty,z.Item_Rate,z.Product,z.UOM,z.Units),re()):I.m4.warn(z.Item_Id?z.Bill_Qty?"Enter Rate or Amount":"Enter Quantity":"Select Product")},children:[(0,R.jsx)(u.c,{children:(0,R.jsxs)("div",{className:"row pb-5",children:[(0,R.jsxs)("div",{className:"col-6 p-2",children:[(0,R.jsx)("label",{children:"Brand"}),(0,R.jsx)(h.cp,{value:{value:z.BrandID,label:z.Brand},onChange:e=>W((l=>({...l,BrandID:e.value,Brand:e.label}))),options:[{value:"",label:"select",isDisabled:!0},...Q.map((e=>({value:null===e||void 0===e?void 0:e.Brand,label:null===e||void 0===e?void 0:e.Brand_Name})))],styles:_.cF,isSearchable:!0,placeholder:"Select Brand",maxMenuHeight:200})]}),(0,R.jsxs)("div",{className:"col-6 p-2",children:[(0,R.jsx)("label",{children:"Group"}),(0,R.jsx)(h.cp,{value:{value:z.GroupID,label:z.Group},onChange:e=>W((l=>({...l,GroupID:e.value,Group:e.label}))),options:[{value:"",label:"select",isDisabled:!0},...B.filter((e=>!z.BrandID||(0,x.Qr)(e.Brand,z.BrandID))).reduce(((e,l)=>(e.some((e=>e.value===l.Product_Group))||e.push({value:l.Product_Group,label:l.Pro_Group}),e)),[])],styles:_.cF,isSearchable:!0,placeholder:"Select Group",maxMenuHeight:200})]}),(0,R.jsxs)("div",{className:"col-12 p-2",children:[(0,R.jsxs)("label",{children:["Item Name ",(0,R.jsx)(T.c,{})]}),(0,R.jsx)(h.cp,{value:{value:z.Item_Id,label:z.ItemName},onChange:e=>{const l=B.find((l=>(0,x.Qr)(l.Product_Id,e.value)));W((a=>{var d,s,t,i,r,o,n;return{...a,Item_Id:e.value,ItemName:e.label,Product:null!==l&&void 0!==l?l:{},Group:null!==(d=l.Pro_Group)&&void 0!==d?d:a.Group,GroupID:null!==(s=l.Product_Group)&&void 0!==s?s:a.GroupID,Brand:null!==(t=l.Brand_Name)&&void 0!==t?t:a.Brand,BrandID:null!==(i=l.Brand)&&void 0!==i?i:a.BrandID,UOM:null!==(r=l.UOM_Id)&&void 0!==r?r:a.UOM,Units:null!==(o=l.Units)&&void 0!==o?o:a.Units,Item_Rate:null!==(n=l.Item_Rate)&&void 0!==n?n:0,Amount:0,Bill_Qty:0}}))},options:[{value:"",label:"select",isDisabled:!0},...[...B.filter((e=>!z.BrandID||(0,x.Qr)(e.Brand,z.BrandID))).filter((e=>!z.GroupID||(0,x.Qr)(e.Product_Group,z.GroupID)))].map((e=>({value:null===e||void 0===e?void 0:e.Product_Id,label:null===e||void 0===e?void 0:e.Product_Name,isDisabled:-1!==q.findIndex((l=>(0,x.Qr)(null===l||void 0===l?void 0:l.Item_Id,null===e||void 0===e?void 0:e.Product_Id)))})))],styles:_.cF,isSearchable:!0,required:!0,placeholder:"Select Product",maxMenuHeight:200})]}),(0,R.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,R.jsxs)("label",{children:["Quantity ",(0,R.jsx)(T.c,{})]}),(0,R.jsx)("input",{type:"number",required:!0,value:z.Bill_Qty?z.Bill_Qty:"",onChange:e=>{z.Item_Rate?W((l=>({...l,Amount:(0,x.eX)(z.Item_Rate,e.target.value),Bill_Qty:e.target.value}))):z.Amount?W((l=>({...l,Item_Rate:(0,x.yy)(l.Amount,e.target.value),Bill_Qty:e.target.value}))):W((l=>({...l,Bill_Qty:e.target.value})))},className:"cus-inpt",min:1})]}),(0,R.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,R.jsx)("label",{children:"Rate "}),(0,R.jsx)("input",{type:"number",value:z.Item_Rate?(0,x.SA)(z.Item_Rate):"",onChange:e=>W((l=>({...l,Item_Rate:e.target.value,Amount:l.Bill_Qty?(0,x.eX)(e.target.value,l.Bill_Qty):l.Amount}))),min:1,className:"cus-inpt"})]}),(0,R.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,R.jsx)("label",{children:"UOM"}),(0,R.jsxs)("select",{value:z.UOM,onChange:e=>{const l=e.target.selectedIndex,a=e.target.options[l].text,d=e.target.value;W((e=>({...e,UOM:d,Units:a})))},className:"cus-inpt",children:[(0,R.jsx)("option",{value:"",disabled:!0,children:"select"}),O.map(((e,l)=>(0,R.jsx)("option",{value:e.Unit_Id,children:e.Units},l)))]})]}),(0,R.jsxs)("div",{className:"col-md-6 p-2",children:[(0,R.jsx)("label",{children:"Amount"}),(0,R.jsx)("input",{type:"number",value:z.Amount?z.Amount:"",onChange:e=>W((l=>({...l,Amount:e.target.value,Item_Rate:l.Bill_Qty?(0,x.yy)(e.target.value,l.Bill_Qty):l.Item_Rate}))),className:"cus-inpt",min:1})]})]})}),(0,R.jsxs)(v.c,{className:"d-flex justify-content-between align-items-center",children:[(0,R.jsx)(m.c,{onClick:()=>W(M),type:"button",startIcon:(0,R.jsx)(f.c,{}),children:"Clear"}),(0,R.jsxs)("span",{children:[(0,R.jsx)(m.c,{type:"button",onClick:re,children:"cancel"}),(0,R.jsx)(m.c,{type:"submit",variant:"outlined",children:"Add"})]})]})]})]})]})};var F=a(91924),Q=a(40691);a(21680);const w=e=>{let{loadingOn:l,loadingOff:a,onToggle:b,reload:p}=e;const y=JSON.parse(localStorage.getItem("user")),[P,D]=(0,d.useState)([]),[f,T]=(0,d.useState)([]),[A,G]=(0,d.useState)([]),[Q,w]=(0,d.useState)([]),[O,L]=(0,d.useState)(!0),[U,V]=(0,d.useState)({}),[H,M]=(0,d.useState)({}),[k,E]=(0,d.useState)(!1),[q,X]=(0,d.useState)({}),[z,W]=(0,d.useState)(!1),[Y,J]=(0,d.useState)({Fromdate:(0,x.SO)(7),Todate:(0,x.Q7)(),Retailer_Id:"",RetailerGet:"ALL",Created_by:"",CreatedByGet:"ALL",Delivery_Person_Id:"",Delivery_Person_Name:"ALL",Cancel_status:0}),[K,Z]=(0,d.useState)({filters:!1,orderDetails:!1});(0,d.useEffect)((()=>{(0,g.q)({address:"delivery/deliveryOrderList?Fromdate=".concat(null===Y||void 0===Y?void 0:Y.Fromdate,"&Todate=").concat(null===Y||void 0===Y?void 0:Y.Todate,"&Retailer_Id=").concat(null===Y||void 0===Y?void 0:Y.Retailer_Id,"&Delivery_Person_Id=").concat(null===Y||void 0===Y?void 0:Y.Delivery_Person_Id,"&Created_by=").concat(null===Y||void 0===Y?void 0:Y.Created_by,"&Cancel_status=").concat(null===Y||void 0===Y?void 0:Y.Cancel_status)}).then((e=>{e.success&&D(null===e||void 0===e?void 0:e.data)})).catch((e=>console.error(e)))}),[Y.Fromdate,null===Y||void 0===Y?void 0:Y.Todate,null===Y||void 0===Y?void 0:Y.Retailer_Id,null===Y||void 0===Y?void 0:Y.Delivery_Person_Id,null===Y||void 0===Y?void 0:Y.Created_by,null===Y||void 0===Y?void 0:Y.Cancel_status,p]),(0,d.useEffect)((()=>{(0,g.q)({address:"masters/retailers/dropDown?Company_Id=".concat(null===y||void 0===y?void 0:y.Company_id)}).then((e=>{e.success&&T(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/users/salesPerson/dropDown?Company_id=".concat(null===y||void 0===y?void 0:y.Company_id)}).then((e=>{e.success&&G(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/user/dropDown?Company_id=".concat(null===y||void 0===y?void 0:y.Company_id)}).then((e=>{e.success&&w(e.data)})).catch((e=>console.error(e)))}),[]);const $=[{Field_Name:"Do_Id",ColumnHeader:"Delivery ID",Fied_Data:"string",isVisible:1},{Field_Name:"So_No",ColumnHeader:"Sale Order ID",Fied_Data:"string",isVisible:1},{Field_Name:"Retailer_Name",ColumnHeader:"Customer",Fied_Data:"string",isVisible:1},{Field_Name:"SalesDate",ColumnHeader:"Sale Order Date",Fied_Data:"date",isVisible:1,align:"center"},{Field_Name:"Do_Date",ColumnHeader:"Delivery Date",Fied_Data:"date",isVisible:1,align:"center"},{Field_Name:"Total_Before_Tax",ColumnHeader:"Before Tax",Fied_Data:"number",isVisible:1,align:"center"},{Field_Name:"Total_Tax",ColumnHeader:"Tax",Fied_Data:"number",isVisible:1,align:"center"},{Field_Name:"Total_Invoice_value",ColumnHeader:"Invoice Value",Fied_Data:"number",isVisible:1,align:"center"},{Field_Name:"DeliveryStatusName",ColumnHeader:"Delivery Status ",Fied_Data:"string",isVisible:1,align:"center"},{Field_Name:"Action",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(s.c,{title:"Edit",children:(0,R.jsx)(t.c,{onClick:()=>{ee(),V({...l,isEdit:!0})},size:"small",children:(0,R.jsx)(S.c,{className:"fa-16"})})}),(0,R.jsx)(s.c,{title:"Delete",children:(0,R.jsx)(t.c,{onClick:()=>{return X({So_No:(e=l).So_No,Do_Id:e.Do_Id}),void E(!0);var e},size:"small",children:(0,R.jsx)(C.c,{className:"fa-16"})})})]})}}],ee=()=>{L(!O),V({}),W(!z)},le=()=>{Z({...K,filters:!1,orderDetails:!1}),V({}),E(!1)};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(i.c,{children:[(0,R.jsxs)("div",{className:"p-3 py-2 d-flex align-items-center justify-content-between",children:[(0,R.jsx)("h6",{className:"fa-18 m-0 p-0",children:O?"Delivery Orders":(0,x.CY)(U)?"Modify Delivery Order":""}),(0,R.jsxs)("span",{children:[O&&(0,R.jsx)(s.c,{title:"Filters",children:(0,R.jsx)(t.c,{size:"small",onClick:()=>Z({...K,filters:!0}),children:(0,R.jsx)(j.c,{})})}),O&&(0,R.jsx)(r.c,{checked:!O,onChange:b,label:"Delivery Details",inputProps:{"aria-label":"controlled"}})]})]}),(0,R.jsx)(o.c,{className:"p-0 ",children:O?(0,R.jsx)(N.c,{dataArray:P,columns:$,isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{let{row:l}=e;return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("table",{className:"table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Branch"}),(0,R.jsx)("td",{className:"border p-2",children:l.Branch_Name}),(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Delivery Person"}),(0,R.jsx)("td",{className:"border p-2",children:l.Delivery_Person_Name}),(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Round off"}),(0,R.jsx)("td",{className:"border p-2",children:l.Round_off})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Invoice Type"}),(0,R.jsxs)("td",{className:"border p-2",children:[(0,x.Qr)(l.GST_Inclusive,1)&&"Inclusive",(0,x.Qr)(l.GST_Inclusive,0)&&"Exclusive"]}),(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Tax Type"}),(0,R.jsxs)("td",{className:"border p-2",children:[(0,x.Qr)(l.IS_IGST,1)&&"IGST",(0,x.Qr)(l.IS_IGST,0)&&"GST"]}),(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,R.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Narration"}),(0,R.jsx)("td",{className:"border p-2",colSpan:5,children:l.Narration})]})]})})})}}):(0,R.jsx)(B,{editValues:U,loadingOn:l,loadingOff:a,reload:()=>{L((e=>!e))},switchScreen:ee})})]}),Object.keys(H).length>0&&(0,R.jsx)(F.c,{orderDetails:null===H||void 0===H?void 0:H.orderDetails,orderProducts:null===H||void 0===H?void 0:H.orderProducts,download:!0,actionOpen:!0,clearDetails:()=>M({}),TitleText:"Sale Order"}),(0,R.jsxs)(n.c,{open:k,fullWidth:!0,maxWidth:"sm",children:[(0,R.jsx)(c.c,{children:"Delete"}),(0,R.jsx)(u.c,{children:(0,R.jsx)("div",{children:"Are You Want to Move the order Into the Sale Order Again"})}),(0,R.jsxs)(v.c,{children:[(0,R.jsx)(m.c,{onClick:le,children:"close"}),(0,R.jsx)(m.c,{onClick:async()=>{q&&((0,g.q)({address:"delivery/deliveryOrder",method:"DELETE",bodyData:{Order_Id:q.So_No,Do_Id:q.Do_Id}}).then((e=>{e.success?(I.m4.success(null===e||void 0===e?void 0:e.message),p()):I.m4.error(null===e||void 0===e?void 0:e.message)})).catch((e=>console.error(e))).finally((()=>a())),E(!1))},children:"Delete"})]})]}),(0,R.jsxs)(n.c,{open:K.filters,onClose:le,fullWidth:!0,maxWidth:"sm",children:[(0,R.jsx)(c.c,{children:"Filters"}),(0,R.jsx)(u.c,{children:(0,R.jsx)("div",{className:"table-responsive pb-4",children:(0,R.jsx)("table",{className:"table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"Retailer"}),(0,R.jsx)("td",{children:(0,R.jsx)(h.cp,{value:{value:null===Y||void 0===Y?void 0:Y.Retailer_Id,label:null===Y||void 0===Y?void 0:Y.RetailerGet},onChange:e=>J({...Y,Retailer_Id:e.value,RetailerGet:e.label}),options:[{value:"",label:"ALL"},...f.map((e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name})))],styles:_.cF,isSearchable:!0,placeholder:"Retailer Name"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"Delivery Person"}),(0,R.jsx)("td",{children:(0,R.jsx)(h.cp,{value:{value:null===Y||void 0===Y?void 0:Y.Delivery_Person_Id,label:null===Y||void 0===Y?void 0:Y.Delivery_Person_Name},onChange:e=>J({...Y,Delivery_Person_Id:e.value,Delivery_Person_Name:e.label}),options:[{value:"",label:"ALL"},...A.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})))],styles:_.cF,isSearchable:!0,placeholder:"Delivery Person Name"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"Created By"}),(0,R.jsx)("td",{children:(0,R.jsx)(h.cp,{value:{value:null===Y||void 0===Y?void 0:Y.Created_by,label:null===Y||void 0===Y?void 0:Y.CreatedByGet},onChange:e=>J({...Y,Created_by:e.value,CreatedByGet:e.label}),options:[{value:"",label:"ALL"},...Q.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})))],styles:_.cF,isSearchable:!0,placeholder:"Delivery Person Name"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,R.jsx)("td",{children:(0,R.jsx)("input",{type:"date",value:Y.Fromdate,onChange:e=>J({...Y,Fromdate:e.target.value}),className:"cus-inpt"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,R.jsx)("td",{children:(0,R.jsx)("input",{type:"date",value:Y.Todate,onChange:e=>J({...Y,Todate:e.target.value}),className:"cus-inpt"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"Canceled Order"}),(0,R.jsx)("td",{children:(0,R.jsxs)("select",{type:"date",value:Y.Cancel_status,onChange:e=>J({...Y,Cancel_status:Number(e.target.value)}),className:"cus-inpt",children:[(0,R.jsx)("option",{value:1,children:"Show"}),(0,R.jsx)("option",{value:0,children:"Hide"})]})})]})]})})})}),(0,R.jsx)(v.c,{children:(0,R.jsx)(m.c,{onClick:le,children:"close"})})]})]})},O=e=>{let{loadingOn:l,loadingOff:a}=e;const I=JSON.parse(localStorage.getItem("user")),[y,S]=(0,d.useState)([]),[C,P]=(0,d.useState)([]),[D,f]=(0,d.useState)([]),[T,A]=(0,d.useState)([]),[G,O]=(0,d.useState)(!0),[L,U]=(0,d.useState)({}),[V,H]=(0,d.useState)({}),[M,k]=(0,d.useState)(!1),[E,q]=(0,d.useState)([]),[X,z]=(0,d.useState)([]),[W,Y]=(0,d.useState)(!1),[J,K]=(0,d.useState)(!0),[Z,$]=(0,d.useState)({Fromdate:(0,x.SO)(7),Todate:(0,x.Q7)(),Retailer_Id:"",RetailerGet:"ALL",Created_by:"",CreatedByGet:"ALL",Sales_Person_Id:"",SalsePersonGet:"ALL",Cancel_status:0,Route_Id:"",RoutesGet:"ALL",Area_Id:"",AreaGet:"ALL"}),[ee,le]=(0,d.useState)({filters:!1,orderDetails:!1});(0,d.useEffect)((()=>{(0,g.q)({address:"sales/saleDelivery?Fromdate=".concat(null===Z||void 0===Z?void 0:Z.Fromdate,"&Todate=").concat(null===Z||void 0===Z?void 0:Z.Todate,"&Retailer_Id=").concat(null===Z||void 0===Z?void 0:Z.Retailer_Id,"&Sales_Person_Id=").concat(null===Z||void 0===Z?void 0:Z.Sales_Person_Id,"&Created_by=").concat(null===Z||void 0===Z?void 0:Z.Created_by,"&Cancel_status=").concat(null===Z||void 0===Z?void 0:Z.Cancel_status,"&Route_Id=").concat(null===Z||void 0===Z?void 0:Z.Route_Id,"&Area_Id=").concat(null===Z||void 0===Z?void 0:Z.Area_Id)}).then((e=>{e.success&&S(null===e||void 0===e?void 0:e.data)})).catch((e=>console.error(e)))}),[Z.Fromdate,null===Z||void 0===Z?void 0:Z.Todate,null===Z||void 0===Z?void 0:Z.Retailer_Id,null===Z||void 0===Z?void 0:Z.Sales_Person_Id,null===Z||void 0===Z?void 0:Z.Created_by,null===Z||void 0===Z?void 0:Z.Cancel_status,null===Z||void 0===Z?void 0:Z.Route_Id,null===Z||void 0===Z?void 0:Z.Area_Id,M]),(0,d.useEffect)((()=>{(0,g.q)({address:"masters/retailers/dropDown?Company_Id=".concat(null===I||void 0===I?void 0:I.Company_id)}).then((e=>{e.success&&P(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/users/salesPerson/dropDown?Company_id=".concat(null===I||void 0===I?void 0:I.Company_id)}).then((e=>{e.success&&f(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/user/dropDown?Company_id=".concat(null===I||void 0===I?void 0:I.Company_id)}).then((e=>{e.success&&A(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/routes/dropdown?Company_id=".concat(null===I||void 0===I?void 0:I.Company_id)}).then((e=>{e.success&&q(e.data)})).catch((e=>console.error(e))),(0,g.q)({address:"masters/areas/dropdown?Company_id=".concat(null===I||void 0===I?void 0:I.Company_id)}).then((e=>{e.success&&z(e.data)})).catch((e=>console.error(e)))}),[]);const ae=[{Field_Name:"So_Id",ColumnHeader:"Order ID",Fied_Data:"string",isVisible:1},{Field_Name:"Retailer_Name",ColumnHeader:"Customer",Fied_Data:"string",isVisible:1},{Field_Name:"So_Date",ColumnHeader:"Sale Order Date",Fied_Data:"date",isVisible:1,align:"center"},{Field_Name:"Total_Before_Tax",ColumnHeader:"Before Tax",Fied_Data:"number",isVisible:1,align:"center"},{Field_Name:"Total_Tax",ColumnHeader:"Tax",Fied_Data:"number",isVisible:1,align:"center"},{Field_Name:"Total_Invoice_value",ColumnHeader:"Invoice Value",Fied_Data:"number",isVisible:1,align:"center"},{ColumnHeader:"Status",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{var l,a;let{row:d}=e;const s=p.o.find((e=>e.id===Number(null===d||void 0===d?void 0:d.isConverted)));return(0,R.jsx)("span",{className:null!==(l="py-0 fw-bold px-2 rounded-4 fa-12 "+(null===s||void 0===s?void 0:s.color))&&void 0!==l?l:"bg-secondary text-white",children:null!==(a=null===s||void 0===s?void 0:s.label)&&void 0!==a?a:"Undefined"})}},{Field_Name:"Action",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(s.c,{title:"View Order",children:(0,R.jsx)(t.c,{onClick:()=>{H({orderDetails:l,orderProducts:null!==l&&void 0!==l&&l.Products_List?null===l||void 0===l?void 0:l.Products_List:[]})},color:"primary",size:"small",children:(0,R.jsx)(b.c,{className:"fa-16"})})}),(0,R.jsx)(s.c,{title:"Sales Delivery",children:(0,R.jsx)(t.c,{onClick:()=>{de(),U({...l})},size:"small",children:(0,R.jsx)(Q.c,{className:"fa-16"})})})]})}}],de=()=>{O(!G),U({})},se=()=>{le({...ee,filters:!1,orderDetails:!1}),U({})};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(i.c,{children:[(0,R.jsxs)("div",{className:"p-3 py-2 d-flex align-items-center justify-content-between",children:[(0,R.jsx)("h6",{className:"fa-18 m-0 p-0",children:G?"Sale Orders":(0,x.CY)(L)}),(0,R.jsxs)("div",{children:[G&&(0,R.jsx)(s.c,{title:"Filters",children:(0,R.jsx)(t.c,{size:"small",onClick:()=>le({...ee,filters:!0}),children:(0,R.jsx)(j.c,{})})}),G&&(0,R.jsx)(r.c,{checked:J,onChange:()=>{O(!1),Y(!0)},inputProps:{"aria-label":"controlled"}})]})]}),(0,R.jsx)(o.c,{className:"p-0",children:G?(0,R.jsx)(N.c,{dataArray:y,columns:ae,isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{let{row:l}=e;return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("table",{className:"table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Branch"}),(0,R.jsx)("td",{className:"border p-2",children:l.Branch_Name}),(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,R.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name}),(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Round off"}),(0,R.jsx)("td",{className:"border p-2",children:l.Round_off})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Invoice Type"}),(0,R.jsxs)("td",{className:"border p-2",children:[(0,x.Qr)(l.GST_Inclusive,1)&&"Inclusive",(0,x.Qr)(l.GST_Inclusive,0)&&"Exclusive"]}),(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Tax Type"}),(0,R.jsxs)("td",{className:"border p-2",children:[(0,x.Qr)(l.IS_IGST,1)&&"IGST",(0,x.Qr)(l.IS_IGST,0)&&"GST"]}),(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,R.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border p-2 bg-light",children:"Narration"}),(0,R.jsx)("td",{className:"border p-2",colSpan:5,children:l.Narration})]})]})})})}}):W?(0,R.jsx)(w,{editValues:L,loadingOn:l,loadingOff:a,reload:()=>{k((e=>!e)),O((e=>!e))},switchScreen:()=>O(!0),onToggle:()=>{O((e=>!e)),Y((e=>!e))}}):(0,R.jsx)(B,{editValues:L,loadingOn:l,loadingOff:a,reload:()=>{k((e=>!e)),O((e=>!e))},switchScreen:()=>O(!0),editOn:!0})})]}),Object.keys(V).length>0&&(0,R.jsx)(F.c,{orderDetails:null===V||void 0===V?void 0:V.orderDetails,orderProducts:null===V||void 0===V?void 0:V.orderProducts,download:!0,actionOpen:!0,clearDetails:()=>H({}),TitleText:"Sale Order"}),(0,R.jsxs)(n.c,{open:ee.filters,onClose:se,fullWidth:!0,maxWidth:"sm",children:[(0,R.jsx)(c.c,{children:"Filters"}),(0,R.jsx)(u.c,{children:(0,R.jsx)("div",{className:"table-responsive pb-4",children:(0,R.jsx)("table",{className:"table",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"Retailer"}),(0,R.jsx)("td",{children:(0,R.jsx)(h.cp,{value:{value:null===Z||void 0===Z?void 0:Z.Retailer_Id,label:null===Z||void 0===Z?void 0:Z.RetailerGet},onChange:e=>$({...Z,Retailer_Id:e.value,RetailerGet:e.label}),options:[{value:"",label:"ALL"},...C.map((e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name})))],styles:_.cF,isSearchable:!0,placeholder:"Retailer Name"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"Salse Person"}),(0,R.jsx)("td",{children:(0,R.jsx)(h.cp,{value:{value:null===Z||void 0===Z?void 0:Z.Sales_Person_Id,label:null===Z||void 0===Z?void 0:Z.SalsePersonGet},onChange:e=>$({...Z,Sales_Person_Id:e.value,SalsePersonGet:e.label}),options:[{value:"",label:"ALL"},...D.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})))],styles:_.cF,isSearchable:!0,placeholder:"Sales Person Name"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"Created By"}),(0,R.jsx)("td",{children:(0,R.jsx)(h.cp,{value:{value:null===Z||void 0===Z?void 0:Z.Created_by,label:null===Z||void 0===Z?void 0:Z.CreatedByGet},onChange:e=>$({...Z,Created_by:e.value,CreatedByGet:e.label}),options:[{value:"",label:"ALL"},...T.map((e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})))],styles:_.cF,isSearchable:!0,placeholder:"Sales Person Name"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,R.jsx)("td",{children:(0,R.jsx)("input",{type:"date",value:Z.Fromdate,onChange:e=>$({...Z,Fromdate:e.target.value}),className:"cus-inpt"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,R.jsx)("td",{children:(0,R.jsx)("input",{type:"date",value:Z.Todate,onChange:e=>$({...Z,Todate:e.target.value}),className:"cus-inpt"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"Canceled Order"}),(0,R.jsx)("td",{children:(0,R.jsxs)("select",{type:"date",value:Z.Cancel_status,onChange:e=>$({...Z,Cancel_status:Number(e.target.value)}),className:"cus-inpt",children:[(0,R.jsx)("option",{value:1,children:"Show"}),(0,R.jsx)("option",{value:0,children:"Hide"})]})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"Routes"}),(0,R.jsx)("td",{children:(0,R.jsx)(h.cp,{value:{value:null===Z||void 0===Z?void 0:Z.Route_Id,label:null===Z||void 0===Z?void 0:Z.RoutesGet},onChange:e=>$({...Z,Route_Id:e.value,RoutesGet:e.label}),options:[{value:"",label:"ALL"},...E.map((e=>({value:null===e||void 0===e?void 0:e.Route_Id,label:null===e||void 0===e?void 0:e.Route_Name})))],styles:_.cF,isSearchable:!0,placeholder:"Route Name"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{style:{verticalAlign:"middle"},children:"Area"}),(0,R.jsx)("td",{children:(0,R.jsx)(h.cp,{value:{value:null===Z||void 0===Z?void 0:Z.Area_Id,label:null===Z||void 0===Z?void 0:Z.AreaGet},onChange:e=>$({...Z,Area_Id:e.value,AreaGet:e.label}),options:[{value:"",label:"ALL"},...X.map((e=>({value:null===e||void 0===e?void 0:e.Area_Id,label:null===e||void 0===e?void 0:e.Area_Name})))],styles:_.cF,isSearchable:!0,placeholder:"Area Name"})})]})]})})})}),(0,R.jsx)(v.c,{children:(0,R.jsx)(m.c,{onClick:se,children:"close"})})]})]})}},80236:(e,l,a)=>{a.d(l,{o:()=>d});const d=[{id:0,label:"New",color:" bg-info text-white "},{id:1,label:"Verified",color:" bg-warning text-white "},{id:2,label:"Converted",color:" bg-success text-white "},{id:3,label:"Canceled",color:" bg-danger text-white "}]}}]);
//# sourceMappingURL=8776.b0454c2c.chunk.js.map
"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[9560],{13724:(e,r,t)=>{t.d(r,{c:()=>x});var l=t(69060),a=t(27454),n=t(700),i=t(5548),s=t(99904),o=t(85624),d=t(33856),c=t(58612),u=t(53248),v=t(29504),m=t(5930),h=t(39308),D=t(41459),g=t(46864),p=t(82496);const C=e=>{let{dataArray:r=[],columns:t=[],onClickFun:C=null,isExpendable:x=!1,expandableComp:y=null,tableMaxHeight:N=550,initialPageCount:f=20,EnableSerialNumber:j=!1,CellSize:b="small",disablePagination:E=!1,title:S=""}=e;const[I,O]=(0,l.useState)(0),[R,w]=(0,l.useState)(f),[P,A]=(0,l.useState)([]),F=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],T=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],k=(e=>{if(!P.length)return e;return[...e].sort(((e,r)=>{for(const t of P){const{columnId:l,direction:a}=t,n=e[l],i=r[l];if(n!==i)return"asc"===a?n>i?1:-1:n<i?1:-1}return 0}))})(r),M=I*R,B=M+R,V=k.slice(M,B),H=(e,r)=>{switch(r){case"number":return(0,h.SA)(e);case"date":return(0,h.uy)(e);case"time":return(0,h.AX)(e);case"string":return e;default:return""}},L=e=>{let{row:r,index:s}=e;const[o,d]=(0,l.useState)(!1),c="20px";return(0,p.jsxs)(l.Fragment,{children:[(0,p.jsxs)(a.c,{children:[!0===x&&y&&(0,p.jsx)(n.c,{className:"fa-13 border-end text-center vtop",children:(0,p.jsx)(i.c,{size:"small",onClick:()=>d((e=>!e)),children:o?(0,p.jsx)(D.c,{sx:{fontSize:c}}):(0,p.jsx)(g.c,{sx:{fontSize:c}})})}),!0===j&&(0,p.jsx)(n.c,{className:"fa-13 border-end text-center vtop",children:R*I+s+1}),null===t||void 0===t?void 0:t.map(((e,t)=>{var l,a;return((0,h.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,h.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(!1!==Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell?(0,p.jsx)(n.c,{className:"fa-13 border-end "+(e.align?null===(l=F.find((r=>r.type===String(e.align).toLowerCase())))||void 0===l?void 0:l.class:"")+(e.verticalAlign?null===(a=T.find((r=>r.type===String(e.verticalAlign).toLowerCase())))||void 0===a?void 0:a.class:" vctr "),children:e.Cell({row:r,Field_Name:e.Field_Name})},t):Object.entries(r).map((l=>{var a,i;let[s,o]=l;return e.Field_Name===s&&((0,h.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,h.Qr)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,p.jsx)(n.c,{className:"fa-13 border-end "+(e.align?null===(a=F.find((r=>r.type===String(e.align).toLowerCase())))||void 0===a?void 0:a.class:"")+(e.verticalAlign?null===(i=T.find((r=>r.type===String(e.verticalAlign).toLowerCase())))||void 0===i?void 0:i.class:" vctr "),onClick:()=>C?C(r):console.log("Function not supplied"),children:H(o,null===e||void 0===e?void 0:e.Fied_Data)},t)})))}))]}),!0===x&&y&&o&&(0,p.jsx)(a.c,{children:(0,p.jsx)(n.c,{colSpan:Number(null===t||void 0===t?void 0:t.length)+(!0===j?2:1),children:y({row:r,index:s})})})]})};return(0,p.jsxs)("div",{children:[S&&(0,p.jsx)("h6",{className:"fw-bold text-muted",children:S}),(0,p.jsx)(s.c,{component:o.c,sx:{maxHeight:N},children:(0,p.jsxs)(d.c,{stickyHeader:!0,size:b,children:[(0,p.jsx)(c.c,{children:(0,p.jsxs)(a.c,{children:[x&&y&&(0,p.jsx)(n.c,{className:"fa-13 fw-bold border-end border-top text-center",style:{backgroundColor:"#EDF0F7"},children:"#"}),j&&(0,p.jsx)(n.c,{className:"fa-13 fw-bold border-end border-top text-center",style:{backgroundColor:"#EDF0F7"},children:"SNo"}),t.map(((e,r)=>{const t=(0,h.Qr)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,h.Qr)(null===e||void 0===e?void 0:e.isVisible,1),l=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,a=P.find((r=>r.columnId===e.Field_Name)),i=a?a.direction:"asc";var s,o,d,c;return t?l?(0,p.jsx)(n.c,{className:"fa-13 fw-bold border-end border-top "+(e.align?null===(s=F.find((r=>r.type===String(e.align).toLowerCase())))||void 0===s?void 0:s.class:""),style:{backgroundColor:"#EDF0F7"},sortDirection:!!a&&i,children:(0,p.jsx)(u.c,{active:!!a,direction:i,onClick:()=>(e=>{const r=P.find((r=>r.columnId===e));if(r){const t="asc"===r.direction;A(P.map((r=>r.columnId===e?{...r,direction:t?"desc":"asc"}:r)))}else A([...P,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(o=e.Field_Name)||void 0===o?void 0:o.replace(/_/g," "))})},r):(0,p.jsx)(n.c,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fa-13 fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(d=F.find((r=>r.type===String(e.align).toLowerCase())))||void 0===d?void 0:d.class:""),style:{backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},r):null}))]})}),(0,p.jsxs)(v.c,{children:[(E?k:V).map(((e,r)=>(0,p.jsx)(L,{row:e,index:r},r))),0===r.length&&(0,p.jsx)(a.c,{children:(0,p.jsx)(n.c,{colSpan:t.length+(!0===x&&y?1:0)+(!0===j?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!E&&0!==V.length&&(0,p.jsx)("div",{className:"p-2 pb-0",children:(0,p.jsx)(m.c,{component:"div",count:r.length,page:I,onPageChange:(e,r)=>{O(r)},rowsPerPage:R,onRowsPerPageChange:e=>{w(parseInt(e.target.value,10)),O(0)},rowsPerPageOptions:Array.from(new Set([f,5,20,50,100,200,500])).sort(((e,r)=>e-r)),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};C.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0};const x=C},79560:(e,r,t)=>{t.r(r),t.d(r,{default:()=>I});var l=t(69060),a=t(13724),n=t(1908),i=t(39308),s=t(43692),o=t(5548),d=t(89e3),c=t(84436),u=t(82656),v=t(26773),m=t(4488),h=t(90048),D=t(51560),g=t(61988),p=t(45180),C=t(82496);const x=e=>{let{data:r=[],status:t="ITEMS"}=e;switch(t){case"ITEMS":return null===r||void 0===r?void 0:r.reduce(((e,r)=>{if(!Array.isArray(null===r||void 0===r?void 0:r.ItemDetails))return e;const t=r.ItemDetails.map((e=>{var t,l;return{...e,OrderDetails:{BrokerName:r.BrokerName,CreatedBy:r.CreatedBy,CreatedAt:r.CreatedAt,DeliveryDetails:null!==(t=r.DeliveryDetails)&&void 0!==t?t:[],LoadingDate:r.LoadingDate,OwnerName:r.OwnerName,PartyAddress:r.PartyAddress,PartyName:r.PartyName,PaymentCondition:r.PaymentCondition,Remarks:r.Remarks,TradeConfirmDate:r.TradeConfirmDate,TranspoterDetails:null!==(l=r.TranspoterDetails)&&void 0!==l?l:[]}}}));return e.concat(t)}),[]);case"ITEMS PENDING":return null===r||void 0===r?void 0:r.reduce(((e,r)=>{var t;if(!Array.isArray(null===r||void 0===r?void 0:r.ItemDetails)||(0,i.QT)(null===r||void 0===r||null===(t=r.DeliveryDetails)||void 0===t?void 0:t.length,0))return e;const l=r.ItemDetails.map((e=>{var t,l;return{...e,OrderDetails:{BrokerName:r.BrokerName,CreatedBy:r.CreatedBy,CreatedAt:r.CreatedAt,DeliveryDetails:null!==(t=r.DeliveryDetails)&&void 0!==t?t:[],LoadingDate:r.LoadingDate,OwnerName:r.OwnerName,PartyAddress:r.PartyAddress,PartyName:r.PartyName,PaymentCondition:r.PaymentCondition,Remarks:r.Remarks,TradeConfirmDate:r.TradeConfirmDate,TranspoterDetails:null!==(l=r.TranspoterDetails)&&void 0!==l?l:[]}}}));return e.concat(l)}),[]);case"ITEMS ARRIVED":return null===r||void 0===r?void 0:r.reduce(((e,r)=>{var t;if(!Array.isArray(null===r||void 0===r?void 0:r.ItemDetails)||(0,i.Qr)(null===r||void 0===r||null===(t=r.DeliveryDetails)||void 0===t?void 0:t.length,0))return e;const l=r.ItemDetails.map((e=>{var t,l;return{...e,OrderDetails:{BrokerName:r.BrokerName,CreatedBy:r.CreatedBy,CreatedAt:r.CreatedAt,DeliveryDetails:null!==(t=r.DeliveryDetails)&&void 0!==t?t:[],LoadingDate:r.LoadingDate,OwnerName:r.OwnerName,PartyAddress:r.PartyAddress,PartyName:r.PartyName,PaymentCondition:r.PaymentCondition,Remarks:r.Remarks,TradeConfirmDate:r.TradeConfirmDate,TranspoterDetails:null!==(l=r.TranspoterDetails)&&void 0!==l?l:[]}}}));return e.concat(l)}),[]);case"ORDERS":return r;case"ORDERS PENDING":return r.reduce(((e,r)=>{var t;return!Array.isArray(null===r||void 0===r?void 0:r.DeliveryDetails)||(0,i.QT)(null===r||void 0===r||null===(t=r.DeliveryDetails)||void 0===t?void 0:t.length,0)?e:e.concat(r)}),[]);case"ORDERS ARRIVED":return r.reduce(((e,r)=>{var t;return!Array.isArray(null===r||void 0===r?void 0:r.DeliveryDetails)||(0,i.Qr)(null===r||void 0===r||null===(t=r.DeliveryDetails)||void 0===t?void 0:t.length,0)?e:e.concat(r)}),[]);default:return[]}},y=" bg-warning fw-bold fa-11 px-2 py-1 rounded-3 ",N=" bg-success text-light fa-11 px-2 py-1 rounded-3 ",f=" bg-danger text-light fw-bold fa-11 px-2 py-1 rounded-3 ",j=e=>{const r=Number(e)>0?"Arrived":"Pending";switch(r){case"Pending":return{class:y,label:r};case"Arrived":return{class:N,label:r};case"Canceled":return{class:f,label:r};default:return{class:"",label:""}}},b=(e,r,t)=>({isVisible:1,Field_Name:e,Fied_Data:r,...t&&{ColumnHeader:t}}),E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ITEMS",r=arguments.length>1?arguments[1]:void 0;const t=b("OrderId","string","Order Id"),l=b("ItemName","string","Item"),a=b("Rate","number"),n=(b("LoadingDate","date","Loading Date"),b("OwnerName","string","Owner Name")),s=b("BrokerName","string","Broker Name"),d=b("PartyName","string","Party"),c=(b("PaymentCondition","string","Payment Condition"),b("Remarks","string")),u=b("TradeConfirmDate","date","Trade Confirm Date"),v=b("QualityCondition","string","Condition"),m={isVisible:1,ColumnHeader:"Weight",isCustomCell:!0,Cell:e=>{var r;let{row:t}=e;return(null!==(r=null===t||void 0===t?void 0:t.Weight)&&void 0!==r?r:0)+" "+(null===t||void 0===t?void 0:t.Units)}},h={isVisible:1,isCustomCell:!0,ColumnHeader:"Date",Cell:e=>{var r;let{row:t}=e;return(0,i.uy)(null===t||void 0===t||null===(r=t.ItemDetails)||void 0===r?void 0:r.TradeConfirmDate)}},D={isVisible:1,ColumnHeader:"Party",isCustomCell:!0,Cell:e=>{var r;let{row:t}=e;return null===t||void 0===t||null===(r=t.OrderDetails)||void 0===r?void 0:r.PartyName}},g={isVisible:1,ColumnHeader:"Status",isCustomCell:!0,Cell:e=>{var r,t,l;let{row:a}=e;const n=null===a||void 0===a||null===(r=a.OrderDetails)||void 0===r||null===(t=r.DeliveryDetails)||void 0===t?void 0:t.length,i=null===a||void 0===a||null===(l=a.DeliveryDetails)||void 0===l?void 0:l.length;return(0,C.jsx)("span",{className:j(null!==n&&void 0!==n?n:i).class,children:j(null!==n&&void 0!==n?n:i).label})}},x={isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(o.c,{size:"small",onClick:()=>r((e=>({...e,deleteOrderDialog:!0,deleteOrderId:null===t||void 0===t?void 0:t.Id}))),color:"error",children:(0,C.jsx)(p.c,{})})})}};switch(e){case"ITEMS":return[t,l,h,m,a,v,D,g];case"ITEMS PENDING":case"ITEMS ARRIVED":return[t,l,h,m,a,v,D];case"ORDERS":return[b("Id","string","Order Id"),u,d,c,s,n,g,x];case"ORDERS PENDING":case"ORDERS ARRIVED":return[b("Id","string","Order Id"),u,d,c,s,n,x];default:return[]}};var S=t(56480);const I=e=>{let{loadingOn:r,loadingOff:t}=e;const[p,y]=(0,l.useState)([]),N=(0,D.i6)(),[f,j]=(0,l.useState)({Fromdate:(0,i.SO)(10),Todate:(0,i.Q7)(),FilterDialog:!1,OrderStatus:"ITEMS",deleteOrderDialog:!1,deleteOrderId:"",refresh:!1});(0,l.useEffect)((()=>{(0,n.q)({address:"dataEntry/purchaseOrderEntry?Fromdate=".concat(null===f||void 0===f?void 0:f.Fromdate,"&Todate=").concat(null===f||void 0===f?void 0:f.Todate)}).then((e=>{e.success&&y(e.data)})).catch((e=>console.error(e)))}),[f.Fromdate,f.Todate,f.refresh]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(s.c,{children:[(0,C.jsxs)("div",{className:"p-2 d-flex flex-wrap align-items-center",children:[(0,C.jsx)("h5",{className:"m-0 flex-grow-1",children:"Purchase Order"}),(0,C.jsx)(o.c,{size:"small",className:"me-2",onClick:()=>j((e=>({...e,FilterDialog:!0}))),children:(0,C.jsx)(g.c,{})}),(0,C.jsx)(d.c,{variant:"outlined",onClick:()=>N("create"),children:"Add"})]}),(0,C.jsx)(c.c,{children:(0,C.jsx)(a.c,{dataArray:x({data:p,status:f.OrderStatus}),columns:E(f.OrderStatus,j),tableMaxHeight:750,EnableSerialNumber:!0,title:f.OrderStatus})})]}),(0,C.jsxs)(u.c,{open:f.FilterDialog,onClose:()=>j((e=>({...e,FilterDialog:!1}))),maxWidth:"sm",fullWidth:!0,children:[(0,C.jsx)(v.c,{children:"Filters"}),(0,C.jsx)(m.c,{children:(0,C.jsx)("table",{className:"table m-0 border-0",children:(0,C.jsxs)("tbody",{children:[(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"border-0 vctr",children:"Fromdate"}),(0,C.jsx)("td",{className:"border-0 vctr",children:(0,C.jsx)("input",{type:"date",onChange:e=>j((r=>({...r,Fromdate:e.target.value}))),value:f.Fromdate,className:"cus-inpt p-2"})})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"border-0 vctr",children:"Todate"}),(0,C.jsx)("td",{className:"border-0 vctr",children:(0,C.jsx)("input",{type:"date",onChange:e=>j((r=>({...r,Todate:e.target.value}))),value:f.Todate,className:"cus-inpt p-2"})})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"border-0 vctr",children:"Order Status"}),(0,C.jsx)("td",{className:"border-0 vctr",children:(0,C.jsxs)("select",{className:"cus-inpt p-2",value:f.OrderStatus,onChange:e=>j((r=>({...r,OrderStatus:e.target.value}))),children:[(0,C.jsxs)("optgroup",{label:"ITEM BASED",children:[(0,C.jsx)("option",{value:"ITEMS",children:"ITEMS"}),(0,C.jsx)("option",{value:"ITEMS PENDING",children:"ITEMS - PENDING"}),(0,C.jsx)("option",{value:"ITEMS ARRIVED",children:"ITEMS - ARRIVED"})]}),(0,C.jsxs)("optgroup",{label:"ORDER BASED",children:[(0,C.jsx)("option",{value:"ORDERS",children:"ORDERS"}),(0,C.jsx)("option",{value:"ORDERS PENDING",children:"ORDERS - PENDING"}),(0,C.jsx)("option",{value:"ORDERS ARRIVED",children:"ORDERS - ARRIVED"})]})]})})]})]})})}),(0,C.jsx)(h.c,{children:(0,C.jsx)(d.c,{onClick:()=>j((e=>({...e,FilterDialog:!1}))),variant:"outlined",children:"Close"})})]}),(0,C.jsxs)(u.c,{open:f.deleteOrderDialog,onClose:()=>j((e=>({...e,deleteOrderDialog:!1,deleteOrderId:""}))),maxWidth:"sm",children:[(0,C.jsx)(v.c,{children:"Confirmation"}),(0,C.jsx)(m.c,{children:(0,C.jsx)("h6",{children:"Do you want to delete the order permanently?"})}),(0,C.jsxs)(h.c,{children:[(0,C.jsx)(d.c,{onClick:()=>j((e=>({...e,deleteOrderDialog:!1,deleteOrderId:""}))),children:"Cancel"}),(0,C.jsx)(d.c,{color:"error",variant:"outlined",onClick:()=>{return e=f.deleteOrderId,void((0,i.Q$)(e)&&(0,n.q)({address:"dataEntry/purchaseOrderEntry",method:"DELETE",bodyData:{OrderId:e}}).then((e=>{e.success?(j((e=>({...e,deleteOrderDialog:!1,deleteOrderId:"",refresh:!e.refresh}))),S.m4.success(e.message)):(j((e=>({...e,deleteOrderDialog:!1,deleteOrderId:""}))),S.m4.error(e.message))})).catch((e=>console.error(e))));var e},children:"Delete"})]})]})]})}},45180:(e,r,t)=>{t.d(r,{c:()=>n});var l=t(27664),a=t(82496);const n=(0,l.c)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},61988:(e,r,t)=>{t.d(r,{c:()=>n});var l=t(27664),a=t(82496);const n=(0,l.c)((0,a.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},84436:(e,r,t)=>{t.d(r,{c:()=>g});var l=t(45072),a=t(95656),n=t(69060),i=t(79736),s=t(21412),o=t(12556),d=t(49836),c=t(10099),u=t(33448);function v(e){return(0,u.cp)("MuiCardContent",e)}(0,c.c)("MuiCardContent",["root"]);var m=t(82496);const h=["className","component"],D=(0,o.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),g=n.forwardRef((function(e,r){const t=(0,d.C)({props:e,name:"MuiCardContent"}),{className:n,component:o="div"}=t,c=(0,a.c)(t,h),u=(0,l.c)({},t,{component:o}),g=(e=>{const{classes:r}=e;return(0,s.c)({root:["root"]},v,r)})(u);return(0,m.jsx)(D,(0,l.c)({as:o,className:(0,i.c)(g.root,n),ownerState:u,ref:r},c))}))},43692:(e,r,t)=>{t.d(r,{c:()=>p});var l=t(45072),a=t(95656),n=t(69060),i=t(79736),s=t(21412),o=t(12556),d=t(49836),c=t(85624),u=t(10099),v=t(33448);function m(e){return(0,v.cp)("MuiCard",e)}(0,u.c)("MuiCard",["root"]);var h=t(82496);const D=["className","raised"],g=(0,o.cp)(c.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({overflow:"hidden"}))),p=n.forwardRef((function(e,r){const t=(0,d.C)({props:e,name:"MuiCard"}),{className:n,raised:o=!1}=t,c=(0,a.c)(t,D),u=(0,l.c)({},t,{raised:o}),v=(e=>{const{classes:r}=e;return(0,s.c)({root:["root"]},m,r)})(u);return(0,h.jsx)(g,(0,l.c)({className:(0,i.c)(v.root,n),elevation:o?8:void 0,ref:r,ownerState:u},c))}))}}]);
//# sourceMappingURL=9560.d84d8894.chunk.js.map
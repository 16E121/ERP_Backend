"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7276],{57276:(e,s,c)=>{c.r(s),c.d(s,{default:()=>L});var t=c(69060),a=c(27664),o=c(82496);const n=(0,a.c)((0,o.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People"),i=(0,a.c)((0,o.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),r=(0,a.c)((0,o.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article");var d=c(28655);const l=(0,a.c)((0,o.jsx)("path",{d:"M22 9V7h-2v2h-2v2h2v2h2v-2h2V9zM8 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m4.51-8.95C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95m4.02 9.78C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17"}),"GroupAdd");var u,m=c(86e3),h=c(45180),v=c(3358),p=c(5548),x=c(93996),b=c(82656),g=c(26773),j=c(4488),f=c(90048),y=c(89e3),C=c(77536),N=c(91012),I=c(56480),T=(c(21680),c(12720)),M=c(52924),S=c(44380),k=c(71448),V=c(26728),_=c(59736),D=c(51560),O=c(1908),w=c(39308);const z={Description:"",Id:"",Topic:"",Company_id:null===(u=JSON.parse(localStorage.getItem("user")))||void 0===u?void 0:u.Company_id},R=(0,o.jsx)(V.c,{fontSize:"small"}),U=(0,o.jsx)(_.c,{fontSize:"small"}),L=()=>{const e=localStorage.getItem("user"),s=JSON.parse(e),[c,a]=(0,t.useState)([]),[u,V]=(0,t.useState)(!1),[_,L]=(0,t.useState)(!1),[E,F]=(0,t.useState)(!1),[H,P]=(0,t.useState)(z),[A,W]=(0,t.useState)({}),[G,Q]=(0,t.useState)(!1),{contextObj:B}=(0,t.useContext)(C.a),[q,J]=(0,t.useState)(!1),[Y,K]=(0,t.useState)([]),X=(0,D.i6)();(0,t.useEffect)((()=>{(0,O.q)({address:"discussionForum/discussionTopic?UserId=".concat(null===s||void 0===s?void 0:s.UserId,"&UserTypeId=").concat(null===s||void 0===s?void 0:s.UserTypeId,"&Company_id=").concat(null===s||void 0===s?void 0:s.Company_id)}).then((e=>{if(e.success){const c=[];e.data.forEach((e=>{var t;null===e||void 0===e||null===(t=e.InvolvedUsers)||void 0===t||t.forEach((t=>{Number(null===t||void 0===t?void 0:t.UserId)===Number(null===s||void 0===s?void 0:s.UserId)&&c.push(e)}))})),a(0===Number(s.UserTypeId)||1===Number(s.UserTypeId)?null===e||void 0===e?void 0:e.data:c)}})).catch((e=>console.log(e)))}),[q,null===s||void 0===s?void 0:s.UserId,null===s||void 0===s?void 0:s.UserTypeId]),(0,t.useEffect)((()=>{(0,O.q)({address:"masters/users/employeeAndSalesPerson/dropDown?Company_id=".concat(null===s||void 0===s?void 0:s.Company_id)}).then((e=>{e.success&&K(e.data)})).catch((e=>console.log(e)))}),[null===s||void 0===s?void 0:s.BranchId]);const Z=()=>{V(!1),P(z),Q(!1)},$=()=>{L(!1),P(z)},ee=()=>{F(!1),W({})};return 1===Number(B.Read_Rights)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(I.jd,{}),(0,o.jsx)("div",{className:"cus-card",children:(0,o.jsxs)("div",{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex mb-4 ",children:[(0,o.jsx)("p",{className:"fw-bold fa-18 px-2 flex-grow-1",children:"Topics"}),(0,w.Qr)(B.Add_Rights,1)&&(0,o.jsx)("button",{className:"btn btn-primary rounded-5 px-3 fa-13 shadow",onClick:()=>V(!0),children:"Create Topic"})]}),c.length>0?(0,o.jsx)("table",{className:"table",children:(0,o.jsx)("tbody",{children:c.map(((e,s)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"fa-14 border-0",children:(0,o.jsxs)("div",{className:"d-flex align-items-start justify-content-center flex-column",children:[(0,o.jsx)("p",{className:"mb-0 fw-bold fa-14 under-blue ".concat(0===Number(null===e||void 0===e?void 0:e.Project_Id)?"text-primary":"text-secondary"),onClick:()=>X("chats",{state:e}),children:null===e||void 0===e?void 0:e.Topic}),(0,o.jsx)("p",{className:"mb-0 py-2 text-muted",children:null===e||void 0===e?void 0:e.Description})]})}),(0,o.jsx)("td",{className:"fa-14 text-center border-0",children:(0,o.jsx)(v.c,{title:"Team Size",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n,{className:"fa-18 text-primary mx-1"})," ",null===e||void 0===e?void 0:e.InvolvedUsersCount]})})}),(0,o.jsx)("td",{className:"fa-14 text-center border-0",children:(0,o.jsx)(v.c,{title:"Messages Count",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i,{className:"fa-18 text-primary mx-1"})," ",null===e||void 0===e?void 0:e.TotalMessages]})})}),(0,o.jsx)("td",{className:"fa-14 border-0",children:(0,o.jsx)(v.c,{title:"Documents Shared",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r,{className:"fa-18 text-primary me-1"})," "," "+(null===e||void 0===e?void 0:e.DocumentsShared)]})})}),(0,o.jsx)("td",{className:"fa-14 border-0",children:(0,o.jsxs)("span",{className:"d-flex",children:[(0,o.jsx)(p.c,{size:"small",onClick:()=>X("chats",{state:e}),children:(0,o.jsx)(d.c,{className:" text-primary"})}),((0,w.Qr)(B.Edit_Rights,1)||(0,w.Qr)(B.Delete_Rights,1))&&(0,o.jsxs)(T.c,{children:[(0,o.jsx)(T.c.Toggle,{variant:"success",id:"actions",className:"rounded-5 bg-transparent text-dark border-0 btn"}),(0,o.jsxs)(T.c.Menu,{children:[(0,w.Qr)(B.Edit_Rights,1)&&(0,o.jsxs)(x.c,{onClick:()=>(W(e),void F(!0)),children:[(0,o.jsx)(l,{className:"fa-in text-primary me-2"})," Manage Team"]}),(0,w.Qr)(B.Edit_Rights,1)&&(0,w.Qr)(null===e||void 0===e?void 0:e.Project_Id,0)&&(0,o.jsxs)(x.c,{onClick:()=>{return s=e,Q(!0),P(s),void V(!0);var s},children:[(0,o.jsx)(m.c,{className:"fa-in me-2"})," Edit"]}),(0,w.Qr)(B.Delete_Rights,1)&&(0,w.Qr)(null===e||void 0===e?void 0:e.Project_Id,0)&&(0,o.jsxs)(x.c,{onClick:()=>{return s=e,L(!0),void P(s);var s},children:[(0,o.jsx)(h.c,{className:"fa-in me-2 text-danger"})," Delete"]})]})]})]})})]},s)))})}):(0,o.jsx)("h5",{className:"text-center mb-5",children:(0,w.Qr)(s.UserTypeId,0)||(0,w.Qr)(s.UserTypeId,1)?"No Topics Available":"You are not involved in any discussion"})]})}),(0,o.jsxs)(b.c,{open:u,onClose:Z,maxWidth:"sm",fullWidth:!0,children:[(0,o.jsx)(g.c,{children:G?"Modify Topic":"Create Discussion Topic"}),(0,o.jsx)(j.c,{children:(0,o.jsx)("table",{className:"table",children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border-0",children:"Topic"}),(0,o.jsx)("td",{className:"border-0",children:(0,o.jsx)("input",{className:"cus-inpt",onChange:e=>P({...H,Topic:e.target.value}),value:H.Topic,maxLength:100,placeholder:"ex: Morning Activiey",autoFocus:!0})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border-0",children:"Describtion"}),(0,o.jsx)("td",{className:"border-0",children:(0,o.jsx)("textarea",{className:"cus-inpt",value:H.Description,rows:5,maxLength:300,placeholder:"maximum 300 character",onChange:e=>P({...H,Description:e.target.value})})})]})]})})}),(0,o.jsxs)(f.c,{children:[(0,o.jsx)(y.c,{onClick:Z,children:"Close"}),(0,o.jsx)(y.c,{onClick:G?async()=>{null!==H&&void 0!==H&&H.Id&&1===Number(null===B||void 0===B?void 0:B.Edit_Rights)&&1===Number(null===B||void 0===B?void 0:B.Add_Rights)&&(0,O.q)({address:"discussionForum/discussionTopic",method:"PUT",bodyData:H}).then((e=>{e.success?(I.m4.success(e.message),J(!q),Z()):I.m4.error(e.message)})).catch((e=>console.log(e)))}:async()=>{1===Number(null===B||void 0===B?void 0:B.Add_Rights)&&(0,O.q)({address:"discussionForum/discussionTopic",method:"POST",bodyData:H}).then((e=>{e.success?(I.m4.success(e.message),J(!q),Z()):I.m4.error(e.message)})).catch((e=>console.log(e)))},children:G?"Update":"Create"})]})]}),(0,o.jsxs)(b.c,{open:_,onClose:$,children:[(0,o.jsx)(g.c,{children:"Confirmation"}),(0,o.jsxs)(j.c,{children:["Do you want to delete the ",(0,o.jsx)("span",{className:"text-primary fw-bold",children:null===H||void 0===H?void 0:H.Topic})," Topic?"]}),(0,o.jsxs)(f.c,{children:[(0,o.jsx)(y.c,{onClick:$,children:"Close"}),(0,o.jsx)(y.c,{onClick:async()=>{null!==H&&void 0!==H&&H.Id&&1===Number(null===B||void 0===B?void 0:B.Delete_Rights)&&(0,O.q)({address:"discussionForum/discussionTopic",method:"DELETE",bodyData:H}).then((e=>{e.success?(I.m4.success(e.message),$(),J(!q)):I.m4.error(e.message)})).catch((e=>console.log(e)))},color:"error",children:"Delete"})]})]}),(0,o.jsxs)(b.c,{open:E,onClose:ee,maxWidth:"sm",fullWidth:!0,children:[(0,o.jsx)(g.c,{children:"Manage Team"}),(0,o.jsx)(j.c,{children:(0,o.jsx)(k.c,{multiple:!0,id:"checkboxes-tags-demo",options:Y,disableCloseOnSelect:!0,getOptionLabel:e=>null===e||void 0===e?void 0:e.Name,value:(null===A||void 0===A?void 0:A.InvolvedUsers)||[],onChange:(e,s)=>W({...A,InvolvedUsers:s}),renderOption:(e,s,c)=>{let{selected:t}=c;return(0,o.jsxs)("li",{...e,children:[(0,o.jsx)(M.c,{icon:R,checkedIcon:U,style:{marginRight:8},checked:t}),null===s||void 0===s?void 0:s.Name]})},className:"pt-2",isOptionEqualToValue:(e,s)=>(null===e||void 0===e?void 0:e.UserId)===(null===s||void 0===s?void 0:s.UserId),renderInput:e=>(0,o.jsx)(S.c,{...e,label:"Users",placeholder:"Select Team Members"})})}),(0,o.jsxs)(f.c,{children:[(0,o.jsx)(y.c,{onClick:ee,children:"Close"}),(0,o.jsx)(y.c,{color:"success",onClick:async()=>{1===Number(null===B||void 0===B?void 0:B.Add_Rights)&&(0,O.q)({address:"discussionForum/modifyTeam",method:"POST",bodyData:{Teams:null===A||void 0===A?void 0:A.InvolvedUsers,Topic_Id:null===A||void 0===A?void 0:A.Id}}).then((e=>{e.success?(I.m4.success(e.message),J(!q),ee()):I.m4.error(e.message)})).catch((e=>console.log(e)))},children:"Save"})]})]})]}):(0,o.jsx)(N.c,{})}},59736:(e,s,c)=>{var t=c(22411);s.c=void 0;var a=t(c(90864)),o=c(82496);s.c=(0,a.default)((0,o.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox")},26728:(e,s,c)=>{var t=c(22411);s.c=void 0;var a=t(c(90864)),o=c(82496);s.c=(0,a.default)((0,o.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank")},45180:(e,s,c)=>{c.d(s,{c:()=>o});var t=c(27664),a=c(82496);const o=(0,t.c)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},86e3:(e,s,c)=>{c.d(s,{c:()=>o});var t=c(27664),a=c(82496);const o=(0,t.c)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},28655:(e,s,c)=>{c.d(s,{c:()=>o});var t=c(27664),a=c(82496);const o=(0,t.c)((0,a.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch")},90864:(e,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=c(27492)},69456:(e,s,c)=>{c.d(s,{L:()=>o,c:()=>n});var t=c(10099),a=c(33448);function o(e){return(0,a.cp)("MuiDivider",e)}const n=(0,t.c)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},65188:(e,s,c)=>{c.d(s,{G:()=>o,c:()=>n});var t=c(10099),a=c(33448);function o(e){return(0,a.cp)("MuiListItemIcon",e)}const n=(0,t.c)("MuiListItemIcon",["root","alignItemsFlexStart"])},81532:(e,s,c)=>{c.d(s,{Y:()=>o,c:()=>n});var t=c(10099),a=c(33448);function o(e){return(0,a.cp)("MuiListItemText",e)}const n=(0,t.c)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},93996:(e,s,c)=>{c.d(s,{c:()=>M});var t=c(95656),a=c(45072),o=c(69060),n=c(79736),i=c(21412),r=c(13344),d=c(12556),l=c(43424),u=c(49836),m=c(14008),h=c(33440),v=c(87188),p=c(56268),x=c(69456),b=c(65188),g=c(81532),j=c(10099),f=c(33448);function y(e){return(0,f.cp)("MuiMenuItem",e)}const C=(0,j.c)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var N=c(82496);const I=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],T=(0,d.cp)(h.c,{shouldForwardProp:e=>(0,l.c)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:c}=e;return[s.root,c.dense&&s.dense,c.divider&&s.divider,!c.disableGutters&&s.gutters]}})((e=>{let{theme:s,ownerState:c}=e;return(0,a.c)({},s.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!c.disableGutters&&{paddingLeft:16,paddingRight:16},c.divider&&{borderBottom:"1px solid ".concat((s.vars||s).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(s.vars||s).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(C.selected)]:{backgroundColor:s.vars?"rgba(".concat(s.vars.palette.primary.mainChannel," / ").concat(s.vars.palette.action.selectedOpacity,")"):(0,r.W4)(s.palette.primary.main,s.palette.action.selectedOpacity),["&.".concat(C.focusVisible)]:{backgroundColor:s.vars?"rgba(".concat(s.vars.palette.primary.mainChannel," / calc(").concat(s.vars.palette.action.selectedOpacity," + ").concat(s.vars.palette.action.focusOpacity,"))"):(0,r.W4)(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.focusOpacity)}},["&.".concat(C.selected,":hover")]:{backgroundColor:s.vars?"rgba(".concat(s.vars.palette.primary.mainChannel," / calc(").concat(s.vars.palette.action.selectedOpacity," + ").concat(s.vars.palette.action.hoverOpacity,"))"):(0,r.W4)(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:s.vars?"rgba(".concat(s.vars.palette.primary.mainChannel," / ").concat(s.vars.palette.action.selectedOpacity,")"):(0,r.W4)(s.palette.primary.main,s.palette.action.selectedOpacity)}},["&.".concat(C.focusVisible)]:{backgroundColor:(s.vars||s).palette.action.focus},["&.".concat(C.disabled)]:{opacity:(s.vars||s).palette.action.disabledOpacity},["& + .".concat(x.c.root)]:{marginTop:s.spacing(1),marginBottom:s.spacing(1)},["& + .".concat(x.c.inset)]:{marginLeft:52},["& .".concat(g.c.root)]:{marginTop:0,marginBottom:0},["& .".concat(g.c.inset)]:{paddingLeft:36},["& .".concat(b.c.root)]:{minWidth:36}},!c.dense&&{[s.breakpoints.up("sm")]:{minHeight:"auto"}},c.dense&&(0,a.c)({minHeight:32,paddingTop:4,paddingBottom:4},s.typography.body2,{["& .".concat(b.c.root," svg")]:{fontSize:"1.25rem"}}))})),M=o.forwardRef((function(e,s){const c=(0,u.C)({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:d="li",dense:l=!1,divider:h=!1,disableGutters:x=!1,focusVisibleClassName:b,role:g="menuitem",tabIndex:j,className:f}=c,C=(0,t.c)(c,I),M=o.useContext(m.c),S=o.useMemo((()=>({dense:l||M.dense||!1,disableGutters:x})),[M.dense,l,x]),k=o.useRef(null);(0,v.c)((()=>{r&&k.current&&k.current.focus()}),[r]);const V=(0,a.c)({},c,{dense:S.dense,divider:h,disableGutters:x}),_=(e=>{const{disabled:s,dense:c,divider:t,disableGutters:o,selected:n,classes:r}=e,d={root:["root",c&&"dense",s&&"disabled",!o&&"gutters",t&&"divider",n&&"selected"]},l=(0,i.c)(d,y,r);return(0,a.c)({},r,l)})(c),D=(0,p.c)(k,s);let O;return c.disabled||(O=void 0!==j?j:-1),(0,N.jsx)(m.c.Provider,{value:S,children:(0,N.jsx)(T,(0,a.c)({ref:D,role:g,tabIndex:O,component:d,focusVisibleClassName:(0,n.c)(_.focusVisible,b),className:(0,n.c)(_.root,f)},C,{ownerState:V,classes:_}))})}))},90280:(e,s,c)=>{c.d(s,{c:()=>t});const t=c(91200).c},27492:(e,s,c)=>{c.r(s),c.d(s,{capitalize:()=>a.c,createChainedFunction:()=>o.c,createSvgIcon:()=>n.c,debounce:()=>i.c,deprecatedPropType:()=>r,isMuiElement:()=>d.c,ownerDocument:()=>l.c,ownerWindow:()=>u.c,requirePropFactory:()=>m,setRef:()=>h,unstable_ClassNameGenerator:()=>y,unstable_useEnhancedEffect:()=>v.c,unstable_useId:()=>p.c,unsupportedProp:()=>x,useControlled:()=>b.c,useEventCallback:()=>g.c,useForkRef:()=>j.c,useIsFocusVisible:()=>f.c});var t=c(31152),a=c(55832),o=c(90280),n=c(27664),i=c(72144);const r=function(e,s){return()=>null};var d=c(28276),l=c(93976),u=c(31328);c(45072);const m=function(e,s){return()=>null};const h=c(30472).c;var v=c(87188),p=c(18144);const x=function(e,s,c,t,a){return null};var b=c(61124),g=c(17908),j=c(56268),f=c(24724);const y={configure:e=>{t.c.configure(e)}}}}]);
//# sourceMappingURL=7276.216683c1.chunk.js.map
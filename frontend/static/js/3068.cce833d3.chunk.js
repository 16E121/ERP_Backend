"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3068],{60687:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a(69060),r=a(41459),n=a(46864),l=a(43692),c=a(84436),o=a(39308),d=a(1908),i=a(82496);const u=()=>{const e=JSON.parse(localStorage.getItem("user")),[t,a]=(0,s.useState)([]),[u,m]=(0,s.useState)({zero:!1,inm:"",date:(new Date).toISOString().split("T")[0]}),[h,x]=(0,s.useState)(!0);(0,s.useEffect)((()=>{null!==e&&void 0!==e&&e.Company_id&&(a([]),(0,d.q)({address:"reports/stockReport?ReportDate=".concat(u.date),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then((e=>{e.success?a(e.data):a([])})).catch((e=>console.error(e))))}),[u.date]);const p=(0,s.useMemo)((()=>null!==t?t.map((e=>{const t=e.product_details.filter((e=>(u.zero||0!==Number(e.Bal_Qty))&&(!u.inm||e.Group_Name.toLowerCase().includes(u.inm.toLowerCase()))));return{...e,product_details:t}})):[]),[t,u.zero,u.inm]),j=e=>{var t;let{rows:a}=e;const[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!0),m=e=>{var t;let s=0;return null===a||void 0===a||null===(t=a.product_details)||void 0===t||t.forEach((t=>{s+=Number(t[e])})),Number(s)};function h(){var e;let t=0;return null===a||void 0===a||null===(e=a.product_details)||void 0===e||e.forEach((e=>{e.CL_Rate&&(t+=Number(e.CL_Rate))})),t/(null===a||void 0===a?void 0:a.product_details.length)}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border fa-13 text-center",children:(0,i.jsx)("button",{onClick:()=>c(!l),className:"icon-btn",children:l?(0,i.jsx)(r.c,{sx:{fontSize:"inherit"}}):(0,i.jsx)(n.c,{sx:{fontSize:"inherit"}})})}),(0,i.jsxs)("td",{className:"fa-13 text-center bg-light",children:[a.Stock_Group,(0,i.jsxs)("span",{className:"text-danger",children:[" (",a.product_details.length,")"]})]}),(0,i.jsx)("td",{className:"fa-13 text-end text-primary",children:(0,o.SA)(m("Bal_Qty")/1e3)}),(0,i.jsx)("td",{className:"fa-13 text-end text-primary bg-light",children:h()?(0,o.SA)(h()):0}),(0,i.jsx)("td",{className:"fa-13 text-end text-primary",onClick:()=>u(!d),children:d?(0,o.SA)(m("Stock_Value")/1e5):(0,o.SA)(m("Stock_Value"))}),(0,i.jsx)("td",{className:"fa-13 text-end text-primary bg-light",children:(0,o.SA)(m("Bal_Qty"))})]}),l&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:6,className:"px-0 py-2",children:(0,i.jsxs)("table",{className:"table mb-0",children:[(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{children:["SNo","INM","Quantity","Rate","Value (\u20b9)"].map(((e,t)=>(0,i.jsx)("th",{className:"fa-13 border text-center",children:e},t)))})}),(0,i.jsx)("tbody",{children:null===a||void 0===a||null===(t=a.product_details)||void 0===t?void 0:t.map(((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"fa-13 bg-light",children:t+1}),(0,i.jsx)("td",{className:"fa-13",children:e.Group_Name}),(0,i.jsx)("td",{className:"fa-13 text-end bg-light",children:(0,o.SA)(e.Bal_Qty)}),(0,i.jsx)("td",{className:"fa-13 text-end",children:(0,o.SA)(e.CL_Rate)}),(0,i.jsx)("td",{className:"fa-13 text-end fw-bold bg-light",children:(0,o.SA)(e.Stock_Value)})]},t)))})]})})})]})},f=(0,s.useMemo)((()=>p.map(((e,t)=>(0,i.jsx)(j,{rows:e},t)))),[p,u.zero]),N=()=>{let e=0;return p.forEach((t=>{t.product_details.forEach((t=>{e+=Number(t.Stock_Value)}))})),e};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(l.c,{children:[(0,i.jsxs)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center fw-bold text-dark",style:{backgroundColor:"#eae0cc"},children:[(0,i.jsx)("span",{children:null===e||void 0===e?void 0:e.Company_Name}),(0,i.jsx)("span",{children:(0,i.jsx)("input",{type:"search",className:"cus-inpt ps-3 w-100 rounded-5 border-0",value:u.inm,placeholder:"Search",onChange:e=>{m({...u,inm:e.target.value})}})})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-3 py-2",style:{boxShadow:"none"},children:[(0,i.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5",value:u.date,onChange:e=>{m({...u,date:e.target.value})}}),(0,i.jsx)("h6",{children:(0,i.jsxs)("span",{className:"text-primary fw-bold",onClick:()=>x(!h),children:["\u20b9",h?(0,o.SA)(N()/1e5)+" (L)":(0,o.SA)(N())]})})]}),(0,i.jsx)(c.c,{className:"overflow-scroll pt-0",style:{maxHeight:"75vh"},children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{children:["-","Group Name","Tonnage","Rate","Value (L)","Quantity"].map(((e,t)=>(0,i.jsx)("th",{className:"tble-hed-stick text-center fa-14 border",children:e},t)))})}),(0,i.jsx)("tbody",{children:f})]})})]})})}},84436:(e,t,a)=>{a.d(t,{c:()=>j});var s=a(45072),r=a(95656),n=a(69060),l=a(79736),c=a(21412),o=a(12556),d=a(49836),i=a(10099),u=a(33448);function m(e){return(0,u.cp)("MuiCardContent",e)}(0,i.c)("MuiCardContent",["root"]);var h=a(82496);const x=["className","component"],p=(0,o.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),j=n.forwardRef((function(e,t){const a=(0,d.C)({props:e,name:"MuiCardContent"}),{className:n,component:o="div"}=a,i=(0,r.c)(a,x),u=(0,s.c)({},a,{component:o}),j=(e=>{const{classes:t}=e;return(0,c.c)({root:["root"]},m,t)})(u);return(0,h.jsx)(p,(0,s.c)({as:o,className:(0,l.c)(j.root,n),ownerState:u,ref:t},i))}))},43692:(e,t,a)=>{a.d(t,{c:()=>f});var s=a(45072),r=a(95656),n=a(69060),l=a(79736),c=a(21412),o=a(12556),d=a(49836),i=a(85624),u=a(10099),m=a(33448);function h(e){return(0,m.cp)("MuiCard",e)}(0,u.c)("MuiCard",["root"]);var x=a(82496);const p=["className","raised"],j=(0,o.cp)(i.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),f=n.forwardRef((function(e,t){const a=(0,d.C)({props:e,name:"MuiCard"}),{className:n,raised:o=!1}=a,i=(0,r.c)(a,p),u=(0,s.c)({},a,{raised:o}),m=(e=>{const{classes:t}=e;return(0,c.c)({root:["root"]},h,t)})(u);return(0,x.jsx)(j,(0,s.c)({className:(0,l.c)(m.root,n),elevation:o?8:void 0,ref:t,ownerState:u},i))}))}}]);
//# sourceMappingURL=3068.cce833d3.chunk.js.map